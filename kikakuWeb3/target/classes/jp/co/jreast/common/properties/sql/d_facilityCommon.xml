<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE sqlMap 
          PUBLIC "-//ibatis.apache.org//DTD SQL Map 2.0//EN" 
          "http://ibatis.apache.org/dtd/sql-map-2.dtd">
<sqlMap namespace="facilityCommon">
	<!-- ******************************************************************************************
	 *		
	 *		施設付帯情報用クエリ
	 *		
	******************************************************************************************* -->

	<typeAlias alias="DFacilityManageKey"  type="jp.co.jreast.common.interfaces.FacilityManageKey" />
	<typeAlias alias="DFacilityManageData"  type="jp.co.jreast.common.interfaces.DFacilityManageData" />
	<typeAlias alias="DFacilityManageSearchData"  type="jp.co.jreast.common.interfaces.DFacilityManageSearchData" />



	<!-- ******************************************************************************************
	 *		[DP/RM]施設付帯情報管理
	******************************************************************************************* -->

	<select id="DFM_fetchMaxFacilityPatternBranchNo" resultClass="String" parameterClass="DFacilityManageKey">
		SELECT
			ISNULL(MAX(SUBSTRING(FACILITY_PATTERN,4,3)),'') AS PATTERN_NUM
		FROM
			D_FACILITY_MANAGE
		WHERE
				FACILITY_PATTERN LIKE SUBSTRING(#facilityPattern#, 1, 3) + '%'
			AND FACILITY_CD		= #facilityCd#
			AND KIND_FLG		= #kindFlg#
			AND FACILITY_SORTS	= #facilitySorts#
	</select>

	<update id="DFM_clearDFacilityManageNewFlg" parameterClass="DFacilityManageKey">
		UPDATE
			D_FACILITY_MANAGE
		SET
			[NEW_FLG] = '0'
		WHERE
				FACILITY_CD			= #facilityCd#
			AND KIND_FLG			= #kindFlg#
			AND FACILITY_SORTS		= #facilitySorts#
			AND FACILITY_PATTERN	= #facilityPattern#
			AND CAREER_NO			= #careerNo#
	</update>

	<insert id="DFM_insertDFacilityManage" parameterClass="DFacilityManageData">
		INSERT INTO
			D_FACILITY_MANAGE
		(
			 FACILITY_CD
			,KIND_FLG
			,FACILITY_SORTS
			,FACILITY_PATTERN
			,CAREER_NO
			,FACILITY_PATTERN_NM
			,FACILITY_TYPE
			,FACILITY_DECISION_FLG
			,USER_ID
			,CREATE_YMD
			,UP_YMD
			,FP_STATUS
			,NEW_FLG
			,ZOUSEI_RELATE_CNT
			,SEND_STATUS
			,SEND_DIV
			,SENDER_NM
			,SENDER_TEL
			,SENDER_FAX
			,FACILITY_SEND_ADDR
			,BODY_CAREER_NO
		)
		<isEmpty property="careerNo">
		SELECT
			 FACILITY_CD
			,KIND_FLG
			,#facilitySorts#		AS FACILITY_SORTS
			,#facilityPattern#		AS FACILITY_PATTERN
			,1						AS CAREER_NO
			,#facilityPatternNm#	AS FACILITY_PATTERN_NM
			,#facilityType#			AS FACILITY_TYPE
			,'0'					AS FACILITY_DECISION_FLG
			,#userData.userId#		AS USER_ID
			,#upYmd#				AS CREATE_YMD
			,#upYmd#				AS UP_YMD
			,#fpStatus#				AS FP_STATUS
			,'1'					AS NEW_FLG
			,0						AS ZOUSEI_RELATE_CNT
			<isEqual property="fpStatus" compareValue="21">
				,'2'				AS SEND_STATUS
			</isEqual>
			<isNotEqual property="fpStatus" compareValue="21">
				,NULL				AS SEND_STATUS
			</isNotEqual>
			,SEND_DIV_CD			AS SEND_DIV
			,#senderNm#				AS SENDER_NM
			,#senderTel#			AS SENDER_TEL
			,#senderFax#			AS SENDER_FAX
			,#facilitySendAddr#		AS FACILITY_SEND_ADDR
			,1						AS BODY_CAREER_NO
		FROM
			M_FACILITY
		WHERE
				FACILITY_CD	= #facilityCd#
			AND COM_ID		= '2'
			AND KIND_FLG	= #kindFlg#
		</isEmpty>
		<isNotEmpty property="careerNo">
		SELECT
			 FACILITY_CD
			,KIND_FLG
			,FACILITY_SORTS
			,FACILITY_PATTERN
			,CAREER_NO + 1			AS CAREER_NO
			,FACILITY_PATTERN_NM
			,FACILITY_TYPE
			,FACILITY_DECISION_FLG
			,#userData.userId#		AS USER_ID
			,#upYmd#				AS CREATE_YMD
			,#upYmd#				AS UP_YMD
			,#fpStatus#				AS FP_STATUS
			,'1'					AS NEW_FLG
			,ZOUSEI_RELATE_CNT
			<isEqual property="fpStatus" compareValue="21">
				,'2'				AS SEND_STATUS
			</isEqual>
			<isNotEqual property="fpStatus" compareValue="21">
				,SEND_STATUS		AS SEND_STATUS
			</isNotEqual>
			,SEND_DIV
			,#senderNm#				AS SENDER_NM
			,#senderTel#			AS SENDER_TEL
			,#senderFax#			AS SENDER_FAX
			,#facilitySendAddr#				AS FACILITY_SEND_ADDR
			,CAREER_NO + 1			AS BODY_CAREER_NO
		FROM
			D_FACILITY_MANAGE
		WHERE
				FACILITY_CD			= #facilityCd#
			AND KIND_FLG			= #kindFlg#
			AND FACILITY_SORTS		= #facilitySorts#
			AND FACILITY_PATTERN	= #facilityPattern#
			AND CAREER_NO			= #careerNo#
		</isNotEmpty>
	</insert>

	<resultMap id="DFM_DFacilityManageKey_RM" class="HashMap">
		<result property="facilityCd"			column="FACILITY_CD"			javaType="String"	jdbcType="char" />
		<result property="kindFlg"				column="KIND_FLG"				javaType="String"	jdbcType="char" />
		<result property="facilitySorts"		column="FACILITY_SORTS"			javaType="String"	jdbcType="varchar" />
		<result property="facilityPattern"		column="FACILITY_PATTERN"		javaType="String"	jdbcType="varchar" />
		<result property="careerNo"				column="CAREER_NO"				javaType="Integer"	jdbcType="smallint"/>
	</resultMap>

	<select id="DFM_fetchLatestDFacilityManageKey" resultMap="DFM_DFacilityManageKey_RM" parameterClass="DFacilityManageData">
		SELECT
			*
		FROM
			D_FACILITY_MANAGE
		WHERE
				FACILITY_CD			= #facilityCd#
			AND KIND_FLG			= #kindFlg#
			AND FACILITY_SORTS		= #facilitySorts#
			AND FACILITY_PATTERN	= #facilityPattern#
			AND NEW_FLG				= '1'
	</select>

	<insert id="DFM_insertDFacilityManageNewStatus" parameterClass="DFacilityManageData">
		INSERT INTO
			D_FACILITY_MANAGE
		(
			 FACILITY_CD
			,KIND_FLG
			,FACILITY_SORTS
			,FACILITY_PATTERN
			,CAREER_NO
			,FACILITY_PATTERN_NM
			,FACILITY_TYPE
			,FACILITY_DECISION_FLG
			,USER_ID
			,CREATE_YMD
			,UP_YMD
			,FP_STATUS
			,NEW_FLG
			,ZOUSEI_RELATE_CNT
			,SEND_STATUS
			,SEND_DIV
			,SENDER_NM
			,SENDER_TEL
			,SENDER_FAX
			,FACILITY_SEND_ADDR
			,BODY_CAREER_NO
		)
		SELECT
			 FACILITY_CD
			,KIND_FLG
			,FACILITY_SORTS
			,FACILITY_PATTERN
			,CAREER_NO + 1			AS CAREER_NO
			,FACILITY_PATTERN_NM
			,FACILITY_TYPE
			,FACILITY_DECISION_FLG
			,#userData.userId#		AS USER_ID
			,#upYmd#				AS CREATE_YMD
			,#upYmd#				AS UP_YMD
			,#fpStatus#				AS FP_STATUS
			,'1'					AS NEW_FLG
			,ZOUSEI_RELATE_CNT
			,SEND_STATUS
			,SEND_DIV
			<isNull property="senderNm">
				,SENDER_NM
			</isNull>
			<isNotNull property="senderNm">
				,#senderNm#
			</isNotNull>
			<isNull property="senderNm">
				,SENDER_TEL
			</isNull>
			<isNotNull property="senderNm">
				,#senderTel#
			</isNotNull>
			<isNull property="senderNm">
				,SENDER_FAX
			</isNull>
			<isNotNull property="senderNm">
				,#senderFax#
			</isNotNull>
			
			<!-- ,SENDER_TEL -->
			<!-- ,SENDER_FAX -->
			,FACILITY_SEND_ADDR
			,BODY_CAREER_NO
		FROM
			D_FACILITY_MANAGE
		WHERE
				FACILITY_CD			= #facilityCd#
			AND KIND_FLG			= #kindFlg#
			AND FACILITY_SORTS		= #facilitySorts#
			AND FACILITY_PATTERN	= #facilityPattern#
			AND CAREER_NO			= #careerNo#
	</insert>

	<resultMap id="DFM_BaseData_RM" class="HashMap">
		<result property="branchCd"				column="BRANCH_CD"				javaType="String"	jdbcType="char" />
		<result property="careerNo"				column="CAREER_NO"				javaType="Integer"	jdbcType="smallint"/>
		<result property="facilityCd"			column="FACILITY_CD"			javaType="String"	jdbcType="char" />
		<result property="facilityNm"			column="FACILITY_NM"			javaType="String"	jdbcType="varchar" />
		<result property="facilityPattern"		column="FACILITY_PATTERN"		javaType="String"	jdbcType="varchar" />
		<result property="facilityPatternNm"	column="FACILITY_PATTERN_NM"	javaType="String"	jdbcType="varchar" />
		<result property="facilitySorts"		column="FACILITY_SORTS"			javaType="String"	jdbcType="varchar" />
		<result property="goodsNm"				column="GOODS_NM"				javaType="String"	jdbcType="varchar" />
		<result property="kindFlg"				column="KIND_FLG"				javaType="String"	jdbcType="char" />
		<result property="planAnsNo"			column="PLAN_ANS_NO"			javaType="Long"		jdbcType="bigint" />
		<result property="planNoEJp"			column="PLAN_NO_E_JP"			javaType="String"	jdbcType="char" />
		<result property="seasonDiv"			column="SEASON_DIV"				javaType="String"	jdbcType="char" />
		<result property="paStatus"				column="PA_STATUS"				javaType="Integer"	jdbcType="smallint" />
		<result property="fpStatus"				column="FP_STATUS"				javaType="Integer"	jdbcType="smallint" />
		<result property="upYmd"				column="UP_YMD"					javaType="String"	jdbcType="datetime" />
		<result property="year"					column="YEAR"					javaType="String"	jdbcType="char" />
		<result property="sendDiv"				column="SEND_DIV"				javaType="Integer"	jdbcType="smallint" />
		<result property="senderNm"				column="SENDER_NM"				javaType="String"	jdbcType="varchar" />
		<result property="senderTel"			column="SENDER_TEL"				javaType="String"	jdbcType="varchar" />
		<result property="senderFax"			column="SENDER_FAX"				javaType="String"	jdbcType="varchar" />
		<result property="facilitySendAddr"		column="FACILITY_SEND_ADDR"		javaType="String"	jdbcType="varchar" />
		<result property="facilityType"			column="FACILITY_TYPE"			javaType="String"	jdbcType="char" />
	</resultMap>

	<select id="DFM_fetchDFacilityManageHeader" resultMap="DFM_BaseData_RM" parameterClass="DFacilityManageSearchData">
		SELECT
			 [D_FACILITY_MANAGE].[KIND_FLG]
			,NULL									AS [BRANCH_CD]
			,NULL									AS [YEAR]
			,NULL									AS [SEASON_DIV]
			,NULL									AS [PA_STATUS]
			,[D_FACILITY_MANAGE].[FP_STATUS]
			,NULL									AS [GOODS_NM]
			,NULL									AS [PLAN_NO_E_JP]
			,[M_FACILITY].[FACILITY_NM]
			,[D_FACILITY_MANAGE].[FACILITY_CD]
			,[D_FACILITY_MANAGE].[FACILITY_PATTERN]
			,[D_FACILITY_MANAGE].[FACILITY_PATTERN_NM]
			,[D_FACILITY_MANAGE].[UP_YMD]
			,[D_FACILITY_MANAGE].[FACILITY_SEND_ADDR]
			,[D_FACILITY_MANAGE].[CAREER_NO]
			,[D_FACILITY_MANAGE].[FACILITY_SORTS]
			,NULL									AS [PLAN_ANS_NO]
			,[D_FACILITY_MANAGE].[SEND_DIV]
			,[D_FACILITY_MANAGE].[SENDER_NM]
			,[D_FACILITY_MANAGE].[SENDER_TEL]
			,[D_FACILITY_MANAGE].[SENDER_FAX]
			,[D_FACILITY_MANAGE].[FACILITY_TYPE]
		FROM
			[D_FACILITY_MANAGE]
		INNER JOIN
			[M_FACILITY] ON (
				[M_FACILITY].[FACILITY_CD]	= [D_FACILITY_MANAGE].[FACILITY_CD]
			AND [M_FACILITY].[COM_ID]		= '2'
			AND [M_FACILITY].[KIND_FLG]		= [D_FACILITY_MANAGE].[KIND_FLG]
		)
		WHERE
				[D_FACILITY_MANAGE].[FACILITY_CD]		= #facilityCd#
			AND [D_FACILITY_MANAGE].[KIND_FLG]			= #kindFlg#
			AND [D_FACILITY_MANAGE].[FACILITY_SORTS]	= #facilitySorts#
			AND [D_FACILITY_MANAGE].[FACILITY_PATTERN]	= #facilityPattern#
			<isEmpty property="careerNo">
			AND [D_FACILITY_MANAGE].[NEW_FLG]			= '1'
			</isEmpty>
			<isNotEmpty property="careerNo">
			AND [D_FACILITY_MANAGE].[CAREER_NO]			= #careerNo#
			</isNotEmpty>
	</select>

	<select id="DFM_fetchLatestDFacilityManageHeaderLinkedPlanAns" resultMap="DFM_BaseData_RM" parameterClass="DFacilityManageSearchData">
		SELECT
			 [D_FACILITY_MANAGE].[KIND_FLG]
			,[D_PLAN_ANS].[BRANCH_CD]
			,[D_PLAN_ANS].[YEAR]
			,[D_PLAN_ANS].[SEASON_DIV]
			,[D_PLAN_ANS].[STATUS]					AS [PA_STATUS]
			,[D_FACILITY_MANAGE].[FP_STATUS]
			,[D_PLAN_ANS].[GOODS_NM]
			,[D_PLAN_ANS].[PLAN_NO_E_JP]
			,[M_FACILITY].[FACILITY_NM]
			,[D_FACILITY_MANAGE].[FACILITY_CD]
			,[D_FACILITY_MANAGE].[FACILITY_PATTERN]
			,[D_FACILITY_MANAGE].[FACILITY_PATTERN_NM]
			,[D_FACILITY_MANAGE].[UP_YMD]
			,[D_FACILITY_MANAGE].[FACILITY_SEND_ADDR]
			,[D_FACILITY_MANAGE].[CAREER_NO]
			,[D_FACILITY_MANAGE].[FACILITY_SORTS]
			,[D_PLAN_ANS].[PLAN_ANS_NO]
			,[D_FACILITY_MANAGE].[SEND_DIV]
			,[D_FACILITY_MANAGE].[SENDER_NM]
			,[D_FACILITY_MANAGE].[SENDER_TEL]
			,[D_FACILITY_MANAGE].[SENDER_FAX]
			,[D_FACILITY_MANAGE].[FACILITY_TYPE]
		FROM
			[D_PLAN_ANS]
		INNER JOIN
			[D_PLAN_ANS_FACILITY] ON (
				[D_PLAN_ANS_FACILITY].[PLAN_ANS_NO]	= [D_PLAN_ANS].[PLAN_ANS_NO]
			AND [D_PLAN_ANS].[NEW_FLG] 				= '1'
		)
		INNER JOIN
			[D_FACILITY_MANAGE] ON (
				[D_FACILITY_MANAGE].[FACILITY_CD]		= [D_PLAN_ANS_FACILITY].[FACILITY_CD]
			AND [D_FACILITY_MANAGE].[KIND_FLG]			= [D_PLAN_ANS_FACILITY].[KIND_FLG]
			AND [D_FACILITY_MANAGE].[FACILITY_SORTS]	= #facilitySorts#
			<isEqual property="facilitySorts" compareValue="1">
			AND [D_FACILITY_MANAGE].[FACILITY_PATTERN]	= [D_PLAN_ANS_FACILITY].[FACILITY_PATTERN_NO3]
			</isEqual>
			<isEqual property="facilitySorts" compareValue="2">
			AND [D_FACILITY_MANAGE].[FACILITY_PATTERN]	= [D_PLAN_ANS_FACILITY].[FACILITY_PATTERN_NO5]
			</isEqual>
			AND [D_FACILITY_MANAGE].[NEW_FLG]			= '1'
		)
		INNER JOIN
			[M_FACILITY] ON (
				[M_FACILITY].[FACILITY_CD]	= [D_FACILITY_MANAGE].[FACILITY_CD]
			AND [M_FACILITY].[COM_ID]		= '2'
			AND [M_FACILITY].[KIND_FLG]		= [D_FACILITY_MANAGE].[KIND_FLG]
		)
		WHERE
			[D_PLAN_ANS].[PLAN_ANS_NO]	= #planAnsNo#
	</select>

	<select id="DFM_countDFacilityManage" resultClass="Integer" parameterClass="DFacilityManageKey">
		SELECT 
			COUNT(*)
		FROM
			[D_FACILITY_MANAGE]
		WHERE
				[NEW_FLG]			= '1'
			AND [FACILITY_CD]		= #facilityCd#
			AND [KIND_FLG]			= #kindFlg#
			AND [FACILITY_SORTS]	= #facilitySorts#
	</select>



	<!-- ******************************************************************************************
	 *		DP/RM企画書
	******************************************************************************************* -->

	<select id="DFM_fetchFacilityTypeByPlanAns" resultClass="String" parameterClass="DFacilityManageSearchData">
		SELECT
			[D_FACILITY_MANAGE].[FACILITY_TYPE]
		FROM
			[D_PLAN_ANS_FACILITY]
		INNER JOIN
			[D_FACILITY_MANAGE] ON (
				[D_FACILITY_MANAGE].[FACILITY_CD]		= [D_PLAN_ANS_FACILITY].[FACILITY_CD]
			AND [D_FACILITY_MANAGE].[KIND_FLG]			= [D_PLAN_ANS_FACILITY].[KIND_FLG]
			AND [D_FACILITY_MANAGE].[FACILITY_SORTS]	= #facilitySorts#
			<isEqual property="facilitySorts" compareValue="1">
			AND [D_FACILITY_MANAGE].[FACILITY_PATTERN]	= [D_PLAN_ANS_FACILITY].[FACILITY_PATTERN_NO3]
			</isEqual>
			<isEqual property="facilitySorts" compareValue="2">
			AND [D_FACILITY_MANAGE].[FACILITY_PATTERN]	= [D_PLAN_ANS_FACILITY].[FACILITY_PATTERN_NO5]
			</isEqual>
			AND [D_FACILITY_MANAGE].[NEW_FLG]			= '1'
		)
		WHERE
			[D_PLAN_ANS_FACILITY].[PLAN_ANS_NO]	= #planAnsNo#
	</select>

	<resultMap id="DFM_CapacityOutOfRange_RM" class="HashMap">
		<result property="count"				column="COUNT"					javaType="Integer"	jdbcType="smallint" />
		<result property="min"					column="MIN"					javaType="Integer"	jdbcType="smallint" />
		<result property="max"					column="MAX"					javaType="Integer"	jdbcType="smallint" />
	</resultMap>

	<select id="DFM_fetchCapacityOutOfRange" resultMap="DFM_CapacityOutOfRange_RM" parameterClass="HashMap">
		SELECT
			 MIN([D_NO1_JR_STOCK].[CAPACITY_FROM])	AS [MIN]
			,MAX([D_NO1_JR_STOCK].[CAPACITY_TO])	AS [MAX]
			,COUNT(*)								AS [COUNT]

		FROM
			[D_PLAN_ANS_FACILITY]

		INNER JOIN
			[D_PLAN_ANS]
		ON (
				[D_PLAN_ANS].[PLAN_ANS_NO]	= [D_PLAN_ANS_FACILITY].[PLAN_ANS_NO]
			AND [D_PLAN_ANS].[NEW_FLG]		= '1'
			AND [D_PLAN_ANS].[DEL_FLG]		= '0'
		)

		INNER JOIN
			[D_NO1_JR_STOCK]
		ON (
				[D_NO1_JR_STOCK].[PLAN_ANS_NO]	= [D_PLAN_ANS].[PLAN_ANS_NO]
			AND [D_NO1_JR_STOCK].[CAREER_NO]	= [D_PLAN_ANS].[NO1_CAREER_NO]
			AND [D_NO1_JR_STOCK].[STOCK_DIV]	= 1
			AND [D_NO1_JR_STOCK].[ROOM_TYPE]	= #roomType:smallint#
		)

		WHERE
				[D_PLAN_ANS_FACILITY].[FACILITY_CD]				= #facilityCd#
			AND [D_PLAN_ANS_FACILITY].[KIND_FLG]				= #kindFlg#
			AND [D_PLAN_ANS_FACILITY].[FACILITY_PATTERN_NO3]	= #facilityPattern#

		HAVING
			(
				<![CDATA[MIN([D_NO1_JR_STOCK].[CAPACITY_FROM])	< #capacityFrom:smallint#]]>
				OR
				<![CDATA[MAX([D_NO1_JR_STOCK].[CAPACITY_TO])	> #capacityTo:smallint#]]>
			)
	</select>



	<!-- ******************************************************************************************
	 *		施設情報マスタ
	******************************************************************************************* -->

	<typeAlias alias="MFacility"  type="jp.co.jreast.common.data.ddata.MFacility" />

	<resultMap id="DFM_MFacility_RM" class="MFacility">
		<result property="facilityCd"			column="FACILITY_CD"		javaType="String"	jdbcType="char" />
		<result property="comId"				column="COM_ID"				javaType="String"	jdbcType="char" />
		<result property="kindFlg"				column="KIND_FLG"			javaType="String"	jdbcType="char" />
		<result property="facilityNm"			column="FACILITY_NM"		javaType="String"	jdbcType="varchar" />
		<result property="sendDivCd"			column="SEND_DIV_CD"		javaType="String"	jdbcType="char" />
		<result property="eMail"				column="E_MAIL"				javaType="String"	jdbcType="char" />
		<result property="sendFaxNo"			column="SEND_FAX_NO"		javaType="String"	jdbcType="char" />
		<result property="infantFlg"			column="INFANT_FLG"			javaType="String"	jdbcType="char" />
	</resultMap>

	<select id="DFM_findMFacility" resultMap="DFM_MFacility_RM" parameterClass="MFacility">
		SELECT
			*
		FROM
			M_FACILITY
		WHERE
				FACILITY_CD	= #facilityCd#
			AND COM_ID		= #comId#
			AND KIND_FLG	= #kindFlg#
			AND CLOSE_FLG   = '0'
			AND CONTRACT_KIND IN ('1', '2', '3')
	</select>

	<select id="DFM_findMFacilityByPlanAnsNo" resultMap="DFM_MFacility_RM" parameterClass="Long">
		SELECT
			[M_FACILITY].*
		FROM
			[M_FACILITY]
		INNER JOIN
			[D_PLAN_ANS_FACILITY]
		ON (
				[D_PLAN_ANS_FACILITY].[FACILITY_CD]	= [M_FACILITY].[FACILITY_CD]
			AND '2'									= [M_FACILITY].[COM_ID]
			AND [D_PLAN_ANS_FACILITY].[KIND_FLG]	= [M_FACILITY].[KIND_FLG]
		)
		WHERE
				[D_PLAN_ANS_FACILITY].[PLAN_ANS_NO]	= #planAnsNo#
	</select>



	<!-- ******************************************************************************************
	 *		[DP/RM]施設付帯情報_承認状況
	******************************************************************************************* -->

	<typeAlias alias="DFacilityAckStatus"  type="jp.co.jreast.common.data.ddata.FacilityAckStatusData" />

	<resultMap id="DFM_AckStatus_RM" class="DFacilityAckStatus">
		<result property="facilityCd"		column="FACILITY_CD"		javaType="String"	jdbcType="char" />
		<result property="kindFlg"			column="KIND_FLG"			javaType="String"	jdbcType="char" />
		<result property="facilitySorts"	column="FACILITY_SORTS"		javaType="String"	jdbcType="char" />
		<result property="facilityPattern"	column="FACILITY_PATTERN"	javaType="String"	jdbcType="char" />
		<result property="careerNo"			column="CAREER_NO"			javaType="Integer"	jdbcType="smallint" />
		<result property="userDiv"			column="USER_DIV"			javaType="Integer"	jdbcType="smallint" />
		<result property="sequence"			column="SEQUENCE"			javaType="Integer"	jdbcType="smallint" />
		<result property="tantousya"		column="TANTOUSYA"			javaType="String"	jdbcType="varchar" />
		<result property="responsibler"		column="RESPONSIBLER"		javaType="String"	jdbcType="varchar" />
		<result property="ackDate"			column="ACK_DATE"			javaType="Date"		jdbcType="datetime" />
	</resultMap>

	<sql id="DFM_subQuery_DFacilityAckStatus_AllColumns">
		 [FACILITY_CD]
		,[KIND_FLG]
		,[FACILITY_SORTS]
		,[FACILITY_PATTERN]
		,[CAREER_NO]
		,[USER_DIV]
		,[SEQUENCE]
		,[TANTOUSYA]
		,[RESPONSIBLER]
		,[ACK_DATE]
	</sql>

	<select id="DFM_fetchFacilityAckStatusList_JR" resultMap="DFM_AckStatus_RM" parameterClass="DFacilityManageKey">
		SELECT
			<include refid="DFM_subQuery_DFacilityAckStatus_AllColumns"/>
		FROM
			[D_FACILITY_ACK_STATUS]
		WHERE
				[FACILITY_CD]		= #facilityCd#
			AND [KIND_FLG]			= #kindFlg#
			AND [FACILITY_SORTS]	= #facilitySorts#
			AND [FACILITY_PATTERN]	= #facilityPattern#
			AND [USER_DIV]			= '1'
		ORDER BY
			[ACK_DATE] ASC
	</select>

	<select id="DFM_fetchFacilityAckStatusList_Facility" resultMap="DFM_AckStatus_RM" parameterClass="DFacilityManageKey">
		SELECT
			<include refid="DFM_subQuery_DFacilityAckStatus_AllColumns"/>
		FROM
			[D_FACILITY_ACK_STATUS]
		WHERE
				[FACILITY_CD]		= #facilityCd#
			AND [KIND_FLG]			= #kindFlg#
			AND [FACILITY_SORTS]	= #facilitySorts#
			AND [FACILITY_PATTERN]	= #facilityPattern#
			AND [USER_DIV]			= '2'
		ORDER BY
			[ACK_DATE] ASC
	</select>

	<insert id="DFM_insertDFacilityAckStatus" parameterClass="DFacilityAckStatus">
		INSERT INTO
			[D_FACILITY_ACK_STATUS]
		(
			 [FACILITY_CD]
			,[KIND_FLG]
			,[FACILITY_SORTS]
			,[FACILITY_PATTERN]
			,[CAREER_NO]
			,[USER_DIV]
			,[SEQUENCE]
			,[TANTOUSYA]
			,[RESPONSIBLER]
			,[ACK_DATE]
		)
		VALUES
		(
			 #facilityCd#
			,#kindFlg#
			,#facilitySorts#
			,#facilityPattern#
			,#careerNo#
			,#userDiv#
			,(SELECT ISNULL(MAX([SEQUENCE]), 0) + 1
				FROM [D_FACILITY_ACK_STATUS]
				WHERE
						[FACILITY_CD]		= #facilityCd#
					AND [KIND_FLG]			= #kindFlg#
					AND [FACILITY_SORTS]	= #facilitySorts#
					AND [FACILITY_PATTERN]	= #facilityPattern#
					AND [USER_DIV]			= #userDiv#
			) 
			,#tantousya#
			,#responsibler#
			,#ackDate#
		)
	</insert>



	<!-- ******************************************************************************************
	 *		[DP/RM]送信コメントテンプレート
	******************************************************************************************* -->

	<resultMap id="DFM_fetchSendCmtTmplList_RM" class="org.apache.struts.util.LabelValueBean">
		<result property="value"	column="CMT_TMPL"	javaType="String"	jdbcType="varchar"/>
		<result property="label"	column="CMT_TMPL"	javaType="String"	jdbcType="varchar"/>
	</resultMap>

	<select id="DFM_fetchSendCmtTmplList" resultMap="DFM_fetchSendCmtTmplList_RM" parameterClass="jp.co.jreast.common.data.UserData">
		SELECT TOP 100
			[CMT_TMPL]
		FROM
			[D_SEND_CMT_TMPL]
		WHERE
			[BRANCH_CD]	= #branchCd#
		ORDER BY
			[TIMESTAMP] DESC
	</select>

	<update id="DFM_updateDSendCmtTmplTimestamp" parameterClass="jp.co.jreast.common.data.ddata.DSendCmtTmpl">
		UPDATE
			[D_SEND_CMT_TMPL]
		SET
			[TIMESTAMP]=getDate()
		WHERE
				[CMT_TMPL]	= #cmtTmpl#
			AND [BRANCH_CD]	= #branchCd#
	</update>

	<insert id="DFM_insertDSendCmtTmpl" parameterClass="jp.co.jreast.common.data.ddata.DSendCmtTmpl">
		INSERT INTO
			[D_SEND_CMT_TMPL]
		(
			 [CMT_TMPL]
			,[BRANCH_CD]
			,[TIMESTAMP]
		)
		VALUES
		(
			 #cmtTmpl#
			,#branchCd#
			,getDate()
		)
	</insert>



	<!-- ******************************************************************************************
	 *		FAX状態管理
	******************************************************************************************* -->

	<insert id="DFM_insertBFaxStatus" parameterClass="jp.co.jreast.common.data.ddata.BFaxStatus">
		INSERT INTO
			[B_FAX_STATUS]
		(
			 [PLAN_ANS_NO]
			,[JOB_ID]
			,[FAX_NO]
			,[TANTOUSYA]
			,[CMT_TMPL]
			,[PLAN_ANS_FILE_PATH]
			,[PLAN_FILE_PATH]
			,[FACILITY_CD]
			,[FACILITY_KEY]
		)
		VALUES
		(
			 #planAnsNo#
			,#jobId#
			,#faxNo#
			,#tantousya#
			,#cmtTmpl#
			,#planAnsFilePath#
			,#planFilePath#
			,#facilityCd#
			,#facilityKey#
		)
	</insert>



	<!-- ******************************************************************************************
	 *		[DP/RM]施設_部屋備品
	******************************************************************************************* -->

	<typeAlias alias="DFacilityVesselHistory" type="jp.co.jreast.common.data.ddata.DFacilityVesselHistory" />

	<resultMap id="DFM_DFacilityVesselHistory_RM" class="DFacilityVesselHistory">
		<result property="facilityCd"		column="FACILITY_CD"		javaType="String"	jdbcType="char" />
		<result property="kindFlg"			column="KIND_FLG"			javaType="String"	jdbcType="char" />
		<result property="facilityPattern"	column="FACILITY_PATTERN"	javaType="String"	jdbcType="varchar" />
		<result property="roomType"			column="ROOM_TYPE"			javaType="Integer"	jdbcType="smallint" />
		<result property="careerNo"			column="CAREER_NO"			javaType="Integer"	jdbcType="smallint"/>
		<result property="buildingDiv"		column="BUILDING_DIV"		javaType="String"	jdbcType="char" />
		<result property="viewCd"			column="VIEW_CD"			javaType="String"	jdbcType="varchar"/>
		<result property="buildingRoomNm"	column="BUILDING_ROOM_NM"	javaType="String"	jdbcType="varchar" />
		<result property="capacityFrom"		column="CAPACITY_FROM"		javaType="String"	jdbcType="smallint" />
		<result property="capacityTo"		column="CAPACITY_TO"		javaType="String"	jdbcType="smallint" />
		<result property="floorAssign"		column="FLOOR_ASSIGN"		javaType="String"	jdbcType="smallint" />
		<result property="styleDiv"			column="STYLE_DIV"			javaType="String"	jdbcType="smallint" />
		<result property="area"				column="AREA"				javaType="String"	jdbcType="smallint" />
		<result property="areaUnit"			column="AREA_UNIT"			javaType="String"	jdbcType="smallint" />
		<result property="bedWidth"			column="BED_WIDTH"			javaType="String"	jdbcType="smallint" />
		<result property="extraBedFlg"		column="EXTRA_BED_FLG"		javaType="String"	jdbcType="char" />
		<result property="extraBedWidth"	column="EXTRA_BED_WIDTH"	javaType="String"	jdbcType="smallint" />
		<result property="extraBedNum"		column="EXTRA_BED_NUM"		javaType="String"	jdbcType="smallint" />
		<result property="sofaBedFlg"		column="SOFA_BED_FLG"		javaType="String"	jdbcType="char" />
		<result property="sofaBedWidth"		column="SOFA_BED_WIDTH"		javaType="String"	jdbcType="smallint" />
		<result property="sofaBedNum"		column="SOFA_BED_NUM"		javaType="String"	jdbcType="smallint" />
		<result property="stackingBedFlg"	column="STACKING_BED_FLG"	javaType="String"	jdbcType="char" />
		<result property="stackingBedWidth"	column="STACKING_BED_WIDTH"	javaType="String"	jdbcType="smallint" />
		<result property="stackingBedNum"	column="STACKING_BED_NUM"	javaType="String"	jdbcType="smallint" />
		<result property="bathFlg"			column="BATH_FLG"			javaType="String"	jdbcType="char" />
		<result property="toiletFlg"		column="TOILET_FLG"			javaType="String"	jdbcType="char" />
		<result property="washletFlg"		column="WASHLET_FLG"		javaType="String"	jdbcType="char" />
		<result property="bathTowelFlg"		column="BATH_TOWEL_FLG"		javaType="String"	jdbcType="char" />
		<result property="dryerFlg"			column="DRYER_FLG"			javaType="String"	jdbcType="char" />
		<result property="yukataFlg"		column="YUKATA_FLG"			javaType="String"	jdbcType="char" />
		<result property="pajamasFlg"		column="PAJAMAS_FLG"		javaType="String"	jdbcType="char" />
		<result property="nightWearFlg"		column="NIGHT_WEAR_FLG"		javaType="String"	jdbcType="char" />
		<result property="washToolFlg"		column="WASH_TOOL_FLG"		javaType="String"	jdbcType="char" />
		<result property="shampooRinseFlg"	column="SHAMPOO_RINSE_FLG"	javaType="String"	jdbcType="char" />
		<result property="bathrobeFlg"		column="BATHROBE_FLG"		javaType="String"	jdbcType="char" />
		<result property="showerBoothFlg"	column="SHOWER_BOOTH_FLG"	javaType="String"	jdbcType="char" />
		<result property="salesPoint"		column="SALES_POINT"		javaType="String"	jdbcType="varchar" />
		<result property="bodySoapFlg"		column="BODY_SOAP_FLG"		javaType="String"	jdbcType="char" />
		<result property="combFlg"			column="COMB_FLG"			javaType="String"	jdbcType="char" />
		<result property="showerCapFlg"		column="SHOWER_CAP_FLG"		javaType="String"	jdbcType="char" />
		<result property="childBeddingFlg"	column="CHILD_BEDDING_FLG"	javaType="String"	jdbcType="char" />
		<result property="childBeddingCmt"	column="CHILD_BEDDING_CMT"	javaType="String"	jdbcType="varchar" />
		<result property="memo"				column="MEMO"				javaType="String"	jdbcType="varchar" />
		<result property="no1Linked"		column="NO1_LINKED"			javaType="Integer"	jdbcType="smallint"/>
	</resultMap>

	<sql id="DFM_subQuery_DFacilityVessel_AllColumns">
		 [FACILITY_CD]
		,[KIND_FLG]
		,[FACILITY_PATTERN]
		,[ROOM_TYPE]
		,[BUILDING_DIV]
		,[VIEW_CD]
		,[BUILDING_ROOM_NM]
		,[CAPACITY_FROM]
		,[CAPACITY_TO]
		,[FLOOR_ASSIGN]
		,[STYLE_DIV]
		,[AREA]
		,[AREA_UNIT]
		,[BED_WIDTH]
		,[EXTRA_BED_FLG]
		,[EXTRA_BED_WIDTH]
		,[EXTRA_BED_NUM]
		,[SOFA_BED_FLG]
		,[SOFA_BED_WIDTH]
		,[SOFA_BED_NUM]
		,[STACKING_BED_FLG]
		,[STACKING_BED_WIDTH]
		,[STACKING_BED_NUM]
		,[BATH_FLG]
		,[TOILET_FLG]
		,[WASHLET_FLG]
		,[BATH_TOWEL_FLG]
		,[DRYER_FLG]
		,[YUKATA_FLG]
		,[PAJAMAS_FLG]
		,[NIGHT_WEAR_FLG]
		,[WASH_TOOL_FLG]
		,[SHAMPOO_RINSE_FLG]
		,[BATHROBE_FLG]
		,[SHOWER_BOOTH_FLG]
		,[SALES_POINT]
		,[BODY_SOAP_FLG]
		,[COMB_FLG]
		,[SHOWER_CAP_FLG]
		,[CHILD_BEDDING_FLG]
		,[CHILD_BEDDING_CMT]
		,[MEMO]
	</sql>

	<select id="DFM_fetchDFacilityVesselHistoryList" resultMap="DFM_DFacilityVesselHistory_RM" parameterClass="DFacilityManageKey">
		SELECT
			<include refid="DFM_subQuery_DFacilityVessel_AllColumns"/>
			,[CAREER_NO]
			,ISNULL([NO1_LINKED], 0) AS [NO1_LINKED]
		FROM (
			SELECT
				 [TMP11].*
				,[TMP12].[NO1_LINKED]
			FROM (
				SELECT
					[D_FACILITY_VESSEL_HISTORY].*
				FROM
					[D_FACILITY_VESSEL_HISTORY]
				INNER JOIN
					[D_FACILITY_MANAGE]
				ON (
						[D_FACILITY_MANAGE].[FACILITY_CD]		= [D_FACILITY_VESSEL_HISTORY].[FACILITY_CD]
					AND [D_FACILITY_MANAGE].[KIND_FLG]			= [D_FACILITY_VESSEL_HISTORY].[KIND_FLG]
					AND [D_FACILITY_MANAGE].[FACILITY_SORTS]	= #facilitySorts#
					AND [D_FACILITY_MANAGE].[FACILITY_PATTERN]	= [D_FACILITY_VESSEL_HISTORY].[FACILITY_PATTERN]
					AND [D_FACILITY_MANAGE].[BODY_CAREER_NO]	= [D_FACILITY_VESSEL_HISTORY].[CAREER_NO]
				)
				WHERE
						[D_FACILITY_MANAGE].[FACILITY_CD]		= #facilityCd#
					AND [D_FACILITY_MANAGE].[KIND_FLG]			= #kindFlg#
					AND [D_FACILITY_MANAGE].[FACILITY_PATTERN]	= #facilityPattern#
					AND [D_FACILITY_MANAGE].[CAREER_NO]			= #careerNo#
			) [TMP11]

			LEFT JOIN (
				SELECT
					 [D_PLAN_ANS_FACILITY].[FACILITY_CD]
					,[D_PLAN_ANS_FACILITY].[KIND_FLG]
					,[D_PLAN_ANS_FACILITY].[FACILITY_PATTERN_NO3]	AS [FACILITY_PATTERN]
					,[D_NO1_JR_STOCK].[ROOM_TYPE]
					,COUNT(*)										AS [NO1_LINKED]

				FROM
					[D_PLAN_ANS_FACILITY]

				INNER JOIN
					[D_PLAN_ANS]
				ON (
						[D_PLAN_ANS].[PLAN_ANS_NO]	= [D_PLAN_ANS_FACILITY].[PLAN_ANS_NO]
					AND [D_PLAN_ANS].[NEW_FLG]		= '1'
					AND [D_PLAN_ANS].[DEL_FLG]		= '0'
				)

				INNER JOIN
					[D_NO1_JR_STOCK]
				ON (
						[D_NO1_JR_STOCK].[PLAN_ANS_NO]	= [D_PLAN_ANS].[PLAN_ANS_NO]
					AND [D_NO1_JR_STOCK].[CAREER_NO]	= [D_PLAN_ANS].[NO1_CAREER_NO]
					AND [D_NO1_JR_STOCK].[STOCK_DIV]	= 1
				)

				GROUP BY
					 [D_PLAN_ANS_FACILITY].[FACILITY_CD]
					,[D_PLAN_ANS_FACILITY].[KIND_FLG]
					,[D_PLAN_ANS_FACILITY].[FACILITY_PATTERN_NO3]
					,[D_NO1_JR_STOCK].[ROOM_TYPE]

			) [TMP12]
			ON (
					[TMP12].[FACILITY_CD]		= [TMP11].[FACILITY_CD]
				AND [TMP12].[KIND_FLG]			= [TMP11].[KIND_FLG]
				AND [TMP12].[FACILITY_PATTERN]	= [TMP11].[FACILITY_PATTERN]
				AND [TMP12].[ROOM_TYPE]			= [TMP11].[ROOM_TYPE]
			)

		) [TMP01]
	</select>

	<select id="DFM_fetchDFacilityVesselListByPlanAnsNo" resultMap="DFM_DFacilityVesselHistory_RM" parameterClass="DFacilityManageSearchData">
		SELECT
			<include refid="DFM_subQuery_DFacilityVessel_AllColumns"/>
			,NULL AS [CAREER_NO]
			,NULL AS [NO1_LINKED]
		FROM (
			SELECT
				[D_FACILITY_VESSEL].*
			FROM
				[D_FACILITY_VESSEL]
			INNER JOIN
				[D_PLAN_ANS_FACILITY] ON (
					[D_FACILITY_VESSEL].[FACILITY_CD]		= [D_PLAN_ANS_FACILITY].[FACILITY_CD]
				AND [D_FACILITY_VESSEL].[KIND_FLG]			= [D_PLAN_ANS_FACILITY].[KIND_FLG]
				AND [D_FACILITY_VESSEL].[FACILITY_PATTERN]	= [D_PLAN_ANS_FACILITY].[FACILITY_PATTERN_NO3]
			)
			WHERE
				[D_PLAN_ANS_FACILITY].[PLAN_ANS_NO]	= #planAnsNo#
		) TMP01
	</select>

	<select id="DFM_fetchDFacilityVesselListByPk" resultMap="DFM_DFacilityVesselHistory_RM" parameterClass="DFacilityManageSearchData">
		SELECT
			<include refid="DFM_subQuery_DFacilityVessel_AllColumns"/>
			,NULL AS [CAREER_NO]
			,NULL AS [NO1_LINKED]
		FROM (
			SELECT
				[D_FACILITY_VESSEL].*
			FROM
				[D_FACILITY_VESSEL]
			WHERE
					[D_FACILITY_VESSEL].[FACILITY_CD]		= #facilityCd#
				AND [D_FACILITY_VESSEL].[KIND_FLG]			= #kindFlg#
				AND [D_FACILITY_VESSEL].[FACILITY_PATTERN]	= #facilityPattern#
		) TMP01
	</select>

	<select id="DFM_fetchAFacilityVesselListByPk" resultMap="DFM_DFacilityVesselHistory_RM" parameterClass="DFacilityManageSearchData">
		SELECT
			<include refid="DFM_subQuery_DFacilityVessel_AllColumns"/>
			,NULL AS [CAREER_NO]
			,NULL AS [NO1_LINKED]
		FROM (
			SELECT
				[A_FACILITY_VESSEL].*
				,NULL			AS [VIEW_CD]
				,NULL			AS [BUILDING_DIV]
				,[BUILDING]		AS [BUILDING_ROOM_NM]
				,NULL			AS [BODY_SOAP_FLG]
				,NULL			AS [COMB_FLG]
				,NULL			AS [SHOWER_CAP_FLG]
				,NULL			AS [CHILD_BEDDING_FLG]
				,NULL			AS [CHILD_BEDDING_CMT]
				,NULL			AS [MEMO]
			FROM
				[A_FACILITY_VESSEL]
			WHERE
					[A_FACILITY_VESSEL].[FACILITY_CD]		= #facilityCd#
				AND [A_FACILITY_VESSEL].[KIND_FLG]			= #kindFlg#
				AND [A_FACILITY_VESSEL].[FACILITY_PATTERN]	= #facilityPattern#
		) TMP01
	</select>

	<insert id="DFM_insertDFacilityVesselHistory" parameterClass="DFacilityVesselHistory">
		INSERT INTO
			[D_FACILITY_VESSEL_HISTORY]
		(
			 [FACILITY_CD]
			,[KIND_FLG]
			,[FACILITY_PATTERN]
			,[ROOM_TYPE]
			,[CAREER_NO]
		<isNotEmpty property="buildingDiv">
			,[BUILDING_DIV]
		</isNotEmpty>
		<isNotEmpty property="viewCd">
			,[VIEW_CD]
		</isNotEmpty>
		<isNotEmpty property="buildingRoomNm">
			,[BUILDING_ROOM_NM]
		</isNotEmpty>
		<isNotEmpty property="capacityFrom">
			,[CAPACITY_FROM]
		</isNotEmpty>
		<isNotEmpty property="capacityTo">
			,[CAPACITY_TO]
		</isNotEmpty>
		<isNotEmpty property="floorAssign">
			,[FLOOR_ASSIGN]
		</isNotEmpty>
		<isNotEmpty property="styleDiv">
			,[STYLE_DIV]
		</isNotEmpty>
		<isNotEmpty property="area">
			,[AREA]
		</isNotEmpty>
		<isNotEmpty property="areaUnit">
			,[AREA_UNIT]
		</isNotEmpty>
		<isNotEmpty property="bedWidth">
			,[BED_WIDTH]
		</isNotEmpty>
		<isNotEmpty property="extraBedFlg">
			,[EXTRA_BED_FLG]
		</isNotEmpty>
		<isNotEmpty property="extraBedWidth">
			,[EXTRA_BED_WIDTH]
		</isNotEmpty>
		<isNotEmpty property="extraBedNum">
			,[EXTRA_BED_NUM]
		</isNotEmpty>
		<isNotEmpty property="sofaBedFlg">
			,[SOFA_BED_FLG]
		</isNotEmpty>
		<isNotEmpty property="sofaBedWidth">
			,[SOFA_BED_WIDTH]
		</isNotEmpty>
		<isNotEmpty property="sofaBedNum">
			,[SOFA_BED_NUM]
		</isNotEmpty>
		<isNotEmpty property="stackingBedFlg">
			,[STACKING_BED_FLG]
		</isNotEmpty>
		<isNotEmpty property="stackingBedWidth">
			,[STACKING_BED_WIDTH]
		</isNotEmpty>
		<isNotEmpty property="stackingBedNum">
			,[STACKING_BED_NUM]
		</isNotEmpty>
		<isNotEmpty property="bathFlg">
			,[BATH_FLG]
		</isNotEmpty>
		<isNotEmpty property="toiletFlg">
			,[TOILET_FLG]
		</isNotEmpty>
		<isNotEmpty property="washletFlg">
			,[WASHLET_FLG]
		</isNotEmpty>
		<isNotEmpty property="bathTowelFlg">
			,[BATH_TOWEL_FLG]
		</isNotEmpty>
		<isNotEmpty property="dryerFlg">
			,[DRYER_FLG]
		</isNotEmpty>
		<isNotEmpty property="yukataFlg">
			,[YUKATA_FLG]
		</isNotEmpty>
		<isNotEmpty property="pajamasFlg">
			,[PAJAMAS_FLG]
		</isNotEmpty>
		<isNotEmpty property="nightWearFlg">
			,[NIGHT_WEAR_FLG]
		</isNotEmpty>
		<isNotEmpty property="washToolFlg">
			,[WASH_TOOL_FLG]
		</isNotEmpty>
		<isNotEmpty property="shampooRinseFlg">
			,[SHAMPOO_RINSE_FLG]
		</isNotEmpty>
		<isNotEmpty property="bathrobeFlg">
			,[BATHROBE_FLG]
		</isNotEmpty>
		<isNotEmpty property="showerBoothFlg">
			,[SHOWER_BOOTH_FLG]
		</isNotEmpty>
		<isNotEmpty property="salesPoint">
			,[SALES_POINT]
		</isNotEmpty>
		<isNotEmpty property="bodySoapFlg">
			,[BODY_SOAP_FLG]
		</isNotEmpty>
		<isNotEmpty property="combFlg">
			,[COMB_FLG]
		</isNotEmpty>
		<isNotEmpty property="showerCapFlg">
			,[SHOWER_CAP_FLG]
		</isNotEmpty>
		<isNotEmpty property="childBeddingFlg">
			,[CHILD_BEDDING_FLG]
		</isNotEmpty>
		<isNotEmpty property="childBeddingCmt">
			,[CHILD_BEDDING_CMT]
		</isNotEmpty>
		<isNotEmpty property="memo">
			,[MEMO]
		</isNotEmpty>
		)
		VALUES
		(
			 #facilityCd#
			,#kindFlg#
			,#facilityPattern#
			,#roomType#
			,#careerNo#
		<isNotEmpty property="buildingDiv">
			,#buildingDiv#
		</isNotEmpty>
		<isNotEmpty property="viewCd">
			,#viewCd#
		</isNotEmpty>
		<isNotEmpty property="buildingRoomNm">
			,#buildingRoomNm#
		</isNotEmpty>
		<isNotEmpty property="capacityFrom">
			,#capacityFrom#
		</isNotEmpty>
		<isNotEmpty property="capacityTo">
			,#capacityTo#
		</isNotEmpty>
		<isNotEmpty property="floorAssign">
			,#floorAssign#
		</isNotEmpty>
		<isNotEmpty property="styleDiv">
			,#styleDiv#
		</isNotEmpty>
		<isNotEmpty property="area">
			,#area#
		</isNotEmpty>
		<isNotEmpty property="areaUnit">
			,#areaUnit#
		</isNotEmpty>
		<isNotEmpty property="bedWidth">
			,#bedWidth#
		</isNotEmpty>
		<isNotEmpty property="extraBedFlg">
			,#extraBedFlg#
		</isNotEmpty>
		<isNotEmpty property="extraBedWidth">
			,#extraBedWidth#
		</isNotEmpty>
		<isNotEmpty property="extraBedNum">
			,#extraBedNum#
		</isNotEmpty>
		<isNotEmpty property="sofaBedFlg">
			,#sofaBedFlg#
		</isNotEmpty>
		<isNotEmpty property="sofaBedWidth">
			,#sofaBedWidth#
		</isNotEmpty>
		<isNotEmpty property="sofaBedNum">
			,#sofaBedNum#
		</isNotEmpty>
		<isNotEmpty property="stackingBedFlg">
			,#stackingBedFlg#
		</isNotEmpty>
		<isNotEmpty property="stackingBedWidth">
			,#stackingBedWidth#
		</isNotEmpty>
		<isNotEmpty property="stackingBedNum">
			,#stackingBedNum#
		</isNotEmpty>
		<isNotEmpty property="bathFlg">
			,#bathFlg#
		</isNotEmpty>
		<isNotEmpty property="toiletFlg">
			,#toiletFlg#
		</isNotEmpty>
		<isNotEmpty property="washletFlg">
			,#washletFlg#
		</isNotEmpty>
		<isNotEmpty property="bathTowelFlg">
			,#bathTowelFlg#
		</isNotEmpty>
		<isNotEmpty property="dryerFlg">
			,#dryerFlg#
		</isNotEmpty>
		<isNotEmpty property="yukataFlg">
			,#yukataFlg#
		</isNotEmpty>
		<isNotEmpty property="pajamasFlg">
			,#pajamasFlg#
		</isNotEmpty>
		<isNotEmpty property="nightWearFlg">
			,#nightWearFlg#
		</isNotEmpty>
		<isNotEmpty property="washToolFlg">
			,#washToolFlg#
		</isNotEmpty>
		<isNotEmpty property="shampooRinseFlg">
			,#shampooRinseFlg#
		</isNotEmpty>
		<isNotEmpty property="bathrobeFlg">
			,#bathrobeFlg#
		</isNotEmpty>
		<isNotEmpty property="showerBoothFlg">
			,#showerBoothFlg#
		</isNotEmpty>
		<isNotEmpty property="salesPoint">
			,#salesPoint#
		</isNotEmpty>
		<isNotEmpty property="bodySoapFlg">
			,#bodySoapFlg#
		</isNotEmpty>
		<isNotEmpty property="combFlg">
			,#combFlg#
		</isNotEmpty>
		<isNotEmpty property="showerCapFlg">
			,#showerCapFlg#
		</isNotEmpty>
		<isNotEmpty property="childBeddingFlg">
			,#childBeddingFlg#
		</isNotEmpty>
		<isNotEmpty property="childBeddingCmt">
			,#childBeddingCmt#
		</isNotEmpty>
		<isNotEmpty property="memo">
			,#memo#
		</isNotEmpty>
		)
	</insert>

	<insert id="DFM_insertDFacilityVesselCopyFromHistory" parameterClass="DFacilityManageKey">
		INSERT INTO
			[D_FACILITY_VESSEL]
		(
			<include refid="DFM_subQuery_DFacilityVessel_AllColumns"/>
		)
		SELECT
			<include refid="DFM_subQuery_DFacilityVessel_AllColumns"/>
		FROM (
				SELECT
					[D_FACILITY_VESSEL_HISTORY].*
				FROM
					[D_FACILITY_VESSEL_HISTORY]
				INNER JOIN
					[D_FACILITY_MANAGE] ON (
							[D_FACILITY_MANAGE].[FACILITY_CD]		= [D_FACILITY_VESSEL_HISTORY].[FACILITY_CD]
						AND [D_FACILITY_MANAGE].[KIND_FLG]			= [D_FACILITY_VESSEL_HISTORY].[KIND_FLG]
						AND [D_FACILITY_MANAGE].[FACILITY_SORTS]	= #facilitySorts#
						AND [D_FACILITY_MANAGE].[FACILITY_PATTERN]	= [D_FACILITY_VESSEL_HISTORY].[FACILITY_PATTERN]
						AND [D_FACILITY_MANAGE].[BODY_CAREER_NO]	= [D_FACILITY_VESSEL_HISTORY].[CAREER_NO]
				)
				WHERE
						[D_FACILITY_MANAGE].[FACILITY_CD]		= #facilityCd#
					AND [D_FACILITY_MANAGE].[KIND_FLG]			= #kindFlg#
					AND [D_FACILITY_MANAGE].[FACILITY_PATTERN]	= #facilityPattern#
					AND [D_FACILITY_MANAGE].[CAREER_NO]			= #careerNo#
		) TMP01
	</insert>

	<delete id="DFM_deleteDFacilityVessel" parameterClass="DFacilityManageKey">
		DELETE FROM
			[D_FACILITY_VESSEL]
		WHERE
				[FACILITY_CD]		= #facilityCd#
			AND [KIND_FLG]			= #kindFlg#
			AND [FACILITY_PATTERN]	= #facilityPattern#
	</delete>



	<!-- ******************************************************************************************
	 *		[DP/RM]施設_風呂
	******************************************************************************************* -->

	<typeAlias alias="DFacilityBathHistory" type="jp.co.jreast.common.data.ddata.DFacilityBathHistory" />

	<resultMap id="DFM_DFacilityBathHistory_RM" class="DFacilityBathHistory">
		<result property="facilityCd"		column="FACILITY_CD"		javaType="String"	jdbcType="char" />
		<result property="kindFlg"			column="KIND_FLG"			javaType="String"	jdbcType="char" />
		<result property="facilityPattern"	column="FACILITY_PATTERN"	javaType="String"	jdbcType="char" />

		<result property="bathDiv"			column="BATH_DIV"			javaType="Integer"	jdbcType="smallint" />
		<result property="bathKind"			column="BATH_KIND"			javaType="Integer"	jdbcType="smallint" />

		<result property="bathFlg"			column="BATH_FLG"			javaType="String"	jdbcType="char" />
		<result property="naturalSpa"		column="NATURAL_SPA"		javaType="String"	jdbcType="smallint" />
		<result property="spaQuality"		column="SPA_QUALITY"		javaType="String"	jdbcType="varchar"/>
		<result property="spaTemp"			column="SPA_TEMP"			javaType="String"	jdbcType="numeric" />
		<result property="selfSpringFlg"	column="SELF_SPRING_FLG"	javaType="String"	jdbcType="char" />
		<result property="shareSpringFlg"	column="SHARE_SPRING_FLG"	javaType="String"	jdbcType="char" />
		<result property="shareSpringNm"	column="SHARE_SPRING_NM"	javaType="String"	jdbcType="varchar"/>
		<result property="otherSpringCmt"	column="OTHER_SPRING_CMT"	javaType="String"	jdbcType="varchar"/>
		<result property="pourStatus"		column="POUR_STATUS"		javaType="String"	jdbcType="smallint" />
		<result property="pourStatusCmt"	column="POUR_STATUS_CMT"	javaType="String"	jdbcType="varchar"/>
		<result property="spaFlowFlg"		column="SPA_FLOW_FLG"		javaType="String"	jdbcType="char" />
		<result property="recircleKindFlg"	column="RECIRCLE_KIND_FLG"	javaType="String"	jdbcType="char" />
		<result property="warmingFlg"		column="WARMING_FLG"		javaType="String"	jdbcType="char" />
		<result property="disinfectFlg"		column="DISINFECT_FLG"		javaType="String"	jdbcType="char" />
		<result property="waterControlFlg"	column="WATER_CONTROL_FLG"	javaType="String"	jdbcType="char" />
		<result property="colour"			column="COLOUR"				javaType="String"	jdbcType="smallint" />
		<result property="colourCmt"		column="COLOUR_CMT"			javaType="String"	jdbcType="varchar"/>
		<result property="effect"			column="EFFECT"				javaType="String"	jdbcType="varchar"/>
		<result property="maleSiteNum"		column="MALE_SITE_NUM"		javaType="String"	jdbcType="smallint" />
		<result property="maleSiteNm"		column="MALE_SITE_NM"		javaType="String"	jdbcType="varchar"/>
		<result property="maleTimeDiv"		column="MALE_TIME_DIV"		javaType="String"	jdbcType="smallint" />
		<result property="maleTimeFrom1"	column="MALE_TIME_FROM1"	javaType="String"	jdbcType="char" />
		<result property="maleTimeTo1"		column="MALE_TIME_TO1"		javaType="String"	jdbcType="char" />
		<result property="maleTimeFrom2"	column="MALE_TIME_FROM2"	javaType="String"	jdbcType="char" />
		<result property="maleTimeTo2"		column="MALE_TIME_TO2"		javaType="String"	jdbcType="char" />
		<result property="maleTimeFrom3"	column="MALE_TIME_FROM3"	javaType="String"	jdbcType="char" />
		<result property="maleTimeTo3"		column="MALE_TIME_TO3"		javaType="String"	jdbcType="char" />
		<result property="femaleSiteNum"	column="FEMALE_SITE_NUM"	javaType="String"	jdbcType="smallint" />
		<result property="femaleSiteNm"		column="FEMALE_SITE_NM"		javaType="String"	jdbcType="varchar"/>
		<result property="femaleTimeDiv"	column="FEMALE_TIME_DIV"	javaType="String"	jdbcType="smallint" />
		<result property="femaleTimeFrom1"	column="FEMALE_TIME_FROM1"	javaType="String"	jdbcType="char" />
		<result property="femaleTimeTo1"	column="FEMALE_TIME_TO1"	javaType="String"	jdbcType="char" />
		<result property="femaleTimeFrom2"	column="FEMALE_TIME_FROM2"	javaType="String"	jdbcType="char" />
		<result property="femaleTimeTo2"	column="FEMALE_TIME_TO2"	javaType="String"	jdbcType="char" />
		<result property="femaleTimeFrom3"	column="FEMALE_TIME_FROM3"	javaType="String"	jdbcType="char" />
		<result property="femaleTimeTo3"	column="FEMALE_TIME_TO3"	javaType="String"	jdbcType="char" />
		<result property="femaleOnlyFlg"	column="FEMALE_ONLY_FLG"	javaType="String"	jdbcType="char" />
		<result property="shiftFlg"			column="SHIFT_FLG"			javaType="String"	jdbcType="char" />
		<result property="rentalSiteNum"	column="RENTAL_SITE_NUM"	javaType="String"	jdbcType="smallint" />
		<result property="rentalPayFlg"		column="RENTAL_PAY_FLG"		javaType="String"	jdbcType="char" />
		<result property="rentalTime"		column="RENTAL_TIME"		javaType="String"	jdbcType="smallint" />
		<result property="rentalFees"		column="RENTAL_FEES"		javaType="String"	jdbcType="int" />
		<result property="rentalReserveDiv"	column="RENTAL_RESERVE_DIV"	javaType="String"	jdbcType="smallint" />
		<result property="rentalReserveFlg"	column="RENTAL_RESERVE_FLG"	javaType="String"	jdbcType="varchar"/>
		<result property="memo"				column="MEMO"				javaType="String"	jdbcType="varchar"/>

		<result property="careerNo"			column="CAREER_NO"			javaType="Integer"	jdbcType="smallint"/>
	</resultMap>

	<sql id="DFM_subQuery_DFacilityBath_AllColumns">
		 [FACILITY_CD]
		,[KIND_FLG]
		,[FACILITY_PATTERN]
		,[BATH_DIV]
		,[BATH_KIND]
		,[BATH_FLG]
		,[NATURAL_SPA]
		,[SPA_QUALITY]
		,[SPA_TEMP]
		,[SELF_SPRING_FLG]
		,[SHARE_SPRING_FLG]
		,[SHARE_SPRING_NM]
		,[OTHER_SPRING_CMT]
		,[POUR_STATUS]
		,[POUR_STATUS_CMT]
		,[SPA_FLOW_FLG]
		,[RECIRCLE_KIND_FLG]
		,[WARMING_FLG]
		,[DISINFECT_FLG]
		,[WATER_CONTROL_FLG]
		,[COLOUR]
		,[COLOUR_CMT]
		,[EFFECT]
		,[MALE_SITE_NUM]
		,[MALE_SITE_NM]
		,[MALE_TIME_DIV]
		,[MALE_TIME_FROM1]
		,[MALE_TIME_TO1]
		,[MALE_TIME_FROM2]
		,[MALE_TIME_TO2]
		,[MALE_TIME_FROM3]
		,[MALE_TIME_TO3]
		,[FEMALE_SITE_NUM]
		,[FEMALE_SITE_NM]
		,[FEMALE_TIME_DIV]
		,[FEMALE_TIME_FROM1]
		,[FEMALE_TIME_TO1]
		,[FEMALE_TIME_FROM2]
		,[FEMALE_TIME_TO2]
		,[FEMALE_TIME_FROM3]
		,[FEMALE_TIME_TO3]
		,[FEMALE_ONLY_FLG]
		,[SHIFT_FLG]
		,[RENTAL_SITE_NUM]
		,[RENTAL_PAY_FLG]
		,[RENTAL_TIME]
		,[RENTAL_FEES]
		,[RENTAL_RESERVE_DIV]
		,[RENTAL_RESERVE_FLG]
		,[MEMO]
	</sql>

	<select id="DFM_fetchDFacilityBathHistoryList" resultMap="DFM_DFacilityBathHistory_RM" parameterClass="DFacilityManageKey">
		SELECT
			<include refid="DFM_subQuery_DFacilityBath_AllColumns"/>
			,[CAREER_NO]
		FROM (
				SELECT
					[D_FACILITY_BATH_HISTORY].*
				FROM
					[D_FACILITY_BATH_HISTORY]
				INNER JOIN
					[D_FACILITY_MANAGE] ON (
							[D_FACILITY_MANAGE].[FACILITY_CD]		= [D_FACILITY_BATH_HISTORY].[FACILITY_CD]
						AND [D_FACILITY_MANAGE].[KIND_FLG]			= [D_FACILITY_BATH_HISTORY].[KIND_FLG]
						AND [D_FACILITY_MANAGE].[FACILITY_SORTS]	= #facilitySorts#
						AND [D_FACILITY_MANAGE].[FACILITY_PATTERN]	= [D_FACILITY_BATH_HISTORY].[FACILITY_PATTERN]
						AND [D_FACILITY_MANAGE].[BODY_CAREER_NO]	= [D_FACILITY_BATH_HISTORY].[CAREER_NO]
				)
				WHERE
						[D_FACILITY_MANAGE].[FACILITY_CD]		= #facilityCd#
					AND [D_FACILITY_MANAGE].[KIND_FLG]			= #kindFlg#
					AND [D_FACILITY_MANAGE].[FACILITY_PATTERN]	= #facilityPattern#
					AND [D_FACILITY_MANAGE].[CAREER_NO]			= #careerNo#
		) TMP01
	</select>

	<select id="DFM_fetchDFacilityBathListByPlanAnsNo" resultMap="DFM_DFacilityBathHistory_RM" parameterClass="DFacilityManageSearchData">
		SELECT
			<include refid="DFM_subQuery_DFacilityBath_AllColumns"/>
			,NULL AS [CAREER_NO]
		FROM (
			SELECT
				[D_FACILITY_BATH].*
			FROM
				[D_FACILITY_BATH]
			INNER JOIN
				[D_PLAN_ANS_FACILITY] ON (
					[D_FACILITY_BATH].[FACILITY_CD]			= [D_PLAN_ANS_FACILITY].[FACILITY_CD]
				AND [D_FACILITY_BATH].[KIND_FLG]			= [D_PLAN_ANS_FACILITY].[KIND_FLG]
				AND [D_FACILITY_BATH].[FACILITY_PATTERN]	= [D_PLAN_ANS_FACILITY].[FACILITY_PATTERN_NO5]
			)
			WHERE
				[D_PLAN_ANS_FACILITY].[PLAN_ANS_NO]	= #planAnsNo#
		) TMP01
	</select>

	<select id="DFM_fetchDFacilityBathListByPk" resultMap="DFM_DFacilityBathHistory_RM" parameterClass="DFacilityManageSearchData">
		SELECT
			<include refid="DFM_subQuery_DFacilityBath_AllColumns"/>
			,NULL AS [CAREER_NO]
		FROM (
			SELECT
				[D_FACILITY_BATH].*
			FROM
				[D_FACILITY_BATH]
			WHERE
					[D_FACILITY_BATH].[FACILITY_CD]			= #facilityCd#
				AND [D_FACILITY_BATH].[KIND_FLG]			= #kindFlg#
				AND [D_FACILITY_BATH].[FACILITY_PATTERN]	= #facilityPattern#
		) TMP01
	</select>

	<select id="DFM_fetchAFacilityBathListByPk" resultMap="DFM_DFacilityBathHistory_RM" parameterClass="DFacilityManageSearchData">
		SELECT
			<include refid="DFM_subQuery_DFacilityBath_AllColumns"/>
			,NULL AS [CAREER_NO]
		FROM (
			SELECT
				[A_FACILITY_BATH].*
				,NULL			AS [RENTAL_RESERVE_FLG]
				,NULL			AS [MEMO]
			FROM
				[A_FACILITY_BATH]
			WHERE
					[A_FACILITY_BATH].[FACILITY_CD]			= #facilityCd#
				AND [A_FACILITY_BATH].[KIND_FLG]			= #kindFlg#
				AND [A_FACILITY_BATH].[FACILITY_PATTERN]	= #facilityPattern#
		) TMP01
	</select>

	<insert id="DFM_insertDFacilityBathHistory" parameterClass="DFacilityBathHistory">
		INSERT INTO
			[D_FACILITY_BATH_HISTORY]
		(
			 [FACILITY_CD]
			,[KIND_FLG]
			,[FACILITY_PATTERN]
			,[BATH_DIV]
			,[BATH_KIND]
			,[CAREER_NO]
			,[BATH_FLG]
			<isNotEmpty property="naturalSpa">,[NATURAL_SPA]</isNotEmpty>
			,[SPA_QUALITY]
			<isNotEmpty property="spaTemp">,[SPA_TEMP]</isNotEmpty>
			,[SELF_SPRING_FLG]
			,[SHARE_SPRING_FLG]
			,[SHARE_SPRING_NM]
			,[OTHER_SPRING_CMT]
			<isNotEmpty property="pourStatus">,[POUR_STATUS]</isNotEmpty>
			,[POUR_STATUS_CMT]
			,[SPA_FLOW_FLG]
			,[RECIRCLE_KIND_FLG]
			,[WARMING_FLG]
			,[DISINFECT_FLG]
			,[WATER_CONTROL_FLG]
			<isNotEmpty property="colour">,[COLOUR]</isNotEmpty>
			,[COLOUR_CMT]
			,[EFFECT]
			<isNotEmpty property="maleSiteNum">,[MALE_SITE_NUM]</isNotEmpty>
			,[MALE_SITE_NM]
			<isNotEmpty property="maleTimeDiv">,[MALE_TIME_DIV]</isNotEmpty>
			,[MALE_TIME_FROM1]
			,[MALE_TIME_TO1]
			,[MALE_TIME_FROM2]
			,[MALE_TIME_TO2]
			,[MALE_TIME_FROM3]
			,[MALE_TIME_TO3]
			<isNotEmpty property="femaleSiteNum">,[FEMALE_SITE_NUM]</isNotEmpty>
			,[FEMALE_SITE_NM]
			<isNotEmpty property="femaleTimeDiv">,[FEMALE_TIME_DIV]</isNotEmpty>
			,[FEMALE_TIME_FROM1]
			,[FEMALE_TIME_TO1]
			,[FEMALE_TIME_FROM2]
			,[FEMALE_TIME_TO2]
			,[FEMALE_TIME_FROM3]
			,[FEMALE_TIME_TO3]
			,[FEMALE_ONLY_FLG]
			,[SHIFT_FLG]
			<isNotEmpty property="rentalSiteNum">,[RENTAL_SITE_NUM]</isNotEmpty>
			,[RENTAL_PAY_FLG]
			<isNotEmpty property="rentalTime">,[RENTAL_TIME]</isNotEmpty>
			<isNotEmpty property="rentalFees">,[RENTAL_FEES]</isNotEmpty>
			<isNotEmpty property="rentalReserveDiv">,[RENTAL_RESERVE_DIV]</isNotEmpty>
			,[RENTAL_RESERVE_FLG]
			,[MEMO]
		)
		VALUES
		(
			 #facilityCd#
			,#kindFlg#
			,#facilityPattern#
			,#bathDiv#
			,#bathKind#
			,#careerNo#
			,#bathFlg#
			<isNotEmpty property="naturalSpa">,#naturalSpa:smallint#</isNotEmpty>
			,#spaQuality#
			<isNotEmpty property="spaTemp">,#spaTemp:numeric#</isNotEmpty>
			,#selfSpringFlg#
			,#shareSpringFlg#
			,#shareSpringNm#
			,#otherSpringCmt#
			<isNotEmpty property="pourStatus">,#pourStatus:smallint#</isNotEmpty>
			,#pourStatusCmt#
			,#spaFlowFlg#
			,#recircleKindFlg#
			,#warmingFlg#
			,#disinfectFlg#
			,#waterControlFlg#
			<isNotEmpty property="colour">,#colour:smallint#</isNotEmpty>
			,#colourCmt#
			,#effect#
			<isNotEmpty property="maleSiteNum">,#maleSiteNum:smallint#</isNotEmpty>
			,#maleSiteNm#
			<isNotEmpty property="maleTimeDiv">,#maleTimeDiv:smallint#</isNotEmpty>
			,#maleTimeFrom1#
			,#maleTimeTo1#
			,#maleTimeFrom2#
			,#maleTimeTo2#
			,#maleTimeFrom3#
			,#maleTimeTo3#
			<isNotEmpty property="femaleSiteNum">,#femaleSiteNum:smallint#</isNotEmpty>
			,#femaleSiteNm#
			<isNotEmpty property="femaleTimeDiv">,#femaleTimeDiv:smallint#</isNotEmpty>
			,#femaleTimeFrom1#
			,#femaleTimeTo1#
			,#femaleTimeFrom2#
			,#femaleTimeTo2#
			,#femaleTimeFrom3#
			,#femaleTimeTo3#
			,#femaleOnlyFlg#
			,#shiftFlg#
			<isNotEmpty property="rentalSiteNum">,#rentalSiteNum:smallint#</isNotEmpty>
			,#rentalPayFlg#
			<isNotEmpty property="rentalTime">,#rentalTime:smallint#</isNotEmpty>
			<isNotEmpty property="rentalFees">,#rentalFees:int#</isNotEmpty>
			<isNotEmpty property="rentalReserveDiv">,#rentalReserveDiv:smallint#</isNotEmpty>
			,#rentalReserveFlg#
			,#memo#
		)
	</insert>

	<insert id="DFM_insertDFacilityBathCopyFromHistory" parameterClass="DFacilityManageKey">
		INSERT INTO
			[D_FACILITY_BATH]
		(
			<include refid="DFM_subQuery_DFacilityBath_AllColumns"/>
		)
		SELECT
			<include refid="DFM_subQuery_DFacilityBath_AllColumns"/>
		FROM (
				SELECT
					[D_FACILITY_BATH_HISTORY].*
				FROM
					[D_FACILITY_BATH_HISTORY]
				INNER JOIN
					[D_FACILITY_MANAGE] ON (
							[D_FACILITY_MANAGE].[FACILITY_CD]		= [D_FACILITY_BATH_HISTORY].[FACILITY_CD]
						AND [D_FACILITY_MANAGE].[KIND_FLG]			= [D_FACILITY_BATH_HISTORY].[KIND_FLG]
						AND [D_FACILITY_MANAGE].[FACILITY_SORTS]	= #facilitySorts#
						AND [D_FACILITY_MANAGE].[FACILITY_PATTERN]	= [D_FACILITY_BATH_HISTORY].[FACILITY_PATTERN]
						AND [D_FACILITY_MANAGE].[BODY_CAREER_NO]	= [D_FACILITY_BATH_HISTORY].[CAREER_NO]
				)
				WHERE
						[D_FACILITY_MANAGE].[FACILITY_CD]		= #facilityCd#
					AND [D_FACILITY_MANAGE].[KIND_FLG]			= #kindFlg#
					AND [D_FACILITY_MANAGE].[FACILITY_PATTERN]	= #facilityPattern#
					AND [D_FACILITY_MANAGE].[CAREER_NO]			= #careerNo#
		) TMP01
	</insert>

	<delete id="DFM_deleteDFacilityBath" parameterClass="DFacilityManageKey">
		DELETE FROM
			[D_FACILITY_BATH]
		WHERE
				[FACILITY_CD]		= #facilityCd#
			AND [KIND_FLG]			= #kindFlg#
			AND [FACILITY_PATTERN]	= #facilityPattern#
	</delete>



	<!-- ******************************************************************************************
	 *		[DP/RM]施設_設備
	******************************************************************************************* -->

	<typeAlias alias="DFacilityEquipmentHistory" type="jp.co.jreast.common.data.ddata.DFacilityEquipmentHistory" />

	<resultMap id="DFM_DFacilityEquipmentHistory_RM" class="DFacilityEquipmentHistory">
		<result property="facilityCd"			column="FACILITY_CD"			javaType="String"	jdbcType="char" />
		<result property="kindFlg"				column="KIND_FLG"				javaType="String"	jdbcType="char" />
		<result property="facilityPattern"		column="FACILITY_PATTERN"		javaType="String"	jdbcType="char" />

		<result property="equipmentKind"		column="EQUIPMENT_KIND"			javaType="Integer"	jdbcType="smallint" />

		<result property="equipmentFlg"			column="EQUIPMENT_FLG"			javaType="String"	jdbcType="char" />
		<result property="chargeFlg"			column="CHARGE_FLG"				javaType="String"	jdbcType="char" />
		<result property="useTime"				column="USE_TIME"				javaType="String"	jdbcType="smallint" />
		<result property="useFee"				column="USE_FEE"				javaType="String"	jdbcType="int" />
		<result property="facilityNum"			column="FACILITY_NUM"			javaType="String"	jdbcType="smallint" />
		<result property="usePeriod"			column="USE_PERIOD"				javaType="String"	jdbcType="varchar"/>
		<result property="newspaperServiceDiv"	column="NEWSPAPER_SERVICE_DIV"	javaType="String"	jdbcType="smallint" />
		<result property="parkAvailableNum"		column="PARK_AVAILABLE_NUM"		javaType="String"	jdbcType="smallint" />
		<result property="parkCharge"			column="PARK_CHARGE"			javaType="String"	jdbcType="int" />
		<result property="parkNote"				column="PARK_NOTE"				javaType="String"	jdbcType="varchar"/>
		<result property="storeBegin"			column="STORE_BEGIN"			javaType="String"	jdbcType="char" />
		<result property="storeEnd"				column="STORE_END"				javaType="String"	jdbcType="char" />
		<result property="trouserPressDiv"		column="TROUSER_PRESS_DIV"		javaType="String"	jdbcType="char" />
		<result property="trouserPressNote"		column="TROUSER_PRESS_NOTE"		javaType="String"	jdbcType="varchar"/>
		<result property="suicaFrontFlg"		column="SUICA_FRONT_FLG"		javaType="String"	jdbcType="char" />
		<result property="suicaFooddrinkFlg"	column="SUICA_FOODDRINK_FLG"	javaType="String"	jdbcType="char" />
		<result property="suicaFooddrinkNm"		column="SUICA_FOODDRINK_NM"		javaType="String"	jdbcType="varchar"/>
		<result property="suicaOtherFlg"		column="SUICA_OTHER_FLG"		javaType="String"	jdbcType="char" />
		<result property="suicaOtherNote"		column="SUICA_OTHER_NOTE"		javaType="String"	jdbcType="varchar"/>
		<result property="lanFlg"				column="LAN_FLG"				javaType="String"	jdbcType="char" />
		<result property="lanTime"				column="LAN_TIME"				javaType="String"	jdbcType="smallint" />
		<result property="lanFee"				column="LAN_FEE"				javaType="String"	jdbcType="int" />
		<result property="wifiFlg"				column="WIFI_FLG"				javaType="String"	jdbcType="char" />
		<result property="wifiTime"				column="WIFI_TIME"				javaType="String"	jdbcType="smallint" />
		<result property="wifiFee"				column="WIFI_FEE"				javaType="String"	jdbcType="int" />
		<result property="netNote"				column="NET_NOTE"				javaType="String"	jdbcType="varchar"/>
		<result property="storeNm1"				column="STORE_NM1"				javaType="String"	jdbcType="varchar"/>
		<result property="genre1"				column="GENRE1"					javaType="String"	jdbcType="char" />
		<result property="genreOthers1"			column="GENRE_OTHERS1"			javaType="String"	jdbcType="varchar"/>
		<result property="storeNm2"				column="STORE_NM2"				javaType="String"	jdbcType="varchar"/>
		<result property="genre2"				column="GENRE2"					javaType="String"	jdbcType="char" />
		<result property="genreOthers2"			column="GENRE_OTHERS2"			javaType="String"	jdbcType="varchar"/>
		<result property="storeNm3"				column="STORE_NM3"				javaType="String"	jdbcType="varchar"/>
		<result property="genre3"				column="GENRE3"					javaType="String"	jdbcType="char" />
		<result property="genreOthers3"			column="GENRE_OTHERS3"			javaType="String"	jdbcType="varchar"/>
		<result property="storeNm4"				column="STORE_NM4"				javaType="String"	jdbcType="varchar"/>
		<result property="genre4"				column="GENRE4"					javaType="String"	jdbcType="char" />
		<result property="genreOthers4"			column="GENRE_OTHERS4"			javaType="String"	jdbcType="varchar"/>
		<result property="storeNm5"				column="STORE_NM5"				javaType="String"	jdbcType="varchar"/>
		<result property="genre5"				column="GENRE5"					javaType="String"	jdbcType="char" />
		<result property="genreOthers5"			column="GENRE_OTHERS5"			javaType="String"	jdbcType="varchar"/>

		<result property="careerNo"				column="CAREER_NO"				javaType="Integer"	jdbcType="smallint"/>
	</resultMap>

	<sql id="DFM_subQuery_DFacilityEquipment_AllColumns">
		 [FACILITY_CD]
		,[KIND_FLG]
		,[FACILITY_PATTERN]
		,[EQUIPMENT_KIND]
		,[EQUIPMENT_FLG]
		,[CHARGE_FLG]
		,[USE_TIME]
		,[USE_FEE]
		,[FACILITY_NUM]
		,[USE_PERIOD]
		,[NEWSPAPER_SERVICE_DIV]
		,[PARK_AVAILABLE_NUM]
		,[PARK_CHARGE]
		,[PARK_NOTE]
		,[STORE_BEGIN]
		,[STORE_END]
		,[TROUSER_PRESS_DIV]
		,[TROUSER_PRESS_NOTE]
		,[SUICA_FRONT_FLG]
		,[SUICA_FOODDRINK_FLG]
		,[SUICA_FOODDRINK_NM]
		,[SUICA_OTHER_FLG]
		,[SUICA_OTHER_NOTE]
		,[LAN_FLG]
		,[LAN_TIME]
		,[LAN_FEE]
		,[WIFI_FLG]
		,[WIFI_TIME]
		,[WIFI_FEE]
		,[NET_NOTE]
		,[STORE_NM1]
		,[GENRE1]
		,[GENRE_OTHERS1]
		,[STORE_NM2]
		,[GENRE2]
		,[GENRE_OTHERS2]
		,[STORE_NM3]
		,[GENRE3]
		,[GENRE_OTHERS3]
		,[STORE_NM4]
		,[GENRE4]
		,[GENRE_OTHERS4]
		,[STORE_NM5]
		,[GENRE5]
		,[GENRE_OTHERS5]
	</sql>

	<select id="DFM_fetchDFacilityEquipmentHistoryList" resultMap="DFM_DFacilityEquipmentHistory_RM" parameterClass="DFacilityManageKey">
		SELECT
			<include refid="DFM_subQuery_DFacilityEquipment_AllColumns"/>
			,[CAREER_NO]
		FROM (
				SELECT
					[D_FACILITY_EQUIPMENT_HISTORY].*
				FROM
					[D_FACILITY_EQUIPMENT_HISTORY]
				INNER JOIN
					[D_FACILITY_MANAGE] ON (
							[D_FACILITY_MANAGE].[FACILITY_CD]		= [D_FACILITY_EQUIPMENT_HISTORY].[FACILITY_CD]
						AND [D_FACILITY_MANAGE].[KIND_FLG]			= [D_FACILITY_EQUIPMENT_HISTORY].[KIND_FLG]
						AND [D_FACILITY_MANAGE].[FACILITY_SORTS]	= #facilitySorts#
						AND [D_FACILITY_MANAGE].[FACILITY_PATTERN]	= [D_FACILITY_EQUIPMENT_HISTORY].[FACILITY_PATTERN]
						AND [D_FACILITY_MANAGE].[BODY_CAREER_NO]	= [D_FACILITY_EQUIPMENT_HISTORY].[CAREER_NO]
				)
				WHERE
						[D_FACILITY_MANAGE].[FACILITY_CD]		= #facilityCd#
					AND [D_FACILITY_MANAGE].[KIND_FLG]			= #kindFlg#
					AND [D_FACILITY_MANAGE].[FACILITY_PATTERN]	= #facilityPattern#
					AND [D_FACILITY_MANAGE].[CAREER_NO]			= #careerNo#
		) TMP01
	</select>

	<select id="DFM_fetchDFacilityEquipmentListByPlanAnsNo" resultMap="DFM_DFacilityEquipmentHistory_RM" parameterClass="DFacilityManageSearchData">
		SELECT
			<include refid="DFM_subQuery_DFacilityEquipment_AllColumns"/>
			,NULL AS [CAREER_NO]
		FROM (
			SELECT
				[D_FACILITY_EQUIPMENT].*
			FROM
				[D_FACILITY_EQUIPMENT]
			INNER JOIN
				[D_PLAN_ANS_FACILITY] ON (
					[D_FACILITY_EQUIPMENT].[FACILITY_CD]		= [D_PLAN_ANS_FACILITY].[FACILITY_CD]
				AND [D_FACILITY_EQUIPMENT].[KIND_FLG]			= [D_PLAN_ANS_FACILITY].[KIND_FLG]
				AND [D_FACILITY_EQUIPMENT].[FACILITY_PATTERN]	= [D_PLAN_ANS_FACILITY].[FACILITY_PATTERN_NO5]
			)
			WHERE
				[D_PLAN_ANS_FACILITY].[PLAN_ANS_NO]	= #planAnsNo#
		) TMP01
	</select>

	<select id="DFM_fetchDFacilityEquipmentListByPk" resultMap="DFM_DFacilityEquipmentHistory_RM" parameterClass="DFacilityManageSearchData">
		SELECT
			<include refid="DFM_subQuery_DFacilityEquipment_AllColumns"/>
			,NULL AS [CAREER_NO]
		FROM (
			SELECT
				[D_FACILITY_EQUIPMENT].*
			FROM
				[D_FACILITY_EQUIPMENT]
			WHERE
					[D_FACILITY_EQUIPMENT].[FACILITY_CD]		= #facilityCd#
				AND [D_FACILITY_EQUIPMENT].[KIND_FLG]			= #kindFlg#
				AND [D_FACILITY_EQUIPMENT].[FACILITY_PATTERN]	= #facilityPattern#
		) TMP01
	</select>

	<select id="DFM_fetchAFacilityEquipmentListByPk" resultMap="DFM_DFacilityEquipmentHistory_RM" parameterClass="DFacilityManageSearchData">
		SELECT
			<include refid="DFM_subQuery_DFacilityEquipment_AllColumns"/>
			,NULL AS [CAREER_NO]
		FROM (
			SELECT
				[A_FACILITY_EQUIPMENT].*
				,NULL			AS [USE_PERIOD]
				,NULL			AS [TROUSER_PRESS_DIV]
				,NULL			AS [LAN_FLG]
				,NULL			AS [LAN_TIME]
				,NULL			AS [LAN_FEE]
				,NULL			AS [WIFI_FLG]
				,NULL			AS [WIFI_TIME]
				,NULL			AS [WIFI_FEE]
				,NULL			AS [STORE_NM1]
				,NULL			AS [GENRE1]
				,NULL			AS [GENRE_OTHERS1]
				,NULL			AS [STORE_NM2]
				,NULL			AS [GENRE2]
				,NULL			AS [GENRE_OTHERS2]
				,NULL			AS [STORE_NM3]
				,NULL			AS [GENRE3]
				,NULL			AS [GENRE_OTHERS3]
				,NULL			AS [STORE_NM4]
				,NULL			AS [GENRE4]
				,NULL			AS [GENRE_OTHERS4]
				,NULL			AS [STORE_NM5]
				,NULL			AS [GENRE5]
				,NULL			AS [GENRE_OTHERS5]
			FROM
				[A_FACILITY_EQUIPMENT]
			WHERE
					[A_FACILITY_EQUIPMENT].[FACILITY_CD]		= #facilityCd#
				AND [A_FACILITY_EQUIPMENT].[KIND_FLG]			= #kindFlg#
				AND [A_FACILITY_EQUIPMENT].[FACILITY_PATTERN]	= #facilityPattern#
		) TMP01
	</select>

	<insert id="DFM_insertDFacilityEquipmentHistory" parameterClass="DFacilityEquipmentHistory">
		INSERT INTO
			[D_FACILITY_EQUIPMENT_HISTORY]
		(
			 [FACILITY_CD]
			,[KIND_FLG]
			,[FACILITY_PATTERN]
			,[EQUIPMENT_KIND]
			,[CAREER_NO]
			,[EQUIPMENT_FLG]
			,[CHARGE_FLG]
			<isNotEmpty property="useTime">,[USE_TIME]</isNotEmpty>
			<isNotEmpty property="useFee">,[USE_FEE]</isNotEmpty>
			<isNotEmpty property="facilityNum">,[FACILITY_NUM]</isNotEmpty>
			,[USE_PERIOD]
			<isNotEmpty property="newspaperServiceDiv">,[NEWSPAPER_SERVICE_DIV]</isNotEmpty>
			<isNotEmpty property="parkAvailableNum">,[PARK_AVAILABLE_NUM]</isNotEmpty>
			<isNotEmpty property="parkCharge">,[PARK_CHARGE]</isNotEmpty>
			,[PARK_NOTE]
			,[STORE_BEGIN]
			,[STORE_END]
			,[TROUSER_PRESS_DIV]
			,[TROUSER_PRESS_NOTE]
			,[SUICA_FRONT_FLG]
			,[SUICA_FOODDRINK_FLG]
			,[SUICA_FOODDRINK_NM]
			,[SUICA_OTHER_FLG]
			,[SUICA_OTHER_NOTE]
			,[LAN_FLG]
			<isNotEmpty property="lanTime">,[LAN_TIME]</isNotEmpty>
			<isNotEmpty property="lanFee">,[LAN_FEE]</isNotEmpty>
			,[WIFI_FLG]
			<isNotEmpty property="wifiTime">,[WIFI_TIME]</isNotEmpty>
			<isNotEmpty property="wifiFee">,[WIFI_FEE]</isNotEmpty>
			,[NET_NOTE]
			,[STORE_NM1]
			,[GENRE1]
			,[GENRE_OTHERS1]
			,[STORE_NM2]
			,[GENRE2]
			,[GENRE_OTHERS2]
			,[STORE_NM3]
			,[GENRE3]
			,[GENRE_OTHERS3]
			,[STORE_NM4]
			,[GENRE4]
			,[GENRE_OTHERS4]
			,[STORE_NM5]
			,[GENRE5]
			,[GENRE_OTHERS5]
		)
		VALUES
		(
			 #facilityCd#
			,#kindFlg#
			,#facilityPattern#
			,#equipmentKind#
			,#careerNo#
			,#equipmentFlg#
			,#chargeFlg#
			<isNotEmpty property="useTime">,#useTime:smallint#</isNotEmpty>
			<isNotEmpty property="useFee">,#useFee:int#</isNotEmpty>
			<isNotEmpty property="facilityNum">,#facilityNum:smallint#</isNotEmpty>
			,#usePeriod#
			<isNotEmpty property="newspaperServiceDiv">,#newspaperServiceDiv:smallint#</isNotEmpty>
			<isNotEmpty property="parkAvailableNum">,#parkAvailableNum:smallint#</isNotEmpty>
			<isNotEmpty property="parkCharge">,#parkCharge:int#</isNotEmpty>
			,#parkNote#
			,#storeBegin#
			,#storeEnd#
			,#trouserPressDiv#
			,#trouserPressNote#
			,#suicaFrontFlg#
			,#suicaFooddrinkFlg#
			,#suicaFooddrinkNm#
			,#suicaOtherFlg#
			,#suicaOtherNote#
			,#lanFlg#
			<isNotEmpty property="lanTime">,#lanTime:smallint#</isNotEmpty>
			<isNotEmpty property="lanFee">,#lanFee:int#</isNotEmpty>
			,#wifiFlg#
			<isNotEmpty property="wifiTime">,#wifiTime:smallint#</isNotEmpty>
			<isNotEmpty property="wifiFee">,#wifiFee:int#</isNotEmpty>
			,#netNote#
			,#storeNm1#
			,#genre1#
			,#genreOthers1#
			,#storeNm2#
			,#genre2#
			,#genreOthers2#
			,#storeNm3#
			,#genre3#
			,#genreOthers3#
			,#storeNm4#
			,#genre4#
			,#genreOthers4#
			,#storeNm5#
			,#genre5#
			,#genreOthers5#
		)
	</insert>

	<insert id="DFM_insertDFacilityEquipmentCopyFromHistory" parameterClass="DFacilityManageKey">
		INSERT INTO
			[D_FACILITY_EQUIPMENT]
		(
			<include refid="DFM_subQuery_DFacilityEquipment_AllColumns"/>
		)
		SELECT
			<include refid="DFM_subQuery_DFacilityEquipment_AllColumns"/>
		FROM (
				SELECT
					[D_FACILITY_EQUIPMENT_HISTORY].*
				FROM
					[D_FACILITY_EQUIPMENT_HISTORY]
				INNER JOIN
					[D_FACILITY_MANAGE] ON (
							[D_FACILITY_MANAGE].[FACILITY_CD]		= [D_FACILITY_EQUIPMENT_HISTORY].[FACILITY_CD]
						AND [D_FACILITY_MANAGE].[KIND_FLG]			= [D_FACILITY_EQUIPMENT_HISTORY].[KIND_FLG]
						AND [D_FACILITY_MANAGE].[FACILITY_SORTS]	= #facilitySorts#
						AND [D_FACILITY_MANAGE].[FACILITY_PATTERN]	= [D_FACILITY_EQUIPMENT_HISTORY].[FACILITY_PATTERN]
						AND [D_FACILITY_MANAGE].[BODY_CAREER_NO]	= [D_FACILITY_EQUIPMENT_HISTORY].[CAREER_NO]
				)
				WHERE
						[D_FACILITY_MANAGE].[FACILITY_CD]		= #facilityCd#
					AND [D_FACILITY_MANAGE].[KIND_FLG]			= #kindFlg#
					AND [D_FACILITY_MANAGE].[FACILITY_PATTERN]	= #facilityPattern#
					AND [D_FACILITY_MANAGE].[CAREER_NO]			= #careerNo#
		) TMP01
	</insert>

	<delete id="DFM_deleteDFacilityEquipment" parameterClass="DFacilityManageKey">
		DELETE FROM
			[D_FACILITY_EQUIPMENT]
		WHERE
				[FACILITY_CD]		= #facilityCd#
			AND [KIND_FLG]			= #kindFlg#
			AND [FACILITY_PATTERN]	= #facilityPattern#
	</delete>



	<!-- ******************************************************************************************
	 *		[DP/RM]施設_一般情報
	******************************************************************************************* -->

	<typeAlias alias="DFacilityGeneralInfoHistory" type="jp.co.jreast.common.data.ddata.DFacilityGeneralInfoHistory" />

	<resultMap id="DFM_DFacilityGeneralInfoHistory_RM" class="DFacilityGeneralInfoHistory">
		<result property="facilityCd"				column="FACILITY_CD"				javaType="String"	jdbcType="char" />
		<result property="kindFlg"					column="KIND_FLG"					javaType="String"	jdbcType="char" />
		<result property="facilityPattern"			column="FACILITY_PATTERN"			javaType="String"	jdbcType="char" />

		<result property="salesPoint"				column="SALES_POINT"				javaType="String"	jdbcType="varchar"/>
		<result property="childFreeFlg"				column="CHILD_FREE_FLG"				javaType="String"	jdbcType="char" />
		<result property="childMealFreeFlg"			column="CHILD_MEAL_FREE_FLG"		javaType="String"	jdbcType="char" />
		<result property="childBeddingFreeFlg"		column="CHILD_BEDDING_FREE_FLG"		javaType="String"	jdbcType="char" />
		<result property="childFreeAgeFrom"			column="CHILD_FREE_AGE_FROM"		javaType="String"	jdbcType="smallint" />
		<result property="childFreeAgeTo"			column="CHILD_FREE_AGE_TO"			javaType="String"	jdbcType="smallint" />
		<result property="childFreeCond"			column="CHILD_FREE_COND"			javaType="String"	jdbcType="varchar"/>
		<result property="childPayAgeFrom"			column="CHILD_PAY_AGE_FROM"			javaType="String"	jdbcType="smallint" />
		<result property="childPayAgeTo"			column="CHILD_PAY_AGE_TO"			javaType="String"	jdbcType="smallint" />
		<result property="childPayCond"				column="CHILD_PAY_COND"				javaType="String"	jdbcType="varchar"/>
		<result property="childFees"				column="CHILD_FEES"					javaType="String"	jdbcType="int" />
		<result property="childFeesCmt"				column="CHILD_FEES_CMT"				javaType="String"	jdbcType="varchar"/>
		<result property="customerFlg"				column="CUSTOMER_FLG"				javaType="String"	jdbcType="char" />
		<result property="customerFamily"			column="CUSTOMER_FAMILY"			javaType="String"	jdbcType="char" />
		<result property="customerCouple"			column="CUSTOMER_COUPLE"			javaType="String"	jdbcType="char" />
		<result property="customerMiddle"			column="CUSTOMER_MIDDLE"			javaType="String"	jdbcType="char" />
		<result property="customerOther"			column="CUSTOMER_OTHER"				javaType="String"	jdbcType="char" />
		<result property="suggestionCmt"			column="SUGGESTION_CMT"				javaType="String"	jdbcType="varchar"/>
		<result property="massagerFlg"				column="MASSAGER_FLG"				javaType="String"	jdbcType="char" />
		<result property="massagerNum"				column="MASSAGER_NUM"				javaType="String"	jdbcType="smallint" />
		<result property="massagerLocation"			column="MASSAGER_LOCATION"			javaType="String"	jdbcType="varchar"/>
		<result property="massagerPayFlg"			column="MASSAGER_PAY_FLG"			javaType="String"	jdbcType="char" />
		<result property="massagerUseTime"			column="MASSAGER_USE_TIME"			javaType="String"	jdbcType="smallint" />
		<result property="massagerUseAmt"			column="MASSAGER_USE_AMT"			javaType="String"	jdbcType="int" />
		<result property="wheelchairFlg"			column="WHEELCHAIR_FLG"				javaType="String"	jdbcType="char" />
		<result property="wheelchairNum"			column="WHEELCHAIR_NUM"				javaType="String"	jdbcType="smallint" />
		<result property="elevatorFlg"				column="ELEVATOR_FLG"				javaType="String"	jdbcType="char" />
		<result property="roomPetFlg"				column="ROOM_PET_FLG"				javaType="String"	jdbcType="char" />
		<result property="roomPetCond"				column="ROOM_PET_COND"				javaType="String"	jdbcType="varchar"/>
		<result property="roomGuideDogFlg"			column="ROOM_GUIDE_DOG_FLG"			javaType="String"	jdbcType="char" />
		<result property="signLangFrontFlg"			column="SIGN_LANG_FRONT_FLG"		javaType="String"	jdbcType="char" />
		<result property="signLangAllDiv"			column="SIGN_LANG_ALL_DIV"			javaType="String"	jdbcType="smallint" />
		<result property="signLangTimeDiv"			column="SIGN_LANG_TIME_DIV"			javaType="String"	jdbcType="smallint" />
		<result property="signLangBegin"			column="SIGN_LANG_BEGIN"			javaType="String"	jdbcType="char" />
		<result property="signLangEnd"				column="SIGN_LANG_END"				javaType="String"	jdbcType="char" />
		<result property="engFrontFlg"				column="ENG_FRONT_FLG"				javaType="String"	jdbcType="char" />
		<result property="engAllDiv"				column="ENG_ALL_DIV"				javaType="String"	jdbcType="smallint" />
		<result property="engTimeDiv"				column="ENG_TIME_DIV"				javaType="String"	jdbcType="smallint" />
		<result property="engTimeBegin"				column="ENG_TIME_BEGIN"				javaType="String"	jdbcType="char" />
		<result property="engTimeEnd"				column="ENG_TIME_END"				javaType="String"	jdbcType="char" />
		<result property="creditCardFlg"			column="CREDIT_CARD_FLG"			javaType="String"	jdbcType="char" />
		<result property="creditCardBrandVisa"		column="CREDIT_CARD_BRAND_VISA"		javaType="String"	jdbcType="char" />
		<result property="creditCardBrandJcb"		column="CREDIT_CARD_BRAND_JCB"		javaType="String"	jdbcType="char" />
		<result property="creditCardBrandUc"		column="CREDIT_CARD_BRAND_UC"		javaType="String"	jdbcType="char" />
		<result property="creditCardBrandDc"		column="CREDIT_CARD_BRAND_DC"		javaType="String"	jdbcType="char" />
		<result property="creditCardBrandMc"		column="CREDIT_CARD_BRAND_MC"		javaType="String"	jdbcType="char" />
		<result property="creditCardBrandAmex"		column="CREDIT_CARD_BRAND_AMEX"		javaType="String"	jdbcType="char" />
		<result property="creditCardBrandDiners"	column="CREDIT_CARD_BRAND_DINERS"	javaType="String"	jdbcType="char" />
		<result property="creditCardBrandNicos"		column="CREDIT_CARD_BRAND_NICOS"	javaType="String"	jdbcType="char" />
		<result property="creditCardBrandJaccs"		column="CREDIT_CARD_BRAND_JACCS"	javaType="String"	jdbcType="char" />
		<result property="creditCardBrandOther"		column="CREDIT_CARD_BRAND_OTHER"	javaType="String"	jdbcType="char" />
		<result property="creditCardOthers"			column="CREDIT_CARD_OTHERS"			javaType="String"	jdbcType="varchar"/>
		<result property="keepBaggageFlg"			column="KEEP_BAGGAGE_FLG"			javaType="String"	jdbcType="char" />
		<result property="buildingYearsFlg"			column="BUILDING_YEARS_FLG"			javaType="String"	jdbcType="char" />
		<result property="mainBuildingYears"		column="MAIN_BUILDING_YEARS"		javaType="String"	jdbcType="smallint" />
		<result property="annexYears"				column="ANNEX_YEARS"				javaType="String"	jdbcType="smallint" />
		<result property="newBuildingYears"			column="NEW_BUILDING_YEARS"			javaType="String"	jdbcType="smallint" />
		<result property="othersCmt"				column="OTHERS_CMT"					javaType="String"	jdbcType="varchar"/>
		<result property="totalRoomFlg"				column="TOTAL_ROOM_FLG"				javaType="String"	jdbcType="char" />
		<result property="totalRoomNum"				column="TOTAL_ROOM_NUM"				javaType="String"	jdbcType="smallint" />
		<result property="memo"						column="MEMO"						javaType="String"	jdbcType="varchar"/>

		<result property="careerNo"					column="CAREER_NO"					javaType="Integer"	jdbcType="smallint"/>
	</resultMap>

	<sql id="DFM_subQuery_DFacilityGeneralInfo_AllColumns">
		 [FACILITY_CD]
		,[KIND_FLG]
		,[FACILITY_PATTERN]
		,[SALES_POINT]
		,[CHILD_FREE_FLG]
		,[CHILD_MEAL_FREE_FLG]
		,[CHILD_BEDDING_FREE_FLG]
		,[CHILD_FREE_AGE_FROM]
		,[CHILD_FREE_AGE_TO]
		,[CHILD_FREE_COND]
		,[CHILD_PAY_AGE_FROM]
		,[CHILD_PAY_AGE_TO]
		,[CHILD_PAY_COND]
		,[CHILD_FEES]
		,[CHILD_FEES_CMT]
		,[CUSTOMER_FLG]
		,[CUSTOMER_FAMILY]
		,[CUSTOMER_COUPLE]
		,[CUSTOMER_MIDDLE]
		,[CUSTOMER_OTHER]
		,[SUGGESTION_CMT]
		,[MASSAGER_FLG]
		,[MASSAGER_NUM]
		,[MASSAGER_LOCATION]
		,[MASSAGER_PAY_FLG]
		,[MASSAGER_USE_TIME]
		,[MASSAGER_USE_AMT]
		,[WHEELCHAIR_FLG]
		,[WHEELCHAIR_NUM]
		,[ELEVATOR_FLG]
		,[ROOM_PET_FLG]
		,[ROOM_PET_COND]
		,[ROOM_GUIDE_DOG_FLG]
		,[SIGN_LANG_FRONT_FLG]
		,[SIGN_LANG_ALL_DIV]
		,[SIGN_LANG_TIME_DIV]
		,[SIGN_LANG_BEGIN]
		,[SIGN_LANG_END]
		,[ENG_FRONT_FLG]
		,[ENG_ALL_DIV]
		,[ENG_TIME_DIV]
		,[ENG_TIME_BEGIN]
		,[ENG_TIME_END]
		,[CREDIT_CARD_FLG]
		,[CREDIT_CARD_BRAND_VISA]
		,[CREDIT_CARD_BRAND_JCB]
		,[CREDIT_CARD_BRAND_UC]
		,[CREDIT_CARD_BRAND_DC]
		,[CREDIT_CARD_BRAND_MC]
		,[CREDIT_CARD_BRAND_AMEX]
		,[CREDIT_CARD_BRAND_DINERS]
		,[CREDIT_CARD_BRAND_NICOS]
		,[CREDIT_CARD_BRAND_JACCS]
		,[CREDIT_CARD_BRAND_OTHER]
		,[CREDIT_CARD_OTHERS]
		,[KEEP_BAGGAGE_FLG]
		,[BUILDING_YEARS_FLG]
		,[MAIN_BUILDING_YEARS]
		,[ANNEX_YEARS]
		,[NEW_BUILDING_YEARS]
		,[OTHERS_CMT]
		,[TOTAL_ROOM_FLG]
		,[TOTAL_ROOM_NUM]
		,[MEMO]
	</sql>

	<select id="DFM_fetchDFacilityGeneralInfoHistory" resultMap="DFM_DFacilityGeneralInfoHistory_RM" parameterClass="DFacilityManageKey">
		SELECT
			<include refid="DFM_subQuery_DFacilityGeneralInfo_AllColumns"/>
			,[CAREER_NO]
		FROM (
				SELECT
					[D_FACILITY_GENERAL_INFO_HISTORY].*
				FROM
					[D_FACILITY_GENERAL_INFO_HISTORY]
				INNER JOIN
					[D_FACILITY_MANAGE] ON (
							[D_FACILITY_MANAGE].[FACILITY_CD]		= [D_FACILITY_GENERAL_INFO_HISTORY].[FACILITY_CD]
						AND [D_FACILITY_MANAGE].[KIND_FLG]			= [D_FACILITY_GENERAL_INFO_HISTORY].[KIND_FLG]
						AND [D_FACILITY_MANAGE].[FACILITY_SORTS]	= #facilitySorts#
						AND [D_FACILITY_MANAGE].[FACILITY_PATTERN]	= [D_FACILITY_GENERAL_INFO_HISTORY].[FACILITY_PATTERN]
						AND [D_FACILITY_MANAGE].[BODY_CAREER_NO]	= [D_FACILITY_GENERAL_INFO_HISTORY].[CAREER_NO]
				)
				WHERE
						[D_FACILITY_MANAGE].[FACILITY_CD]		= #facilityCd#
					AND [D_FACILITY_MANAGE].[KIND_FLG]			= #kindFlg#
					AND [D_FACILITY_MANAGE].[FACILITY_PATTERN]	= #facilityPattern#
					AND [D_FACILITY_MANAGE].[CAREER_NO]			= #careerNo#
		) TMP01
	</select>

	<select id="DFM_fetchDFacilityGeneralInfoByPlanAnsNo" resultMap="DFM_DFacilityGeneralInfoHistory_RM" parameterClass="DFacilityManageSearchData">
		SELECT
			<include refid="DFM_subQuery_DFacilityGeneralInfo_AllColumns"/>
			,NULL AS [CAREER_NO]
		FROM (
			SELECT
				[D_FACILITY_GENERAL_INFO].*
			FROM
				[D_FACILITY_GENERAL_INFO]
			INNER JOIN
				[D_PLAN_ANS_FACILITY] ON (
					[D_FACILITY_GENERAL_INFO].[FACILITY_CD]			= [D_PLAN_ANS_FACILITY].[FACILITY_CD]
				AND [D_FACILITY_GENERAL_INFO].[KIND_FLG]			= [D_PLAN_ANS_FACILITY].[KIND_FLG]
				AND [D_FACILITY_GENERAL_INFO].[FACILITY_PATTERN]	= [D_PLAN_ANS_FACILITY].[FACILITY_PATTERN_NO5]
			)
			WHERE
				[D_PLAN_ANS_FACILITY].[PLAN_ANS_NO]	= #planAnsNo#
		) TMP01
	</select>

	<select id="DFM_fetchDFacilityGeneralInfoByPk" resultMap="DFM_DFacilityGeneralInfoHistory_RM" parameterClass="DFacilityManageSearchData">
		SELECT
			<include refid="DFM_subQuery_DFacilityGeneralInfo_AllColumns"/>
			,NULL AS [CAREER_NO]
		FROM (
			SELECT
				[D_FACILITY_GENERAL_INFO].*
			FROM
				[D_FACILITY_GENERAL_INFO]
			WHERE
					[D_FACILITY_GENERAL_INFO].[FACILITY_CD]			= #facilityCd#
				AND [D_FACILITY_GENERAL_INFO].[KIND_FLG]			= #kindFlg#
				AND [D_FACILITY_GENERAL_INFO].[FACILITY_PATTERN]	= #facilityPattern#
		) TMP01
	</select>

	<select id="DFM_fetchAFacilityGeneralInfoByPk" resultMap="DFM_DFacilityGeneralInfoHistory_RM" parameterClass="DFacilityManageSearchData">
		SELECT
			<include refid="DFM_subQuery_DFacilityGeneralInfo_AllColumns"/>
			,NULL AS [CAREER_NO]
		FROM (
			SELECT
				[A_FACILITY_GENERAL_INFO].*
				,NULL			AS [CHILD_MEAL_FREE_FLG]
				,NULL			AS [CHILD_BEDDING_FREE_FLG]
				,NULL			AS [CREDIT_CARD_FLG]
				,NULL			AS [CREDIT_CARD_BRAND_VISA]
				,NULL			AS [CREDIT_CARD_BRAND_JCB]
				,NULL			AS [CREDIT_CARD_BRAND_UC]
				,NULL			AS [CREDIT_CARD_BRAND_DC]
				,NULL			AS [CREDIT_CARD_BRAND_MC]
				,NULL			AS [CREDIT_CARD_BRAND_AMEX]
				,NULL			AS [CREDIT_CARD_BRAND_DINERS]
				,NULL			AS [CREDIT_CARD_BRAND_NICOS]
				,NULL			AS [CREDIT_CARD_BRAND_JACCS]
				,NULL			AS [CREDIT_CARD_BRAND_OTHER]
				,NULL			AS [CREDIT_CARD_OTHERS]
				,NULL			AS [KEEP_BAGGAGE_FLG]
			FROM
				[A_FACILITY_GENERAL_INFO]
			WHERE
					[A_FACILITY_GENERAL_INFO].[FACILITY_CD]			= #facilityCd#
				AND [A_FACILITY_GENERAL_INFO].[KIND_FLG]			= #kindFlg#
				AND [A_FACILITY_GENERAL_INFO].[FACILITY_PATTERN]	= #facilityPattern#
		) TMP01
	</select>

	<insert id="DFM_insertDFacilityGeneralInfoHistory" parameterClass="DFacilityGeneralInfoHistory">
		INSERT INTO
			[D_FACILITY_GENERAL_INFO_HISTORY]
		(
			 [FACILITY_CD]
			,[KIND_FLG]
			,[FACILITY_PATTERN]
			,[CAREER_NO]
			,[SALES_POINT]
			,[CHILD_FREE_FLG]
			,[CHILD_MEAL_FREE_FLG]
			,[CHILD_BEDDING_FREE_FLG]
			<isNotEmpty property="childFreeAgeFrom">,[CHILD_FREE_AGE_FROM]</isNotEmpty>
			<isNotEmpty property="childFreeAgeTo">,[CHILD_FREE_AGE_TO]</isNotEmpty>
			,[CHILD_FREE_COND]
			<isNotEmpty property="childPayAgeFrom">,[CHILD_PAY_AGE_FROM]</isNotEmpty>
			<isNotEmpty property="childPayAgeTo">,[CHILD_PAY_AGE_TO]</isNotEmpty>
			,[CHILD_PAY_COND]
			<isNotEmpty property="childFees">,[CHILD_FEES]</isNotEmpty>
			,[CHILD_FEES_CMT]
			,[CUSTOMER_FLG]
			,[CUSTOMER_FAMILY]
			,[CUSTOMER_COUPLE]
			,[CUSTOMER_MIDDLE]
			,[CUSTOMER_OTHER]
			,[SUGGESTION_CMT]
			,[MASSAGER_FLG]
			<isNotEmpty property="massagerNum">,[MASSAGER_NUM]</isNotEmpty>
			,[MASSAGER_LOCATION]
			,[MASSAGER_PAY_FLG]
			<isNotEmpty property="massagerUseTime">,[MASSAGER_USE_TIME]</isNotEmpty>
			<isNotEmpty property="massagerUseAmt">,[MASSAGER_USE_AMT]</isNotEmpty>
			,[WHEELCHAIR_FLG]
			<isNotEmpty property="wheelchairNum">,[WHEELCHAIR_NUM]</isNotEmpty>
			,[ELEVATOR_FLG]
			,[ROOM_PET_FLG]
			,[ROOM_PET_COND]
			,[ROOM_GUIDE_DOG_FLG]
			,[SIGN_LANG_FRONT_FLG]
			<isNotEmpty property="signLangAllDiv">,[SIGN_LANG_ALL_DIV]</isNotEmpty>
			<isNotEmpty property="signLangTimeDiv">,[SIGN_LANG_TIME_DIV]</isNotEmpty>
			,[SIGN_LANG_BEGIN]
			,[SIGN_LANG_END]
			,[ENG_FRONT_FLG]
			<isNotEmpty property="engAllDiv">,[ENG_ALL_DIV]</isNotEmpty>
			<isNotEmpty property="engTimeDiv">,[ENG_TIME_DIV]</isNotEmpty>
			,[ENG_TIME_BEGIN]
			,[ENG_TIME_END]
			,[CREDIT_CARD_FLG]
			,[CREDIT_CARD_BRAND_VISA]
			,[CREDIT_CARD_BRAND_JCB]
			,[CREDIT_CARD_BRAND_UC]
			,[CREDIT_CARD_BRAND_DC]
			,[CREDIT_CARD_BRAND_MC]
			,[CREDIT_CARD_BRAND_AMEX]
			,[CREDIT_CARD_BRAND_DINERS]
			,[CREDIT_CARD_BRAND_NICOS]
			,[CREDIT_CARD_BRAND_JACCS]
			,[CREDIT_CARD_BRAND_OTHER]
			,[CREDIT_CARD_OTHERS]
			,[KEEP_BAGGAGE_FLG]
			,[BUILDING_YEARS_FLG]
			<isNotEmpty property="mainBuildingYears">,[MAIN_BUILDING_YEARS]</isNotEmpty>
			<isNotEmpty property="annexYears">,[ANNEX_YEARS]</isNotEmpty>
			<isNotEmpty property="newBuildingYears">,[NEW_BUILDING_YEARS]</isNotEmpty>
			,[OTHERS_CMT]
			,[TOTAL_ROOM_FLG]
			<isNotEmpty property="totalRoomNum">,[TOTAL_ROOM_NUM]</isNotEmpty>
			,[MEMO]
		)
		VALUES
		(
			 #facilityCd#
			,#kindFlg#
			,#facilityPattern#
			,#careerNo#
			,#salesPoint#
			,#childFreeFlg#
			,#childMealFreeFlg#
			,#childBeddingFreeFlg#
			<isNotEmpty property="childFreeAgeFrom">,#childFreeAgeFrom:smallint#</isNotEmpty>
			<isNotEmpty property="childFreeAgeTo">,#childFreeAgeTo:smallint#</isNotEmpty>
			,#childFreeCond#
			<isNotEmpty property="childPayAgeFrom">,#childPayAgeFrom:smallint#</isNotEmpty>
			<isNotEmpty property="childPayAgeTo">,#childPayAgeTo:smallint#</isNotEmpty>
			,#childPayCond#
			<isNotEmpty property="childFees">,#childFees:int#</isNotEmpty>
			,#childFeesCmt#
			,#customerFlg#
			,#customerFamily#
			,#customerCouple#
			,#customerMiddle#
			,#customerOther#
			,#suggestionCmt#
			,#massagerFlg#
			<isNotEmpty property="massagerNum">,#massagerNum:smallint#</isNotEmpty>
			,#massagerLocation#
			,#massagerPayFlg#
			<isNotEmpty property="massagerUseTime">,#massagerUseTime:smallint#</isNotEmpty>
			<isNotEmpty property="massagerUseAmt">,#massagerUseAmt:int#</isNotEmpty>
			,#wheelchairFlg#
			<isNotEmpty property="wheelchairNum">,#wheelchairNum:smallint#</isNotEmpty>
			,#elevatorFlg#
			,#roomPetFlg#
			,#roomPetCond#
			,#roomGuideDogFlg#
			,#signLangFrontFlg#
			<isNotEmpty property="signLangAllDiv">,#signLangAllDiv:smallint#</isNotEmpty>
			<isNotEmpty property="signLangTimeDiv">,#signLangTimeDiv:smallint#</isNotEmpty>
			,#signLangBegin#
			,#signLangEnd#
			,#engFrontFlg#
			<isNotEmpty property="engAllDiv">,#engAllDiv:smallint#</isNotEmpty>
			<isNotEmpty property="engTimeDiv">,#engTimeDiv:smallint#</isNotEmpty>
			,#engTimeBegin#
			,#engTimeEnd#
			,#creditCardFlg#
			,#creditCardBrandVisa#
			,#creditCardBrandJcb#
			,#creditCardBrandUc#
			,#creditCardBrandDc#
			,#creditCardBrandMc#
			,#creditCardBrandAmex#
			,#creditCardBrandDiners#
			,#creditCardBrandNicos#
			,#creditCardBrandJaccs#
			,#creditCardBrandOther#
			,#creditCardOthers#
			,#keepBaggageFlg#
			,#buildingYearsFlg#
			<isNotEmpty property="mainBuildingYears">,#mainBuildingYears:smallint#</isNotEmpty>
			<isNotEmpty property="annexYears">,#annexYears:smallint#</isNotEmpty>
			<isNotEmpty property="newBuildingYears">,#newBuildingYears:smallint#</isNotEmpty>
			,#othersCmt#
			,#totalRoomFlg#
			<isNotEmpty property="totalRoomNum">,#totalRoomNum:smallint#</isNotEmpty>
			,#memo#
		)
	</insert>

	<insert id="DFM_insertDFacilityGeneralInfoCopyFromHistory" parameterClass="DFacilityManageKey">
		INSERT INTO
			[D_FACILITY_GENERAL_INFO]
		(
			<include refid="DFM_subQuery_DFacilityGeneralInfo_AllColumns"/>
		)
		SELECT
			<include refid="DFM_subQuery_DFacilityGeneralInfo_AllColumns"/>
		FROM (
				SELECT
					[D_FACILITY_GENERAL_INFO_HISTORY].*
				FROM
					[D_FACILITY_GENERAL_INFO_HISTORY]
				INNER JOIN
					[D_FACILITY_MANAGE] ON (
							[D_FACILITY_MANAGE].[FACILITY_CD]		= [D_FACILITY_GENERAL_INFO_HISTORY].[FACILITY_CD]
						AND [D_FACILITY_MANAGE].[KIND_FLG]			= [D_FACILITY_GENERAL_INFO_HISTORY].[KIND_FLG]
						AND [D_FACILITY_MANAGE].[FACILITY_SORTS]	= #facilitySorts#
						AND [D_FACILITY_MANAGE].[FACILITY_PATTERN]	= [D_FACILITY_GENERAL_INFO_HISTORY].[FACILITY_PATTERN]
						AND [D_FACILITY_MANAGE].[BODY_CAREER_NO]	= [D_FACILITY_GENERAL_INFO_HISTORY].[CAREER_NO]
				)
				WHERE
						[D_FACILITY_MANAGE].[FACILITY_CD]		= #facilityCd#
					AND [D_FACILITY_MANAGE].[KIND_FLG]			= #kindFlg#
					AND [D_FACILITY_MANAGE].[FACILITY_PATTERN]	= #facilityPattern#
					AND [D_FACILITY_MANAGE].[CAREER_NO]			= #careerNo#
		) TMP01
	</insert>

	<delete id="DFM_deleteDFacilityGeneralInfo" parameterClass="DFacilityManageKey">
		DELETE FROM
			[D_FACILITY_GENERAL_INFO]
		WHERE
				[FACILITY_CD]		= #facilityCd#
			AND [KIND_FLG]			= #kindFlg#
			AND [FACILITY_PATTERN]	= #facilityPattern#
	</delete>



	<!-- ******************************************************************************************
	 *		[DP/RM]施設_交通手段
	******************************************************************************************* -->

	<typeAlias alias="DFacilityTrafficHistory" type="jp.co.jreast.common.data.ddata.DFacilityTrafficHistory" />

	<resultMap id="DFM_DFacilityTrafficHistory_RM" class="DFacilityTrafficHistory">
		<result property="facilityCd"				column="FACILITY_CD"				javaType="String"	jdbcType="char" />
		<result property="kindFlg"					column="KIND_FLG"					javaType="String"	jdbcType="char" />
		<result property="facilityPattern"			column="FACILITY_PATTERN"			javaType="String"	jdbcType="char" />

		<result property="trafficFlg"				column="TRAFFIC_FLG"				javaType="String"	jdbcType="char" />
		<result property="stationDiv1"				column="STATION_DIV1"				javaType="String"	jdbcType="char" />
		<result property="nearestStation1"			column="NEAREST_STATION1"			javaType="String"	jdbcType="varchar"/>
		<result property="privateLineNm1"			column="PRIVATE_LINE_NM1"			javaType="String"	jdbcType="varchar"/>
		<result property="nearestStationPrivate1"	column="NEAREST_STATION_PRIVATE1"	javaType="String"	jdbcType="varchar"/>
		<result property="exitInfo1"				column="EXIT_INFO1"					javaType="String"	jdbcType="varchar"/>
		<result property="toStationWalktime1"		column="TO_STATION_WALKTIME1"		javaType="String"	jdbcType="smallint" />
		<result property="taxiTime1"				column="TAXI_TIME1"					javaType="String"	jdbcType="smallint" />
		<result property="annualTaxiFee1"			column="ANNUAL_TAXI_FEE1"			javaType="String"	jdbcType="smallint" />
		<result property="monthlyTaxiFee1"			column="MONTHLY_TAXI_FEE1"			javaType="String"	jdbcType="smallint" />
		<result property="taxiFee1"					column="TAXI_FEE1"					javaType="String"	jdbcType="int" />
		<result property="busDestination1"			column="BUS_DESTINATION1"			javaType="String"	jdbcType="varchar"/>
		<result property="busTimetable1"			column="BUS_TIMETABLE1"				javaType="String"	jdbcType="smallint" />
		<result property="busStation1"				column="BUS_STATION1"				javaType="String"	jdbcType="varchar"/>
		<result property="toBusStaTime1"			column="TO_BUS_STA_TIME1"			javaType="String"	jdbcType="smallint" />
		<result property="highway1"					column="HIGHWAY1"					javaType="String"	jdbcType="varchar"/>
		<result property="autoRoadway1"				column="AUTO_ROADWAY1"				javaType="String"	jdbcType="varchar"/>
		<result property="genreralRoadway1"			column="GENRERAL_ROADWAY1"			javaType="String"	jdbcType="varchar"/>
		<result property="accessIc1"				column="ACCESS_IC1"					javaType="String"	jdbcType="varchar"/>
		<result property="nationalRoadway1"			column="NATIONAL_ROADWAY1"			javaType="String"	jdbcType="varchar"/>
		<result property="countyRoadway1"			column="COUNTY_ROADWAY1"			javaType="String"	jdbcType="varchar"/>
		<result property="carDirection1"			column="CAR_DIRECTION1"				javaType="String"	jdbcType="varchar"/>
		<result property="availableDistance1"		column="AVAILABLE_DISTANCE1"		javaType="String"	jdbcType="smallint" />
		<result property="accessTime1"				column="ACCESS_TIME1"				javaType="String"	jdbcType="smallint" />
		<result property="carTarget1"				column="CAR_TARGET1"				javaType="String"	jdbcType="varchar"/>
		<result property="msFlg1"					column="MS_FLG1"					javaType="String"	jdbcType="char" />
		<result property="msStationFlg1"			column="MS_STATION_FLG1"			javaType="String"	jdbcType="char" />
		<result property="msStation1"				column="MS_STATION1"				javaType="String"	jdbcType="varchar"/>
		<result property="msBusFlg1"				column="MS_BUS_FLG1"				javaType="String"	jdbcType="char" />
		<result property="msBus1"					column="MS_BUS1"					javaType="String"	jdbcType="varchar"/>
		<result property="msDiv1"					column="MS_DIV1"					javaType="String"	jdbcType="char" />
		<result property="meetTimeFlg1"				column="MEET_TIME_FLG1"				javaType="String"	jdbcType="char" />
		<result property="meetTimeBegin1"			column="MEET_TIME_BEGIN1"			javaType="String"	jdbcType="char" />
		<result property="meetTimeEnd1"				column="MEET_TIME_END1"				javaType="String"	jdbcType="char" />
		<result property="sendTimeFlg1"				column="SEND_TIME_FLG1"				javaType="String"	jdbcType="char" />
		<result property="sendTimeBegin1"			column="SEND_TIME_BEGIN1"			javaType="String"	jdbcType="char" />
		<result property="sendTimeEnd1"				column="SEND_TIME_END1"				javaType="String"	jdbcType="char" />
		<result property="shuttleBusFlg1"			column="SHUTTLE_BUS_FLG1"			javaType="String"	jdbcType="char" />
		<result property="shuttleBusStation1"		column="SHUTTLE_BUS_STATION1"		javaType="String"	jdbcType="varchar"/>
		<result property="shuttleBusMeet1"			column="SHUTTLE_BUS_MEET1"			javaType="String"	jdbcType="varchar"/>
		<result property="shuttleBusSend1"			column="SHUTTLE_BUS_SEND1"			javaType="String"	jdbcType="varchar"/>
		<result property="shuttleBusTimeMemo1"		column="SHUTTLE_BUS_TIME_MEMO1"		javaType="String"	jdbcType="varchar"/>
		<result property="shuttleBusMemo1"			column="SHUTTLE_BUS_MEMO1"			javaType="String"	jdbcType="varchar"/>
		<result property="reserveFlg1"				column="RESERVE_FLG1"				javaType="String"	jdbcType="char" />
		<result property="reserveCmt1"				column="RESERVE_CMT1"				javaType="String"	jdbcType="varchar"/>
		<result property="reserveDiv1"				column="RESERVE_DIV1"				javaType="String"	jdbcType="char" />
		<result property="contactFlg1"				column="CONTACT_FLG1"				javaType="String"	jdbcType="char" />
		<result property="noReserveFlg1"			column="NO_RESERVE_FLG1"			javaType="String"	jdbcType="char" />
		<result property="stationDiv2"				column="STATION_DIV2"				javaType="String"	jdbcType="char" />
		<result property="nearestStation2"			column="NEAREST_STATION2"			javaType="String"	jdbcType="varchar"/>
		<result property="privateLineNm2"			column="PRIVATE_LINE_NM2"			javaType="String"	jdbcType="varchar"/>
		<result property="nearestStationPrivate2"	column="NEAREST_STATION_PRIVATE2"	javaType="String"	jdbcType="varchar"/>
		<result property="exitInfo2"				column="EXIT_INFO2"					javaType="String"	jdbcType="varchar"/>
		<result property="toStationWalktime2"		column="TO_STATION_WALKTIME2"		javaType="String"	jdbcType="smallint" />
		<result property="taxiTime2"				column="TAXI_TIME2"					javaType="String"	jdbcType="smallint" />
		<result property="annualTaxiFee2"			column="ANNUAL_TAXI_FEE2"			javaType="String"	jdbcType="smallint" />
		<result property="monthlyTaxiFee2"			column="MONTHLY_TAXI_FEE2"			javaType="String"	jdbcType="smallint" />
		<result property="taxiFee2"					column="TAXI_FEE2"					javaType="String"	jdbcType="int" />
		<result property="busDestination2"			column="BUS_DESTINATION2"			javaType="String"	jdbcType="varchar"/>
		<result property="busTimetable2"			column="BUS_TIMETABLE2"				javaType="String"	jdbcType="smallint" />
		<result property="busStation2"				column="BUS_STATION2"				javaType="String"	jdbcType="varchar"/>
		<result property="toBusStaTime2"			column="TO_BUS_STA_TIME2"			javaType="String"	jdbcType="smallint" />
		<result property="msFlg2"					column="MS_FLG2"					javaType="String"	jdbcType="char" />
		<result property="msStationFlg2"			column="MS_STATION_FLG2"			javaType="String"	jdbcType="char" />
		<result property="msStation2"				column="MS_STATION2"				javaType="String"	jdbcType="varchar"/>
		<result property="msBusFlg2"				column="MS_BUS_FLG2"				javaType="String"	jdbcType="char" />
		<result property="msBus2"					column="MS_BUS2"					javaType="String"	jdbcType="varchar"/>
		<result property="msDiv2"					column="MS_DIV2"					javaType="String"	jdbcType="char" />
		<result property="meetTimeFlg2"				column="MEET_TIME_FLG2"				javaType="String"	jdbcType="char" />
		<result property="meetTimeBegin2"			column="MEET_TIME_BEGIN2"			javaType="String"	jdbcType="char" />
		<result property="meetTimeEnd2"				column="MEET_TIME_END2"				javaType="String"	jdbcType="char" />
		<result property="sendTimeFlg2"				column="SEND_TIME_FLG2"				javaType="String"	jdbcType="char" />
		<result property="sendTimeBegin2"			column="SEND_TIME_BEGIN2"			javaType="String"	jdbcType="char" />
		<result property="sendTimeEnd2"				column="SEND_TIME_END2"				javaType="String"	jdbcType="char" />
		<result property="shuttleBusFlg2"			column="SHUTTLE_BUS_FLG2"			javaType="String"	jdbcType="char" />
		<result property="shuttleBusStation2"		column="SHUTTLE_BUS_STATION2"		javaType="String"	jdbcType="varchar"/>
		<result property="shuttleBusMeet2"			column="SHUTTLE_BUS_MEET2"			javaType="String"	jdbcType="varchar"/>
		<result property="shuttleBusSend2"			column="SHUTTLE_BUS_SEND2"			javaType="String"	jdbcType="varchar"/>
		<result property="shuttleBusTimeMemo2"		column="SHUTTLE_BUS_TIME_MEMO2"		javaType="String"	jdbcType="varchar"/>
		<result property="shuttleBusMemo2"			column="SHUTTLE_BUS_MEMO2"			javaType="String"	jdbcType="varchar"/>
		<result property="reserveFlg2"				column="RESERVE_FLG2"				javaType="String"	jdbcType="char" />
		<result property="reserveCmt2"				column="RESERVE_CMT2"				javaType="String"	jdbcType="varchar"/>
		<result property="reserveDiv2"				column="RESERVE_DIV2"				javaType="String"	jdbcType="char" />
		<result property="contactFlg2"				column="CONTACT_FLG2"				javaType="String"	jdbcType="char" />
		<result property="noReserveFlg2"			column="NO_RESERVE_FLG2"			javaType="String"	jdbcType="char" />

		<result property="careerNo"					column="CAREER_NO"					javaType="Integer"	jdbcType="smallint"/>
	</resultMap>

	<sql id="DFM_subQuery_DFacilityTraffic_AllColumns">
		 [FACILITY_CD]
		,[KIND_FLG]
		,[FACILITY_PATTERN]
		,[TRAFFIC_FLG]
		,[STATION_DIV1]
		,[NEAREST_STATION1]
		,[PRIVATE_LINE_NM1]
		,[NEAREST_STATION_PRIVATE1]
		,[EXIT_INFO1]
		,[TO_STATION_WALKTIME1]
		,[TAXI_TIME1]
		,[ANNUAL_TAXI_FEE1]
		,[MONTHLY_TAXI_FEE1]
		,[TAXI_FEE1]
		,[BUS_DESTINATION1]
		,[BUS_TIMETABLE1]
		,[BUS_STATION1]
		,[TO_BUS_STA_TIME1]
		,[HIGHWAY1]
		,[AUTO_ROADWAY1]
		,[GENRERAL_ROADWAY1]
		,[ACCESS_IC1]
		,[NATIONAL_ROADWAY1]
		,[COUNTY_ROADWAY1]
		,[CAR_DIRECTION1]
		,[AVAILABLE_DISTANCE1]
		,[ACCESS_TIME1]
		,[CAR_TARGET1]
		,[MS_FLG1]
		,[MS_STATION_FLG1]
		,[MS_STATION1]
		,[MS_BUS_FLG1]
		,[MS_BUS1]
		,[MS_DIV1]
		,[MEET_TIME_FLG1]
		,[MEET_TIME_BEGIN1]
		,[MEET_TIME_END1]
		,[SEND_TIME_FLG1]
		,[SEND_TIME_BEGIN1]
		,[SEND_TIME_END1]
		,[SHUTTLE_BUS_FLG1]
		,[SHUTTLE_BUS_STATION1]
		,[SHUTTLE_BUS_MEET1]
		,[SHUTTLE_BUS_SEND1]
		,[SHUTTLE_BUS_TIME_MEMO1]
		,[SHUTTLE_BUS_MEMO1]
		,[RESERVE_FLG1]
		,[RESERVE_CMT1]
		,[RESERVE_DIV1]
		,[CONTACT_FLG1]
		,[NO_RESERVE_FLG1]
		,[STATION_DIV2]
		,[NEAREST_STATION2]
		,[PRIVATE_LINE_NM2]
		,[NEAREST_STATION_PRIVATE2]
		,[EXIT_INFO2]
		,[TO_STATION_WALKTIME2]
		,[TAXI_TIME2]
		,[ANNUAL_TAXI_FEE2]
		,[MONTHLY_TAXI_FEE2]
		,[TAXI_FEE2]
		,[BUS_DESTINATION2]
		,[BUS_TIMETABLE2]
		,[BUS_STATION2]
		,[TO_BUS_STA_TIME2]
		,[MS_FLG2]
		,[MS_STATION_FLG2]
		,[MS_STATION2]
		,[MS_BUS_FLG2]
		,[MS_BUS2]
		,[MS_DIV2]
		,[MEET_TIME_FLG2]
		,[MEET_TIME_BEGIN2]
		,[MEET_TIME_END2]
		,[SEND_TIME_FLG2]
		,[SEND_TIME_BEGIN2]
		,[SEND_TIME_END2]
		,[SHUTTLE_BUS_FLG2]
		,[SHUTTLE_BUS_STATION2]
		,[SHUTTLE_BUS_MEET2]
		,[SHUTTLE_BUS_SEND2]
		,[SHUTTLE_BUS_TIME_MEMO2]
		,[SHUTTLE_BUS_MEMO2]
		,[RESERVE_FLG2]
		,[RESERVE_CMT2]
		,[RESERVE_DIV2]
		,[CONTACT_FLG2]
		,[NO_RESERVE_FLG2]
	</sql>

	<select id="DFM_fetchDFacilityTrafficHistory" resultMap="DFM_DFacilityTrafficHistory_RM" parameterClass="DFacilityManageKey">
		SELECT
			<include refid="DFM_subQuery_DFacilityTraffic_AllColumns"/>
			,[CAREER_NO]
		FROM (
				SELECT
					[D_FACILITY_TRAFFIC_HISTORY].*
				FROM
					[D_FACILITY_TRAFFIC_HISTORY]
				INNER JOIN
					[D_FACILITY_MANAGE] ON (
							[D_FACILITY_MANAGE].[FACILITY_CD]		= [D_FACILITY_TRAFFIC_HISTORY].[FACILITY_CD]
						AND [D_FACILITY_MANAGE].[KIND_FLG]			= [D_FACILITY_TRAFFIC_HISTORY].[KIND_FLG]
						AND [D_FACILITY_MANAGE].[FACILITY_SORTS]	= #facilitySorts#
						AND [D_FACILITY_MANAGE].[FACILITY_PATTERN]	= [D_FACILITY_TRAFFIC_HISTORY].[FACILITY_PATTERN]
						AND [D_FACILITY_MANAGE].[BODY_CAREER_NO]	= [D_FACILITY_TRAFFIC_HISTORY].[CAREER_NO]
				)
				WHERE
						[D_FACILITY_MANAGE].[FACILITY_CD]		= #facilityCd#
					AND [D_FACILITY_MANAGE].[KIND_FLG]			= #kindFlg#
					AND [D_FACILITY_MANAGE].[FACILITY_PATTERN]	= #facilityPattern#
					AND [D_FACILITY_MANAGE].[CAREER_NO]			= #careerNo#
		) TMP01
	</select>

	<select id="DFM_fetchDFacilityTrafficByPlanAnsNo" resultMap="DFM_DFacilityTrafficHistory_RM" parameterClass="DFacilityManageSearchData">
		SELECT
			<include refid="DFM_subQuery_DFacilityTraffic_AllColumns"/>
			,NULL AS [CAREER_NO]
		FROM (
			SELECT
				[D_FACILITY_TRAFFIC].*
			FROM
				[D_FACILITY_TRAFFIC]
			INNER JOIN
				[D_PLAN_ANS_FACILITY] ON (
					[D_FACILITY_TRAFFIC].[FACILITY_CD]		= [D_PLAN_ANS_FACILITY].[FACILITY_CD]
				AND [D_FACILITY_TRAFFIC].[KIND_FLG]			= [D_PLAN_ANS_FACILITY].[KIND_FLG]
				AND [D_FACILITY_TRAFFIC].[FACILITY_PATTERN]	= [D_PLAN_ANS_FACILITY].[FACILITY_PATTERN_NO5]
			)
			WHERE
				[D_PLAN_ANS_FACILITY].[PLAN_ANS_NO]	= #planAnsNo#
		) TMP01
	</select>

	<select id="DFM_fetchDFacilityTrafficByPk" resultMap="DFM_DFacilityTrafficHistory_RM" parameterClass="DFacilityManageSearchData">
		SELECT
			<include refid="DFM_subQuery_DFacilityTraffic_AllColumns"/>
			,NULL AS [CAREER_NO]
		FROM (
			SELECT
				[D_FACILITY_TRAFFIC].*
			FROM
				[D_FACILITY_TRAFFIC]
			WHERE
					[D_FACILITY_TRAFFIC].[FACILITY_CD]		= #facilityCd#
				AND [D_FACILITY_TRAFFIC].[KIND_FLG]			= #kindFlg#
				AND [D_FACILITY_TRAFFIC].[FACILITY_PATTERN]	= #facilityPattern#
		) TMP01
	</select>

	<sql id="DFM_subQuery_AFacilityTraffic_RyokanHotel">
		SELECT
			[A_FACILITY_TRAFFIC].*

			,[STATION_DIV]				AS [STATION_DIV1]
			,[NEAREST_STATION]			AS [NEAREST_STATION1]
			,NULL						AS [PRIVATE_LINE_NM1]
			,NULL						AS [NEAREST_STATION_PRIVATE1]
			,[EXIT_INFO]				AS [EXIT_INFO1]
			,[TO_STATION_WALKTIME]		AS [TO_STATION_WALKTIME1]
			,[TAXI_TIME]				AS [TAXI_TIME1]
			,[ANNUAL_TAXI_FEE]			AS [ANNUAL_TAXI_FEE1]
			,[MONTHLY_TAXI_FEE]			AS [MONTHLY_TAXI_FEE1]
			,[TAXI_FEE]					AS [TAXI_FEE1]
			,[BUS_DESTINATION]			AS [BUS_DESTINATION1]
			,[BUS_TIMETABLE]			AS [BUS_TIMETABLE1]
			,[BUS_STATION]				AS [BUS_STATION1]
			,[TO_BUS_STA_TIME]			AS [TO_BUS_STA_TIME1]
			,[HIGHWAY]					AS [HIGHWAY1]
			,[AUTO_ROADWAY]				AS [AUTO_ROADWAY1]
			,[GENRERAL_ROADWAY]			AS [GENRERAL_ROADWAY1]
			,[ACCESS_IC]				AS [ACCESS_IC1]
			,[NATIONAL_ROADWAY]			AS [NATIONAL_ROADWAY1]
			,[COUNTY_ROADWAY]			AS [COUNTY_ROADWAY1]
			,[CAR_DIRECTION]			AS [CAR_DIRECTION1]
			,[AVAILABLE_DISTANCE]		AS [AVAILABLE_DISTANCE1]
			,[ACCESS_TIME]				AS [ACCESS_TIME1]
			,[CAR_TARGET]				AS [CAR_TARGET1]
			,[MS_FLG]					AS [MS_FLG1]
			,[MS_STATION_FLG]			AS [MS_STATION_FLG1]
			,[MS_STATION]				AS [MS_STATION1]
			,[MS_BUS_FLG]				AS [MS_BUS_FLG1]
			,[MS_BUS]					AS [MS_BUS1]
			,[MS_DIV]					AS [MS_DIV1]
			,[MEET_TIME_FLG]			AS [MEET_TIME_FLG1]
			,[MEET_TIME_BEGIN]			AS [MEET_TIME_BEGIN1]
			,[MEET_TIME_END]			AS [MEET_TIME_END1]
			,[SEND_TIME_FLG]			AS [SEND_TIME_FLG1]
			,[SEND_TIME_BEGIN]			AS [SEND_TIME_BEGIN1]
			,[SEND_TIME_END]			AS [SEND_TIME_END1]
			,[SHUTTLE_BUS_FLG]			AS [SHUTTLE_BUS_FLG1]
			,[SHUTTLE_BUS_STATION]		AS [SHUTTLE_BUS_STATION1]
			,NULL						AS [SHUTTLE_BUS_MEET1]
			,NULL						AS [SHUTTLE_BUS_SEND1]
			,NULL						AS [SHUTTLE_BUS_TIME_MEMO1]
			,NULL						AS [SHUTTLE_BUS_MEMO1]
			,[RESERVE_FLG]				AS [RESERVE_FLG1]
			,[RESERVE_CMT]				AS [RESERVE_CMT1]
			,NULL						AS [RESERVE_DIV1]
			,[CONTACT_FLG]				AS [CONTACT_FLG1]
			,[NO_RESERVE_FLG]			AS [NO_RESERVE_FLG1]

			,NULL			AS [STATION_DIV2]
			,NULL			AS [NEAREST_STATION2]
			,NULL			AS [PRIVATE_LINE_NM2]
			,NULL			AS [NEAREST_STATION_PRIVATE2]
			,NULL			AS [EXIT_INFO2]
			,NULL			AS [TO_STATION_WALKTIME2]
			,NULL			AS [TAXI_TIME2]
			,NULL			AS [ANNUAL_TAXI_FEE2]
			,NULL			AS [MONTHLY_TAXI_FEE2]
			,NULL			AS [TAXI_FEE2]
			,NULL			AS [BUS_DESTINATION2]
			,NULL			AS [BUS_TIMETABLE2]
			,NULL			AS [BUS_STATION2]
			,NULL			AS [TO_BUS_STA_TIME2]
			,NULL			AS [MS_FLG2]
			,NULL			AS [MS_STATION_FLG2]
			,NULL			AS [MS_STATION2]
			,NULL			AS [MS_BUS_FLG2]
			,NULL			AS [MS_BUS2]
			,NULL			AS [MS_DIV2]
			,NULL			AS [MEET_TIME_FLG2]
			,NULL			AS [MEET_TIME_BEGIN2]
			,NULL			AS [MEET_TIME_END2]
			,NULL			AS [SEND_TIME_FLG2]
			,NULL			AS [SEND_TIME_BEGIN2]
			,NULL			AS [SEND_TIME_END2]
			,NULL			AS [SHUTTLE_BUS_FLG2]
			,NULL			AS [SHUTTLE_BUS_STATION2]
			,NULL			AS [SHUTTLE_BUS_MEET2]
			,NULL			AS [SHUTTLE_BUS_SEND2]
			,NULL			AS [SHUTTLE_BUS_TIME_MEMO2]
			,NULL			AS [SHUTTLE_BUS_MEMO2]
			,NULL			AS [RESERVE_FLG2]
			,NULL			AS [RESERVE_CMT2]
			,NULL			AS [RESERVE_DIV2]
			,NULL			AS [CONTACT_FLG2]
			,NULL			AS [NO_RESERVE_FLG2]
		FROM
			[A_FACILITY_TRAFFIC]
		WHERE
				[A_FACILITY_TRAFFIC].[FACILITY_CD]		= #facilityCd#
			AND [A_FACILITY_TRAFFIC].[KIND_FLG]			= #kindFlg#
			AND [A_FACILITY_TRAFFIC].[FACILITY_PATTERN]	= #facilityPattern#
	</sql>

	<sql id="DFM_subQuery_AFacilityTraffic_Ski">
		SELECT
			 [FACILITY_CD]				AS [FACILITY_CD]
			,[KIND_FLG]					AS [KIND_FLG]
			,[FACILITY_PATTERN]			AS [FACILITY_PATTERN]
			,NULL						AS [TRAFFIC_FLG]

			,[STATION_DIV]				AS [STATION_DIV1]
			,[NEAREST_STATION]			AS [NEAREST_STATION1]
			,[NEAREST_LINE]				AS [PRIVATE_LINE_NM1]
			,NULL						AS [NEAREST_STATION_PRIVATE1]
			,[EXIT_INFO]				AS [EXIT_INFO1]
			,[TO_STATION_WALKTIME]		AS [TO_STATION_WALKTIME1]
			,[TAXI_TIME]				AS [TAXI_TIME1]
			,NULL						AS [ANNUAL_TAXI_FEE1]
			,NULL						AS [MONTHLY_TAXI_FEE1]
			,NULL						AS [TAXI_FEE1]
			,[BUS_DESTINATION]			AS [BUS_DESTINATION1]
			,[BUS_TIMETABLE]			AS [BUS_TIMETABLE1]
			,[BUS_STATION]				AS [BUS_STATION1]
			,[TO_BUS_STA_TIME]			AS [TO_BUS_STA_TIME1]
			,NULL						AS [HIGHWAY1]
			,NULL						AS [AUTO_ROADWAY1]
			,NULL						AS [GENRERAL_ROADWAY1]
			,NULL						AS [ACCESS_IC1]
			,NULL						AS [NATIONAL_ROADWAY1]
			,NULL						AS [COUNTY_ROADWAY1]
			,NULL						AS [CAR_DIRECTION1]
			,NULL						AS [AVAILABLE_DISTANCE1]
			,NULL						AS [ACCESS_TIME1]
			,NULL						AS [CAR_TARGET1]
			,[MS_FLG]					AS [MS_FLG1]
			,[MS_STATION_FLG]			AS [MS_STATION_FLG1]
			,[MS_STATION]				AS [MS_STATION1]
			,[MS_BUS_FLG]				AS [MS_BUS_FLG1]
			,[MS_BUS]					AS [MS_BUS1]
			,[MS_DIV]					AS [MS_DIV1]
			,[MEET_TIME_FLG]			AS [MEET_TIME_FLG1]
			,[MEET_TIME_BEGIN]			AS [MEET_TIME_BEGIN1]
			,[MEET_TIME_END]			AS [MEET_TIME_END1]
			,[SEND_TIME_FLG]			AS [SEND_TIME_FLG1]
			,[SEND_TIME_BEGIN]			AS [SEND_TIME_BEGIN1]
			,[SEND_TIME_END]			AS [SEND_TIME_END1]
			,[SHUTTLE_BUS_FLG]			AS [SHUTTLE_BUS_FLG1]
			,NULL						AS [SHUTTLE_BUS_STATION1]
			,NULL						AS [SHUTTLE_BUS_MEET1]
			,NULL						AS [SHUTTLE_BUS_SEND1]
			,NULL						AS [SHUTTLE_BUS_TIME_MEMO1]
			,NULL						AS [SHUTTLE_BUS_MEMO1]
			,[RESERVE_TEL_FLG]			AS [RESERVE_FLG1]
			,[RESERVE_TEL_DAYS]			AS [RESERVE_CMT1]
			,NULL						AS [RESERVE_DIV1]
			,[STATION_CONTACT_FLG]		AS [CONTACT_FLG1]
			,[NO_RESERVE_FLG]			AS [NO_RESERVE_FLG1]

			,NULL			AS [STATION_DIV2]
			,NULL			AS [NEAREST_STATION2]
			,NULL			AS [PRIVATE_LINE_NM2]
			,NULL			AS [NEAREST_STATION_PRIVATE2]
			,NULL			AS [EXIT_INFO2]
			,NULL			AS [TO_STATION_WALKTIME2]
			,NULL			AS [TAXI_TIME2]
			,NULL			AS [ANNUAL_TAXI_FEE2]
			,NULL			AS [MONTHLY_TAXI_FEE2]
			,NULL			AS [TAXI_FEE2]
			,NULL			AS [BUS_DESTINATION2]
			,NULL			AS [BUS_TIMETABLE2]
			,NULL			AS [BUS_STATION2]
			,NULL			AS [TO_BUS_STA_TIME2]
			,NULL			AS [MS_FLG2]
			,NULL			AS [MS_STATION_FLG2]
			,NULL			AS [MS_STATION2]
			,NULL			AS [MS_BUS_FLG2]
			,NULL			AS [MS_BUS2]
			,NULL			AS [MS_DIV2]
			,NULL			AS [MEET_TIME_FLG2]
			,NULL			AS [MEET_TIME_BEGIN2]
			,NULL			AS [MEET_TIME_END2]
			,NULL			AS [SEND_TIME_FLG2]
			,NULL			AS [SEND_TIME_BEGIN2]
			,NULL			AS [SEND_TIME_END2]
			,NULL			AS [SHUTTLE_BUS_FLG2]
			,NULL			AS [SHUTTLE_BUS_STATION2]
			,NULL			AS [SHUTTLE_BUS_MEET2]
			,NULL			AS [SHUTTLE_BUS_SEND2]
			,NULL			AS [SHUTTLE_BUS_TIME_MEMO2]
			,NULL			AS [SHUTTLE_BUS_MEMO2]
			,NULL			AS [RESERVE_FLG2]
			,NULL			AS [RESERVE_CMT2]
			,NULL			AS [RESERVE_DIV2]
			,NULL			AS [CONTACT_FLG2]
			,NULL			AS [NO_RESERVE_FLG2]
		FROM
			[A_FACILITY_TRAFFIC_SKI]
		WHERE
				[A_FACILITY_TRAFFIC_SKI].[FACILITY_CD]		= #facilityCd#
			AND [A_FACILITY_TRAFFIC_SKI].[KIND_FLG]			= #kindFlg#
			AND [A_FACILITY_TRAFFIC_SKI].[FACILITY_PATTERN]	= #facilityPattern#
	</sql>

	<select id="DFM_fetchAFacilityTrafficByPk" resultMap="DFM_DFacilityTrafficHistory_RM" parameterClass="DFacilityManageSearchData">
		SELECT
			<include refid="DFM_subQuery_DFacilityTraffic_AllColumns"/>
			,NULL AS [CAREER_NO]
		FROM (
			<isNotEqual property="facilityType" compareValue="3">
				<include refid="DFM_subQuery_AFacilityTraffic_RyokanHotel"/>
			</isNotEqual>
			<isEqual property="facilityType" compareValue="3">
				<include refid="DFM_subQuery_AFacilityTraffic_Ski"/>
			</isEqual>
		) TMP01
	</select>

	<insert id="DFM_insertDFacilityTrafficHistory" parameterClass="DFacilityTrafficHistory">
		INSERT INTO
			[D_FACILITY_TRAFFIC_HISTORY]
		(
			 [FACILITY_CD]
			,[KIND_FLG]
			,[FACILITY_PATTERN]
			,[CAREER_NO]
			,[TRAFFIC_FLG]
			,[STATION_DIV1]
			,[NEAREST_STATION1]
			,[PRIVATE_LINE_NM1]
			,[NEAREST_STATION_PRIVATE1]
			,[EXIT_INFO1]
			<isNotEmpty property="toStationWalktime1">,[TO_STATION_WALKTIME1]</isNotEmpty>
			<isNotEmpty property="taxiTime1">,[TAXI_TIME1]</isNotEmpty>
			<isNotEmpty property="annualTaxiFee1">,[ANNUAL_TAXI_FEE1]</isNotEmpty>
			<isNotEmpty property="monthlyTaxiFee1">,[MONTHLY_TAXI_FEE1]</isNotEmpty>
			<isNotEmpty property="taxiFee1">,[TAXI_FEE1]</isNotEmpty>
			,[BUS_DESTINATION1]
			<isNotEmpty property="busTimetable1">,[BUS_TIMETABLE1]</isNotEmpty>
			,[BUS_STATION1]
			<isNotEmpty property="toBusStaTime1">,[TO_BUS_STA_TIME1]</isNotEmpty>
			,[HIGHWAY1]
			,[AUTO_ROADWAY1]
			,[GENRERAL_ROADWAY1]
			,[ACCESS_IC1]
			,[NATIONAL_ROADWAY1]
			,[COUNTY_ROADWAY1]
			,[CAR_DIRECTION1]
			<isNotEmpty property="availableDistance1">,[AVAILABLE_DISTANCE1]</isNotEmpty>
			<isNotEmpty property="accessTime1">,[ACCESS_TIME1]</isNotEmpty>
			,[CAR_TARGET1]
			,[MS_FLG1]
			,[MS_STATION_FLG1]
			,[MS_STATION1]
			,[MS_BUS_FLG1]
			,[MS_BUS1]
			,[MS_DIV1]
			,[MEET_TIME_FLG1]
			,[MEET_TIME_BEGIN1]
			,[MEET_TIME_END1]
			,[SEND_TIME_FLG1]
			,[SEND_TIME_BEGIN1]
			,[SEND_TIME_END1]
			,[SHUTTLE_BUS_FLG1]
			,[SHUTTLE_BUS_STATION1]
			,[SHUTTLE_BUS_MEET1]
			,[SHUTTLE_BUS_SEND1]
			,[SHUTTLE_BUS_TIME_MEMO1]
			,[SHUTTLE_BUS_MEMO1]
			,[RESERVE_FLG1]
			,[RESERVE_CMT1]
			,[RESERVE_DIV1]
			,[CONTACT_FLG1]
			,[NO_RESERVE_FLG1]
			,[STATION_DIV2]
			,[NEAREST_STATION2]
			,[PRIVATE_LINE_NM2]
			,[NEAREST_STATION_PRIVATE2]
			,[EXIT_INFO2]
			<isNotEmpty property="toStationWalktime2">,[TO_STATION_WALKTIME2]</isNotEmpty>
			<isNotEmpty property="taxiTime2">,[TAXI_TIME2]</isNotEmpty>
			<isNotEmpty property="annualTaxiFee2">,[ANNUAL_TAXI_FEE2]</isNotEmpty>
			<isNotEmpty property="monthlyTaxiFee2">,[MONTHLY_TAXI_FEE2]</isNotEmpty>
			<isNotEmpty property="taxiFee2">,[TAXI_FEE2]</isNotEmpty>
			,[BUS_DESTINATION2]
			<isNotEmpty property="busTimetable2">,[BUS_TIMETABLE2]</isNotEmpty>
			,[BUS_STATION2]
			<isNotEmpty property="toBusStaTime2">,[TO_BUS_STA_TIME2]</isNotEmpty>
			,[MS_FLG2]
			,[MS_STATION_FLG2]
			,[MS_STATION2]
			,[MS_BUS_FLG2]
			,[MS_BUS2]
			,[MS_DIV2]
			,[MEET_TIME_FLG2]
			,[MEET_TIME_BEGIN2]
			,[MEET_TIME_END2]
			,[SEND_TIME_FLG2]
			,[SEND_TIME_BEGIN2]
			,[SEND_TIME_END2]
			,[SHUTTLE_BUS_FLG2]
			,[SHUTTLE_BUS_STATION2]
			,[SHUTTLE_BUS_MEET2]
			,[SHUTTLE_BUS_SEND2]
			,[SHUTTLE_BUS_TIME_MEMO2]
			,[SHUTTLE_BUS_MEMO2]
			,[RESERVE_FLG2]
			,[RESERVE_CMT2]
			,[RESERVE_DIV2]
			,[CONTACT_FLG2]
			,[NO_RESERVE_FLG2]
		)
		VALUES
		(
			 #facilityCd#
			,#kindFlg#
			,#facilityPattern#
			,#careerNo#
			,#trafficFlg#
			,#stationDiv1#
			,#nearestStation1#
			,#privateLineNm1#
			,#nearestStationPrivate1#
			,#exitInfo1#
			<isNotEmpty property="toStationWalktime1">,#toStationWalktime1:smallint#</isNotEmpty>
			<isNotEmpty property="taxiTime1">,#taxiTime1:smallint#</isNotEmpty>
			<isNotEmpty property="annualTaxiFee1">,#annualTaxiFee1:smallint#</isNotEmpty>
			<isNotEmpty property="monthlyTaxiFee1">,#monthlyTaxiFee1:smallint#</isNotEmpty>
			<isNotEmpty property="taxiFee1">,#taxiFee1:int#</isNotEmpty>
			,#busDestination1#
			<isNotEmpty property="busTimetable1">,#busTimetable1:smallint#</isNotEmpty>
			,#busStation1#
			<isNotEmpty property="toBusStaTime1">,#toBusStaTime1:smallint#</isNotEmpty>
			,#highway1#
			,#autoRoadway1#
			,#genreralRoadway1#
			,#accessIc1#
			,#nationalRoadway1#
			,#countyRoadway1#
			,#carDirection1#
			<isNotEmpty property="availableDistance1">,#availableDistance1:smallint#</isNotEmpty>
			<isNotEmpty property="accessTime1">,#accessTime1:smallint#</isNotEmpty>
			,#carTarget1#
			,#msFlg1#
			,#msStationFlg1#
			,#msStation1#
			,#msBusFlg1#
			,#msBus1#
			,#msDiv1#
			,#meetTimeFlg1#
			,#meetTimeBegin1#
			,#meetTimeEnd1#
			,#sendTimeFlg1#
			,#sendTimeBegin1#
			,#sendTimeEnd1#
			,#shuttleBusFlg1#
			,#shuttleBusStation1#
			,#shuttleBusMeet1#
			,#shuttleBusSend1#
			,#shuttleBusTimeMemo1#
			,#shuttleBusMemo1#
			,#reserveFlg1#
			,#reserveCmt1#
			,#reserveDiv1#
			,#contactFlg1#
			,#noReserveFlg1#
			,#stationDiv2#
			,#nearestStation2#
			,#privateLineNm2#
			,#nearestStationPrivate2#
			,#exitInfo2#
			<isNotEmpty property="toStationWalktime2">,#toStationWalktime2:smallint#</isNotEmpty>
			<isNotEmpty property="taxiTime2">,#taxiTime2:smallint#</isNotEmpty>
			<isNotEmpty property="annualTaxiFee2">,#annualTaxiFee2:smallint#</isNotEmpty>
			<isNotEmpty property="monthlyTaxiFee2">,#monthlyTaxiFee2:smallint#</isNotEmpty>
			<isNotEmpty property="taxiFee2">,#taxiFee2:int#</isNotEmpty>
			,#busDestination2#
			<isNotEmpty property="busTimetable2">,#busTimetable2:smallint#</isNotEmpty>
			,#busStation2#
			<isNotEmpty property="toBusStaTime2">,#toBusStaTime2:smallint#</isNotEmpty>
			,#msFlg2#
			,#msStationFlg2#
			,#msStation2#
			,#msBusFlg2#
			,#msBus2#
			,#msDiv2#
			,#meetTimeFlg2#
			,#meetTimeBegin2#
			,#meetTimeEnd2#
			,#sendTimeFlg2#
			,#sendTimeBegin2#
			,#sendTimeEnd2#
			,#shuttleBusFlg2#
			,#shuttleBusStation2#
			,#shuttleBusMeet2#
			,#shuttleBusSend2#
			,#shuttleBusTimeMemo2#
			,#shuttleBusMemo2#
			,#reserveFlg2#
			,#reserveCmt2#
			,#reserveDiv2#
			,#contactFlg2#
			,#noReserveFlg2#
		)
	</insert>

	<insert id="DFM_insertDFacilityTrafficCopyFromHistory" parameterClass="DFacilityManageKey">
		INSERT INTO
			[D_FACILITY_TRAFFIC]
		(
			<include refid="DFM_subQuery_DFacilityTraffic_AllColumns"/>
		)
		SELECT
			<include refid="DFM_subQuery_DFacilityTraffic_AllColumns"/>
		FROM (
				SELECT
					[D_FACILITY_TRAFFIC_HISTORY].*
				FROM
					[D_FACILITY_TRAFFIC_HISTORY]
				INNER JOIN
					[D_FACILITY_MANAGE] ON (
							[D_FACILITY_MANAGE].[FACILITY_CD]		= [D_FACILITY_TRAFFIC_HISTORY].[FACILITY_CD]
						AND [D_FACILITY_MANAGE].[KIND_FLG]			= [D_FACILITY_TRAFFIC_HISTORY].[KIND_FLG]
						AND [D_FACILITY_MANAGE].[FACILITY_SORTS]	= #facilitySorts#
						AND [D_FACILITY_MANAGE].[FACILITY_PATTERN]	= [D_FACILITY_TRAFFIC_HISTORY].[FACILITY_PATTERN]
						AND [D_FACILITY_MANAGE].[BODY_CAREER_NO]	= [D_FACILITY_TRAFFIC_HISTORY].[CAREER_NO]
				)
				WHERE
						[D_FACILITY_MANAGE].[FACILITY_CD]		= #facilityCd#
					AND [D_FACILITY_MANAGE].[KIND_FLG]			= #kindFlg#
					AND [D_FACILITY_MANAGE].[FACILITY_PATTERN]	= #facilityPattern#
					AND [D_FACILITY_MANAGE].[CAREER_NO]			= #careerNo#
		) TMP01
	</insert>

	<delete id="DFM_deleteDFacilityTraffic" parameterClass="DFacilityManageKey">
		DELETE FROM
			[D_FACILITY_TRAFFIC]
		WHERE
				[FACILITY_CD]		= #facilityCd#
			AND [KIND_FLG]			= #kindFlg#
			AND [FACILITY_PATTERN]	= #facilityPattern#
	</delete>



	<!-- ******************************************************************************************
	 *		[DP/RM]施設_リフト_スキー
	******************************************************************************************* -->

	<typeAlias alias="DFacilityLiftSkiHistory" type="jp.co.jreast.common.data.ddata.DFacilityLiftSkiHistory" />

	<resultMap id="DFM_DFacilityLiftSkiHistory_RM" class="DFacilityLiftSkiHistory">
		<result property="facilityCd"				column="FACILITY_CD"				javaType="String"	jdbcType="char" />
		<result property="kindFlg"					column="KIND_FLG"					javaType="String"	jdbcType="char" />
		<result property="facilityPattern"			column="FACILITY_PATTERN"			javaType="String"	jdbcType="char" />

		<result property="liftTkContainFlg"			column="LIFT_TK_CONTAIN_FLG"		javaType="String"	jdbcType="char" />
		<result property="liftTkSkiNm"				column="LIFT_TK_SKI_NM"				javaType="String"	jdbcType="varchar" />
		<result property="liftTkKind"				column="LIFT_TK_KIND"				javaType="String"	jdbcType="char" />
		<result property="liftTkOtherContent"		column="LIFT_TK_OTHER_CONTENT"		javaType="String"	jdbcType="varchar" />
		<result property="liftYkStayNight"			column="LIFT_YK_STAY_NIGHT"			javaType="String"	jdbcType="char" />
		<result property="liftYkMorning"			column="LIFT_YK_MORNING"			javaType="String"	jdbcType="char" />
		<result property="liftYkBackNight"			column="LIFT_YK_BACK_NIGHT"			javaType="String"	jdbcType="char" />
		<result property="liftYkGondola"			column="LIFT_YK_GONDOLA"			javaType="String"	jdbcType="char" />
		<result property="liftYkCable"				column="LIFT_YK_CABLE"				javaType="String"	jdbcType="char" />
		<result property="liftYkOther"				column="LIFT_YK_OTHER"				javaType="String"	jdbcType="char" />
		<result property="liftYkOtherContent"		column="LIFT_YK_OTHER_CONTENT"		javaType="String"	jdbcType="varchar" />
		<result property="liftChWayFlg"				column="LIFT_CH_WAY_FLG"			javaType="String"	jdbcType="char" />
		<result property="liftChWayOtherContent"	column="LIFT_CH_WAY_OTHER_CONTENT"	javaType="String"	jdbcType="varchar" />
		<result property="liftAttentionContent"		column="LIFT_ATTENTION_CONTENT"		javaType="String"	jdbcType="varchar" />
		<result property="liftBsSkiNm"				column="LIFT_BS_SKI_NM"				javaType="String"	jdbcType="varchar" />
		<result property="liftBsNomalStart"			column="LIFT_BS_NOMAL_START"		javaType="String"	jdbcType="char" />
		<result property="liftBsNomalEnd"			column="LIFT_BS_NOMAL_END"			javaType="String"	jdbcType="char" />
		<result property="liftBsNightFlg"			column="LIFT_BS_NIGHT_FLG"			javaType="String"	jdbcType="char" />
		<result property="liftBsNightDay"			column="LIFT_BS_NIGHT_DAY"			javaType="String"	jdbcType="varchar" />
		<result property="liftBsNightStart"			column="LIFT_BS_NIGHT_START"		javaType="String"	jdbcType="char" />
		<result property="liftBsNightEnd"			column="LIFT_BS_NIGHT_END"			javaType="String"	jdbcType="char" />
		<result property="liftBsMorningFlg"			column="LIFT_BS_MORNING_FLG"		javaType="String"	jdbcType="char" />
		<result property="liftBsMorningDay"			column="LIFT_BS_MORNING_DAY"		javaType="String"	jdbcType="varchar" />
		<result property="liftBsMorningStart"		column="LIFT_BS_MORNING_START"		javaType="String"	jdbcType="char" />
		<result property="liftBsMorningEnd"			column="LIFT_BS_MORNING_END"		javaType="String"	jdbcType="char" />
		<result property="liftSlSkiNm"				column="LIFT_SL_SKI_NM"				javaType="String"	jdbcType="varchar" />
		<result property="liftSlAdultKind1"			column="LIFT_SL_ADULT_KIND_1"		javaType="String"	jdbcType="varchar" />
		<result property="liftSlAdultNomal1"		column="LIFT_SL_ADULT_NOMAL_1"		javaType="String"	jdbcType="int" />
		<result property="liftSlAdultDiscount1"		column="LIFT_SL_ADULT_DISCOUNT_1"	javaType="String"	jdbcType="int" />
		<result property="liftSlAdultByu1"			column="LIFT_SL_ADULT_BYU_1"		javaType="String"	jdbcType="int" />
		<result property="liftSlAdultKind2"			column="LIFT_SL_ADULT_KIND_2"		javaType="String"	jdbcType="varchar" />
		<result property="liftSlAdultNomal2"		column="LIFT_SL_ADULT_NOMAL_2"		javaType="String"	jdbcType="int" />
		<result property="liftSlAdultDiscount2"		column="LIFT_SL_ADULT_DISCOUNT_2"	javaType="String"	jdbcType="int" />
		<result property="liftSlAdultByu2"			column="LIFT_SL_ADULT_BYU_2"		javaType="String"	jdbcType="int" />
		<result property="liftSlChildKind1"			column="LIFT_SL_CHILD_KIND_1"		javaType="String"	jdbcType="varchar" />
		<result property="liftSlChildNomal1"		column="LIFT_SL_CHILD_NOMAL_1"		javaType="String"	jdbcType="int" />
		<result property="liftSlChildDiscount1"		column="LIFT_SL_CHILD_DISCOUNT_1"	javaType="String"	jdbcType="int" />
		<result property="liftSlChildByu1"			column="LIFT_SL_CHILD_BYU_1"		javaType="String"	jdbcType="int" />
		<result property="liftSlChildKind2"			column="LIFT_SL_CHILD_KIND_2"		javaType="String"	jdbcType="varchar" />
		<result property="liftSlChildNomal2"		column="LIFT_SL_CHILD_NOMAL_2"		javaType="String"	jdbcType="int" />
		<result property="liftSlChildDiscount2"		column="LIFT_SL_CHILD_DISCOUNT_2"	javaType="String"	jdbcType="int" />
		<result property="liftSlChildByu2"			column="LIFT_SL_CHILD_BYU_2"		javaType="String"	jdbcType="int" />
		<result property="rentRequestWay"			column="RENT_REQUEST_WAY"			javaType="String"	jdbcType="varchar" />
		<result property="rentSkiDiscountFlg"		column="RENT_SKI_DISCOUNT_FLG"		javaType="String"	jdbcType="char" />
		<result property="rentSkiStockFlg"			column="RENT_SKI_STOCK_FLG"			javaType="String"	jdbcType="char" />
		<result property="rentSkiSpKind"			column="RENT_SKI_SP_KIND"			javaType="String"	jdbcType="varchar" />
		<result property="rentSkiHalfAdult1"		column="RENT_SKI_HALF_ADULT_1"		javaType="String"	jdbcType="int" />
		<result property="rentSkiHalfAdult2"		column="RENT_SKI_HALF_ADULT_2"		javaType="String"	jdbcType="int" />
		<result property="rentSkiHalfChild1"		column="RENT_SKI_HALF_CHILD_1"		javaType="String"	jdbcType="int" />
		<result property="rentSkiHalfChild2"		column="RENT_SKI_HALF_CHILD_2"		javaType="String"	jdbcType="int" />
		<result property="rentSkiDayAdult1"			column="RENT_SKI_DAY_ADULT_1"		javaType="String"	jdbcType="int" />
		<result property="rentSkiDayAdult2"			column="RENT_SKI_DAY_ADULT_2"		javaType="String"	jdbcType="int" />
		<result property="rentSkiDayChild1"			column="RENT_SKI_DAY_CHILD_1"		javaType="String"	jdbcType="int" />
		<result property="rentSkiDayChild2"			column="RENT_SKI_DAY_CHILD_2"		javaType="String"	jdbcType="int" />
		<result property="rentSkiSpAdult1"			column="RENT_SKI_SP_ADULT_1"		javaType="String"	jdbcType="int" />
		<result property="rentSkiSpAdult2"			column="RENT_SKI_SP_ADULT_2"		javaType="String"	jdbcType="int" />
		<result property="rentSkiSpChild1"			column="RENT_SKI_SP_CHILD_1"		javaType="String"	jdbcType="int" />
		<result property="rentSkiSpChild2"			column="RENT_SKI_SP_CHILD_2"		javaType="String"	jdbcType="int" />
		<result property="rentCvDiscountFlg"		column="RENT_CV_DISCOUNT_FLG"		javaType="String"	jdbcType="char" />
		<result property="rentCvStockFlg"			column="RENT_CV_STOCK_FLG"			javaType="String"	jdbcType="char" />
		<result property="rentCvSpKind"				column="RENT_CV_SP_KIND"			javaType="String"	jdbcType="varchar" />
		<result property="rentCvHalfAdult1"			column="RENT_CV_HALF_ADULT_1"		javaType="String"	jdbcType="int" />
		<result property="rentCvHalfAdult2"			column="RENT_CV_HALF_ADULT_2"		javaType="String"	jdbcType="int" />
		<result property="rentCvHalfChild1"			column="RENT_CV_HALF_CHILD_1"		javaType="String"	jdbcType="int" />
		<result property="rentCvHalfChild2"			column="RENT_CV_HALF_CHILD_2"		javaType="String"	jdbcType="int" />
		<result property="rentCvDayAdult1"			column="RENT_CV_DAY_ADULT_1"		javaType="String"	jdbcType="int" />
		<result property="rentCvDayAdult2"			column="RENT_CV_DAY_ADULT_2"		javaType="String"	jdbcType="int" />
		<result property="rentCvDayChild1"			column="RENT_CV_DAY_CHILD_1"		javaType="String"	jdbcType="int" />
		<result property="rentCvDayChild2"			column="RENT_CV_DAY_CHILD_2"		javaType="String"	jdbcType="int" />
		<result property="rentCvSpAdult1"			column="RENT_CV_SP_ADULT_1"			javaType="String"	jdbcType="int" />
		<result property="rentCvSpAdult2"			column="RENT_CV_SP_ADULT_2"			javaType="String"	jdbcType="int" />
		<result property="rentCvSpChild1"			column="RENT_CV_SP_CHILD_1"			javaType="String"	jdbcType="int" />
		<result property="rentCvSpChild2"			column="RENT_CV_SP_CHILD_2"			javaType="String"	jdbcType="int" />
		<result property="rentBdDiscountFlg"		column="RENT_BD_DISCOUNT_FLG"		javaType="String"	jdbcType="char" />
		<result property="rentBdStockFlg"			column="RENT_BD_STOCK_FLG"			javaType="String"	jdbcType="char" />
		<result property="rentBdSpKind"				column="RENT_BD_SP_KIND"			javaType="String"	jdbcType="varchar" />
		<result property="rentBdHalfAdult1"			column="RENT_BD_HALF_ADULT_1"		javaType="String"	jdbcType="int" />
		<result property="rentBdHalfAdult2"			column="RENT_BD_HALF_ADULT_2"		javaType="String"	jdbcType="int" />
		<result property="rentBdHalfChild1"			column="RENT_BD_HALF_CHILD_1"		javaType="String"	jdbcType="int" />
		<result property="rentBdHalfChild2"			column="RENT_BD_HALF_CHILD_2"		javaType="String"	jdbcType="int" />
		<result property="rentBdDayAdult1"			column="RENT_BD_DAY_ADULT_1"		javaType="String"	jdbcType="int" />
		<result property="rentBdDayAdult2"			column="RENT_BD_DAY_ADULT_2"		javaType="String"	jdbcType="int" />
		<result property="rentBdDayChild1"			column="RENT_BD_DAY_CHILD_1"		javaType="String"	jdbcType="int" />
		<result property="rentBdDayChild2"			column="RENT_BD_DAY_CHILD_2"		javaType="String"	jdbcType="int" />
		<result property="rentBdSpAdult1"			column="RENT_BD_SP_ADULT_1"			javaType="String"	jdbcType="int" />
		<result property="rentBdSpAdult2"			column="RENT_BD_SP_ADULT_2"			javaType="String"	jdbcType="int" />
		<result property="rentBdSpChild1"			column="RENT_BD_SP_CHILD_1"			javaType="String"	jdbcType="int" />
		<result property="rentBdSpChild2"			column="RENT_BD_SP_CHILD_2"			javaType="String"	jdbcType="int" />
		<result property="rentSkiwDiscountFlg"		column="RENT_SKIW_DISCOUNT_FLG"		javaType="String"	jdbcType="char" />
		<result property="rentSkiwStockFlg"			column="RENT_SKIW_STOCK_FLG"		javaType="String"	jdbcType="char" />
		<result property="rentSkiwSpKind"			column="RENT_SKIW_SP_KIND"			javaType="String"	jdbcType="varchar" />
		<result property="rentSkiwHalfAdult1"		column="RENT_SKIW_HALF_ADULT_1"		javaType="String"	jdbcType="int" />
		<result property="rentSkiwHalfAdult2"		column="RENT_SKIW_HALF_ADULT_2"		javaType="String"	jdbcType="int" />
		<result property="rentSkiwHalfChild1"		column="RENT_SKIW_HALF_CHILD_1"		javaType="String"	jdbcType="int" />
		<result property="rentSkiwHalfChild2"		column="RENT_SKIW_HALF_CHILD_2"		javaType="String"	jdbcType="int" />
		<result property="rentSkiwDayAdult1"		column="RENT_SKIW_DAY_ADULT_1"		javaType="String"	jdbcType="int" />
		<result property="rentSkiwDayAdult2"		column="RENT_SKIW_DAY_ADULT_2"		javaType="String"	jdbcType="int" />
		<result property="rentSkiwDayChild1"		column="RENT_SKIW_DAY_CHILD_1"		javaType="String"	jdbcType="int" />
		<result property="rentSkiwDayChild2"		column="RENT_SKIW_DAY_CHILD_2"		javaType="String"	jdbcType="int" />
		<result property="rentSkiwSpAdult1"			column="RENT_SKIW_SP_ADULT_1"		javaType="String"	jdbcType="int" />
		<result property="rentSkiwSpAdult2"			column="RENT_SKIW_SP_ADULT_2"		javaType="String"	jdbcType="int" />
		<result property="rentSkiwSpChild1"			column="RENT_SKIW_SP_CHILD_1"		javaType="String"	jdbcType="int" />
		<result property="rentSkiwSpChild2"			column="RENT_SKIW_SP_CHILD_2"		javaType="String"	jdbcType="int" />
		<result property="rentBdwDiscountFlg"		column="RENT_BDW_DISCOUNT_FLG"		javaType="String"	jdbcType="char" />
		<result property="rentBdwStockFlg"			column="RENT_BDW_STOCK_FLG"			javaType="String"	jdbcType="char" />
		<result property="rentBdwSpKind"			column="RENT_BDW_SP_KIND"			javaType="String"	jdbcType="varchar" />
		<result property="rentBdwHalfAdult1"		column="RENT_BDW_HALF_ADULT_1"		javaType="String"	jdbcType="int" />
		<result property="rentBdwHalfAdult2"		column="RENT_BDW_HALF_ADULT_2"		javaType="String"	jdbcType="int" />
		<result property="rentBdwHalfChild1"		column="RENT_BDW_HALF_CHILD_1"		javaType="String"	jdbcType="int" />
		<result property="rentBdwHalfChild2"		column="RENT_BDW_HALF_CHILD_2"		javaType="String"	jdbcType="int" />
		<result property="rentBdwDayAdult1"			column="RENT_BDW_DAY_ADULT_1"		javaType="String"	jdbcType="int" />
		<result property="rentBdwDayAdult2"			column="RENT_BDW_DAY_ADULT_2"		javaType="String"	jdbcType="int" />
		<result property="rentBdwDayChild1"			column="RENT_BDW_DAY_CHILD_1"		javaType="String"	jdbcType="int" />
		<result property="rentBdwDayChild2"			column="RENT_BDW_DAY_CHILD_2"		javaType="String"	jdbcType="int" />
		<result property="rentBdwSpAdult1"			column="RENT_BDW_SP_ADULT_1"		javaType="String"	jdbcType="int" />
		<result property="rentBdwSpAdult2"			column="RENT_BDW_SP_ADULT_2"		javaType="String"	jdbcType="int" />
		<result property="rentBdwSpChild1"			column="RENT_BDW_SP_CHILD_1"		javaType="String"	jdbcType="int" />
		<result property="rentBdwSpChild2"			column="RENT_BDW_SP_CHILD_2"		javaType="String"	jdbcType="int" />
		<result property="rentChageFlg"				column="RENT_CHAGE_FLG"				javaType="String"	jdbcType="char" />
		<result property="rentFsFlg"				column="RENT_FS_FLG"				javaType="String"	jdbcType="char" />
		<result property="rentFsChargeFlg"			column="RENT_FS_CHARGE_FLG"			javaType="String"	jdbcType="char" />
		<result property="rentSkiPriceMemo"			column="RENT_SKI_PRICE_MEMO"		javaType="String"	jdbcType="varchar" />
		<result property="schoolRequestWay"			column="SCHOOL_REQUEST_WAY"			javaType="String"	jdbcType="varchar" />
		<result property="schoolOtherContent"		column="SCHOOL_OTHER_CONTENT"		javaType="String"	jdbcType="varchar" />
		<result property="schoolSkiDiscountFlg"		column="SCHOOL_SKI_DISCOUNT_FLG"	javaType="String"	jdbcType="char" />
		<result property="schoolSkiTime1Hh"			column="SCHOOL_SKI_TIME1_HH"		javaType="String"	jdbcType="varchar" />
		<result property="schoolSkiTime1Mm"			column="SCHOOL_SKI_TIME1_MM"		javaType="String"	jdbcType="varchar" />
		<result property="schoolSkiTime2Hh"			column="SCHOOL_SKI_TIME2_HH"		javaType="String"	jdbcType="varchar" />
		<result property="schoolSkiTime2Mm"			column="SCHOOL_SKI_TIME2_MM"		javaType="String"	jdbcType="varchar" />
		<result property="schoolSkiHalfAdult1"		column="SCHOOL_SKI_HALF_ADULT_1"	javaType="String"	jdbcType="int" />
		<result property="schoolSkiHalfAdult2"		column="SCHOOL_SKI_HALF_ADULT_2"	javaType="String"	jdbcType="int" />
		<result property="schoolSkiHalfChild1"		column="SCHOOL_SKI_HALF_CHILD_1"	javaType="String"	jdbcType="int" />
		<result property="schoolSkiHalfChild2"		column="SCHOOL_SKI_HALF_CHILD_2"	javaType="String"	jdbcType="int" />
		<result property="schoolSkiTime1Adult1"		column="SCHOOL_SKI_TIME1_ADULT_1"	javaType="String"	jdbcType="int" />
		<result property="schoolSkiTime1Adult2"		column="SCHOOL_SKI_TIME1_ADULT_2"	javaType="String"	jdbcType="int" />
		<result property="schoolSkiTime2Adult1"		column="SCHOOL_SKI_TIME2_ADULT_1"	javaType="String"	jdbcType="int" />
		<result property="schoolSkiTime2Adult2"		column="SCHOOL_SKI_TIME2_ADULT_2"	javaType="String"	jdbcType="int" />
		<result property="schoolSkiDayAdult1"		column="SCHOOL_SKI_DAY_ADULT_1"		javaType="String"	jdbcType="int" />
		<result property="schoolSkiDayAdult2"		column="SCHOOL_SKI_DAY_ADULT_2"		javaType="String"	jdbcType="int" />
		<result property="schoolSkiDayChild1"		column="SCHOOL_SKI_DAY_CHILD_1"		javaType="String"	jdbcType="int" />
		<result property="schoolSkiDayChild2"		column="SCHOOL_SKI_DAY_CHILD_2"		javaType="String"	jdbcType="int" />
		<result property="schoolSkiTime1Child1"		column="SCHOOL_SKI_TIME1_CHILD_1"	javaType="String"	jdbcType="int" />
		<result property="schoolSkiTime1Child2"		column="SCHOOL_SKI_TIME1_CHILD_2"	javaType="String"	jdbcType="int" />
		<result property="schoolSkiTime2Child1"		column="SCHOOL_SKI_TIME2_CHILD_1"	javaType="String"	jdbcType="int" />
		<result property="schoolSkiTime2Child2"		column="SCHOOL_SKI_TIME2_CHILD_2"	javaType="String"	jdbcType="int" />
		<result property="schoolBdDiscountFlg"		column="SCHOOL_BD_DISCOUNT_FLG"		javaType="String"	jdbcType="char" />
		<result property="schoolBdTime1Hh"			column="SCHOOL_BD_TIME1_HH"			javaType="String"	jdbcType="varchar" />
		<result property="schoolBdTime1Mm"			column="SCHOOL_BD_TIME1_MM"			javaType="String"	jdbcType="varchar" />
		<result property="schoolBdTime2Hh"			column="SCHOOL_BD_TIME2_HH"			javaType="String"	jdbcType="varchar" />
		<result property="schoolBdTime2Mm"			column="SCHOOL_BD_TIME2_MM"			javaType="String"	jdbcType="varchar" />
		<result property="schoolBdHalfAdult1"		column="SCHOOL_BD_HALF_ADULT_1"		javaType="String"	jdbcType="int" />
		<result property="schoolBdHalfAdult2"		column="SCHOOL_BD_HALF_ADULT_2"		javaType="String"	jdbcType="int" />
		<result property="schoolBdHalfChild1"		column="SCHOOL_BD_HALF_CHILD_1"		javaType="String"	jdbcType="int" />
		<result property="schoolBdHalfChild2"		column="SCHOOL_BD_HALF_CHILD_2"		javaType="String"	jdbcType="int" />
		<result property="schoolBdTime1Adult1"		column="SCHOOL_BD_TIME1_ADULT_1"	javaType="String"	jdbcType="int" />
		<result property="schoolBdTime1Adult2"		column="SCHOOL_BD_TIME1_ADULT_2"	javaType="String"	jdbcType="int" />
		<result property="schoolBdTime2Adult1"		column="SCHOOL_BD_TIME2_ADULT_1"	javaType="String"	jdbcType="int" />
		<result property="schoolBdTime2Adult2"		column="SCHOOL_BD_TIME2_ADULT_2"	javaType="String"	jdbcType="int" />
		<result property="schoolBdDayAdult1"		column="SCHOOL_BD_DAY_ADULT_1"		javaType="String"	jdbcType="int" />
		<result property="schoolBdDayAdult2"		column="SCHOOL_BD_DAY_ADULT_2"		javaType="String"	jdbcType="int" />
		<result property="schoolBdDayChild1"		column="SCHOOL_BD_DAY_CHILD_1"		javaType="String"	jdbcType="int" />
		<result property="schoolBdDayChild2"		column="SCHOOL_BD_DAY_CHILD_2"		javaType="String"	jdbcType="int" />
		<result property="schoolBdTime1Child1"		column="SCHOOL_BD_TIME1_CHILD_1"	javaType="String"	jdbcType="int" />
		<result property="schoolBdTime1Child2"		column="SCHOOL_BD_TIME1_CHILD_2"	javaType="String"	jdbcType="int" />
		<result property="schoolBdTime2Child1"		column="SCHOOL_BD_TIME2_CHILD_1"	javaType="String"	jdbcType="int" />
		<result property="schoolBdTime2Child2"		column="SCHOOL_BD_TIME2_CHILD_2"	javaType="String"	jdbcType="int" />
		<result property="schoolPriceMemo"			column="SCHOOL_PRICE_MEMO"			javaType="String"	jdbcType="varchar" />
		<result property="skiCatchcopy"				column="SKI_CATCHCOPY"				javaType="String"	jdbcType="varchar" />

		<result property="careerNo"					column="CAREER_NO"					javaType="Integer"	jdbcType="smallint"/>
	</resultMap>

	<sql id="DFM_subQuery_DFacilityLiftSki_AllColumns">
		 [FACILITY_CD]
		,[KIND_FLG]
		,[FACILITY_PATTERN]
		,[LIFT_TK_CONTAIN_FLG]
		,[LIFT_TK_SKI_NM]
		,[LIFT_TK_KIND]
		,[LIFT_TK_OTHER_CONTENT]
		,[LIFT_YK_STAY_NIGHT]
		,[LIFT_YK_MORNING]
		,[LIFT_YK_BACK_NIGHT]
		,[LIFT_YK_GONDOLA]
		,[LIFT_YK_CABLE]
		,[LIFT_YK_OTHER]
		,[LIFT_YK_OTHER_CONTENT]
		,[LIFT_CH_WAY_FLG]
		,[LIFT_CH_WAY_OTHER_CONTENT]
		,[LIFT_ATTENTION_CONTENT]
		,[LIFT_BS_SKI_NM]
		,[LIFT_BS_NOMAL_START]
		,[LIFT_BS_NOMAL_END]
		,[LIFT_BS_NIGHT_FLG]
		,[LIFT_BS_NIGHT_DAY]
		,[LIFT_BS_NIGHT_START]
		,[LIFT_BS_NIGHT_END]
		,[LIFT_BS_MORNING_FLG]
		,[LIFT_BS_MORNING_DAY]
		,[LIFT_BS_MORNING_START]
		,[LIFT_BS_MORNING_END]
		,[LIFT_SL_SKI_NM]
		,[LIFT_SL_ADULT_KIND_1]
		,[LIFT_SL_ADULT_NOMAL_1]
		,[LIFT_SL_ADULT_DISCOUNT_1]
		,[LIFT_SL_ADULT_BYU_1]
		,[LIFT_SL_ADULT_KIND_2]
		,[LIFT_SL_ADULT_NOMAL_2]
		,[LIFT_SL_ADULT_DISCOUNT_2]
		,[LIFT_SL_ADULT_BYU_2]
		,[LIFT_SL_CHILD_KIND_1]
		,[LIFT_SL_CHILD_NOMAL_1]
		,[LIFT_SL_CHILD_DISCOUNT_1]
		,[LIFT_SL_CHILD_BYU_1]
		,[LIFT_SL_CHILD_KIND_2]
		,[LIFT_SL_CHILD_NOMAL_2]
		,[LIFT_SL_CHILD_DISCOUNT_2]
		,[LIFT_SL_CHILD_BYU_2]
		,[RENT_REQUEST_WAY]
		,[RENT_SKI_DISCOUNT_FLG]
		,[RENT_SKI_STOCK_FLG]
		,[RENT_SKI_SP_KIND]
		,[RENT_SKI_HALF_ADULT_1]
		,[RENT_SKI_HALF_ADULT_2]
		,[RENT_SKI_HALF_CHILD_1]
		,[RENT_SKI_HALF_CHILD_2]
		,[RENT_SKI_DAY_ADULT_1]
		,[RENT_SKI_DAY_ADULT_2]
		,[RENT_SKI_DAY_CHILD_1]
		,[RENT_SKI_DAY_CHILD_2]
		,[RENT_SKI_SP_ADULT_1]
		,[RENT_SKI_SP_ADULT_2]
		,[RENT_SKI_SP_CHILD_1]
		,[RENT_SKI_SP_CHILD_2]
		,[RENT_CV_DISCOUNT_FLG]
		,[RENT_CV_STOCK_FLG]
		,[RENT_CV_SP_KIND]
		,[RENT_CV_HALF_ADULT_1]
		,[RENT_CV_HALF_ADULT_2]
		,[RENT_CV_HALF_CHILD_1]
		,[RENT_CV_HALF_CHILD_2]
		,[RENT_CV_DAY_ADULT_1]
		,[RENT_CV_DAY_ADULT_2]
		,[RENT_CV_DAY_CHILD_1]
		,[RENT_CV_DAY_CHILD_2]
		,[RENT_CV_SP_ADULT_1]
		,[RENT_CV_SP_ADULT_2]
		,[RENT_CV_SP_CHILD_1]
		,[RENT_CV_SP_CHILD_2]
		,[RENT_BD_DISCOUNT_FLG]
		,[RENT_BD_STOCK_FLG]
		,[RENT_BD_SP_KIND]
		,[RENT_BD_HALF_ADULT_1]
		,[RENT_BD_HALF_ADULT_2]
		,[RENT_BD_HALF_CHILD_1]
		,[RENT_BD_HALF_CHILD_2]
		,[RENT_BD_DAY_ADULT_1]
		,[RENT_BD_DAY_ADULT_2]
		,[RENT_BD_DAY_CHILD_1]
		,[RENT_BD_DAY_CHILD_2]
		,[RENT_BD_SP_ADULT_1]
		,[RENT_BD_SP_ADULT_2]
		,[RENT_BD_SP_CHILD_1]
		,[RENT_BD_SP_CHILD_2]
		,[RENT_SKIW_DISCOUNT_FLG]
		,[RENT_SKIW_STOCK_FLG]
		,[RENT_SKIW_SP_KIND]
		,[RENT_SKIW_HALF_ADULT_1]
		,[RENT_SKIW_HALF_ADULT_2]
		,[RENT_SKIW_HALF_CHILD_1]
		,[RENT_SKIW_HALF_CHILD_2]
		,[RENT_SKIW_DAY_ADULT_1]
		,[RENT_SKIW_DAY_ADULT_2]
		,[RENT_SKIW_DAY_CHILD_1]
		,[RENT_SKIW_DAY_CHILD_2]
		,[RENT_SKIW_SP_ADULT_1]
		,[RENT_SKIW_SP_ADULT_2]
		,[RENT_SKIW_SP_CHILD_1]
		,[RENT_SKIW_SP_CHILD_2]
		,[RENT_BDW_DISCOUNT_FLG]
		,[RENT_BDW_STOCK_FLG]
		,[RENT_BDW_SP_KIND]
		,[RENT_BDW_HALF_ADULT_1]
		,[RENT_BDW_HALF_ADULT_2]
		,[RENT_BDW_HALF_CHILD_1]
		,[RENT_BDW_HALF_CHILD_2]
		,[RENT_BDW_DAY_ADULT_1]
		,[RENT_BDW_DAY_ADULT_2]
		,[RENT_BDW_DAY_CHILD_1]
		,[RENT_BDW_DAY_CHILD_2]
		,[RENT_BDW_SP_ADULT_1]
		,[RENT_BDW_SP_ADULT_2]
		,[RENT_BDW_SP_CHILD_1]
		,[RENT_BDW_SP_CHILD_2]
		,[RENT_CHAGE_FLG]
		,[RENT_FS_FLG]
		,[RENT_FS_CHARGE_FLG]
		,[RENT_SKI_PRICE_MEMO]
		,[SCHOOL_REQUEST_WAY]
		,[SCHOOL_OTHER_CONTENT]
		,[SCHOOL_SKI_DISCOUNT_FLG]
		,[SCHOOL_SKI_TIME1_HH]
		,[SCHOOL_SKI_TIME1_MM]
		,[SCHOOL_SKI_TIME2_HH]
		,[SCHOOL_SKI_TIME2_MM]
		,[SCHOOL_SKI_HALF_ADULT_1]
		,[SCHOOL_SKI_HALF_ADULT_2]
		,[SCHOOL_SKI_HALF_CHILD_1]
		,[SCHOOL_SKI_HALF_CHILD_2]
		,[SCHOOL_SKI_TIME1_ADULT_1]
		,[SCHOOL_SKI_TIME1_ADULT_2]
		,[SCHOOL_SKI_TIME2_ADULT_1]
		,[SCHOOL_SKI_TIME2_ADULT_2]
		,[SCHOOL_SKI_DAY_ADULT_1]
		,[SCHOOL_SKI_DAY_ADULT_2]
		,[SCHOOL_SKI_DAY_CHILD_1]
		,[SCHOOL_SKI_DAY_CHILD_2]
		,[SCHOOL_SKI_TIME1_CHILD_1]
		,[SCHOOL_SKI_TIME1_CHILD_2]
		,[SCHOOL_SKI_TIME2_CHILD_1]
		,[SCHOOL_SKI_TIME2_CHILD_2]
		,[SCHOOL_BD_DISCOUNT_FLG]
		,[SCHOOL_BD_TIME1_HH]
		,[SCHOOL_BD_TIME1_MM]
		,[SCHOOL_BD_TIME2_HH]
		,[SCHOOL_BD_TIME2_MM]
		,[SCHOOL_BD_HALF_ADULT_1]
		,[SCHOOL_BD_HALF_ADULT_2]
		,[SCHOOL_BD_HALF_CHILD_1]
		,[SCHOOL_BD_HALF_CHILD_2]
		,[SCHOOL_BD_TIME1_ADULT_1]
		,[SCHOOL_BD_TIME1_ADULT_2]
		,[SCHOOL_BD_TIME2_ADULT_1]
		,[SCHOOL_BD_TIME2_ADULT_2]
		,[SCHOOL_BD_DAY_ADULT_1]
		,[SCHOOL_BD_DAY_ADULT_2]
		,[SCHOOL_BD_DAY_CHILD_1]
		,[SCHOOL_BD_DAY_CHILD_2]
		,[SCHOOL_BD_TIME1_CHILD_1]
		,[SCHOOL_BD_TIME1_CHILD_2]
		,[SCHOOL_BD_TIME2_CHILD_1]
		,[SCHOOL_BD_TIME2_CHILD_2]
		,[SCHOOL_PRICE_MEMO]
		,[SKI_CATCHCOPY]
	</sql>

	<select id="DFM_fetchDFacilityLiftSkiHistory" resultMap="DFM_DFacilityLiftSkiHistory_RM" parameterClass="DFacilityManageKey">
		SELECT
			<include refid="DFM_subQuery_DFacilityLiftSki_AllColumns"/>
			,[CAREER_NO]
		FROM (
				SELECT
					[D_FACILITY_LIFT_SKI_HISTORY].*
				FROM
					[D_FACILITY_LIFT_SKI_HISTORY]
				INNER JOIN
					[D_FACILITY_MANAGE] ON (
							[D_FACILITY_MANAGE].[FACILITY_CD]		= [D_FACILITY_LIFT_SKI_HISTORY].[FACILITY_CD]
						AND [D_FACILITY_MANAGE].[KIND_FLG]			= [D_FACILITY_LIFT_SKI_HISTORY].[KIND_FLG]
						AND [D_FACILITY_MANAGE].[FACILITY_SORTS]	= #facilitySorts#
						AND [D_FACILITY_MANAGE].[FACILITY_PATTERN]	= [D_FACILITY_LIFT_SKI_HISTORY].[FACILITY_PATTERN]
						AND [D_FACILITY_MANAGE].[BODY_CAREER_NO]	= [D_FACILITY_LIFT_SKI_HISTORY].[CAREER_NO]
				)
				WHERE
						[D_FACILITY_MANAGE].[FACILITY_CD]		= #facilityCd#
					AND [D_FACILITY_MANAGE].[KIND_FLG]			= #kindFlg#
					AND [D_FACILITY_MANAGE].[FACILITY_PATTERN]	= #facilityPattern#
					AND [D_FACILITY_MANAGE].[CAREER_NO]			= #careerNo#
		) TMP01
	</select>

	<select id="DFM_fetchDFacilityLiftSkiByPlanAnsNo" resultMap="DFM_DFacilityLiftSkiHistory_RM" parameterClass="DFacilityManageSearchData">
		SELECT
			<include refid="DFM_subQuery_DFacilityLiftSki_AllColumns"/>
			,NULL AS [CAREER_NO]
		FROM (
			SELECT
				[D_FACILITY_LIFT_SKI].*
			FROM
				[D_FACILITY_LIFT_SKI]
			INNER JOIN
				[D_PLAN_ANS_FACILITY] ON (
					[D_FACILITY_LIFT_SKI].[FACILITY_CD]			= [D_PLAN_ANS_FACILITY].[FACILITY_CD]
				AND [D_FACILITY_LIFT_SKI].[KIND_FLG]			= [D_PLAN_ANS_FACILITY].[KIND_FLG]
				AND [D_FACILITY_LIFT_SKI].[FACILITY_PATTERN]	= [D_PLAN_ANS_FACILITY].[FACILITY_PATTERN_NO3]
			)
			WHERE
				[D_PLAN_ANS_FACILITY].[PLAN_ANS_NO]	= #planAnsNo#
		) TMP01
	</select>

	<select id="DFM_fetchDFacilityLiftSkiByPk" resultMap="DFM_DFacilityLiftSkiHistory_RM" parameterClass="DFacilityManageSearchData">
		SELECT
			<include refid="DFM_subQuery_DFacilityLiftSki_AllColumns"/>
			,NULL AS [CAREER_NO]
		FROM (
			SELECT
				[D_FACILITY_LIFT_SKI].*
			FROM
				[D_FACILITY_LIFT_SKI]
			WHERE
					[D_FACILITY_LIFT_SKI].[FACILITY_CD]			= #facilityCd#
				AND [D_FACILITY_LIFT_SKI].[KIND_FLG]			= #kindFlg#
				AND [D_FACILITY_LIFT_SKI].[FACILITY_PATTERN]	= #facilityPattern#
		) TMP01
	</select>

	<select id="DFM_fetchAFacilityLiftSkiByPk" resultMap="DFM_DFacilityLiftSkiHistory_RM" parameterClass="DFacilityManageSearchData">
		SELECT
			<include refid="DFM_subQuery_DFacilityLiftSki_AllColumns"/>
			,NULL AS [CAREER_NO]
		FROM (
			SELECT
				[A_FACILITY_LIFT_SKI].*

				,NULL			AS [STATION_DIV2]
				,NULL			AS [RENT_SKI_PRICE_MEMO]
				,NULL			AS [SCHOOL_SKI_TIME1_HH]
				,NULL			AS [SCHOOL_SKI_TIME1_MM]
				,NULL			AS [SCHOOL_SKI_TIME2_HH]
				,NULL			AS [SCHOOL_SKI_TIME2_MM]
				,NULL			AS [SCHOOL_SKI_TIME1_ADULT_1]
				,NULL			AS [SCHOOL_SKI_TIME1_ADULT_2]
				,NULL			AS [SCHOOL_SKI_TIME2_ADULT_1]
				,NULL			AS [SCHOOL_SKI_TIME2_ADULT_2]
				,NULL			AS [SCHOOL_SKI_TIME1_CHILD_1]
				,NULL			AS [SCHOOL_SKI_TIME1_CHILD_2]
				,NULL			AS [SCHOOL_SKI_TIME2_CHILD_1]
				,NULL			AS [SCHOOL_SKI_TIME2_CHILD_2]
				,NULL			AS [SCHOOL_BD_TIME1_HH]
				,NULL			AS [SCHOOL_BD_TIME1_MM]
				,NULL			AS [SCHOOL_BD_TIME2_HH]
				,NULL			AS [SCHOOL_BD_TIME2_MM]
				,NULL			AS [SCHOOL_BD_TIME1_ADULT_1]
				,NULL			AS [SCHOOL_BD_TIME1_ADULT_2]
				,NULL			AS [SCHOOL_BD_TIME2_ADULT_1]
				,NULL			AS [SCHOOL_BD_TIME2_ADULT_2]
				,NULL			AS [SCHOOL_BD_TIME1_CHILD_1]
				,NULL			AS [SCHOOL_BD_TIME1_CHILD_2]
				,NULL			AS [SCHOOL_BD_TIME2_CHILD_1]
				,NULL			AS [SCHOOL_BD_TIME2_CHILD_2]
				,NULL			AS [SCHOOL_PRICE_MEMO]
			FROM
				[A_FACILITY_LIFT_SKI]
			WHERE
					[A_FACILITY_LIFT_SKI].[FACILITY_CD]			= #facilityCd#
				AND [A_FACILITY_LIFT_SKI].[KIND_FLG]			= #kindFlg#
				AND [A_FACILITY_LIFT_SKI].[FACILITY_PATTERN]	= #facilityPattern#
		) TMP01
	</select>

	<insert id="DFM_insertDFacilityLiftSkiHistory" parameterClass="DFacilityLiftSkiHistory">
		INSERT INTO
			[D_FACILITY_LIFT_SKI_HISTORY]
		(
			 [FACILITY_CD]
			,[KIND_FLG]
			,[FACILITY_PATTERN]
			,[CAREER_NO]
			,[LIFT_TK_CONTAIN_FLG]
			,[LIFT_TK_SKI_NM]
			,[LIFT_TK_KIND]
			,[LIFT_TK_OTHER_CONTENT]
			,[LIFT_YK_STAY_NIGHT]
			,[LIFT_YK_MORNING]
			,[LIFT_YK_BACK_NIGHT]
			,[LIFT_YK_GONDOLA]
			,[LIFT_YK_CABLE]
			,[LIFT_YK_OTHER]
			,[LIFT_YK_OTHER_CONTENT]
			,[LIFT_CH_WAY_FLG]
			,[LIFT_CH_WAY_OTHER_CONTENT]
			,[LIFT_ATTENTION_CONTENT]
			,[LIFT_BS_SKI_NM]
			,[LIFT_BS_NOMAL_START]
			,[LIFT_BS_NOMAL_END]
			,[LIFT_BS_NIGHT_FLG]
			,[LIFT_BS_NIGHT_DAY]
			,[LIFT_BS_NIGHT_START]
			,[LIFT_BS_NIGHT_END]
			,[LIFT_BS_MORNING_FLG]
			,[LIFT_BS_MORNING_DAY]
			,[LIFT_BS_MORNING_START]
			,[LIFT_BS_MORNING_END]
			,[LIFT_SL_SKI_NM]
			,[LIFT_SL_ADULT_KIND_1]
			<isNotEmpty property="liftSlAdultNomal1">,[LIFT_SL_ADULT_NOMAL_1]</isNotEmpty>
			<isNotEmpty property="liftSlAdultDiscount1">,[LIFT_SL_ADULT_DISCOUNT_1]</isNotEmpty>
			<isNotEmpty property="liftSlAdultByu1">,[LIFT_SL_ADULT_BYU_1]</isNotEmpty>
			,[LIFT_SL_ADULT_KIND_2]
			<isNotEmpty property="liftSlAdultNomal2">,[LIFT_SL_ADULT_NOMAL_2]</isNotEmpty>
			<isNotEmpty property="liftSlAdultDiscount2">,[LIFT_SL_ADULT_DISCOUNT_2]</isNotEmpty>
			<isNotEmpty property="liftSlAdultByu2">,[LIFT_SL_ADULT_BYU_2]</isNotEmpty>
			,[LIFT_SL_CHILD_KIND_1]
			<isNotEmpty property="liftSlChildNomal1">,[LIFT_SL_CHILD_NOMAL_1]</isNotEmpty>
			<isNotEmpty property="liftSlChildDiscount1">,[LIFT_SL_CHILD_DISCOUNT_1]</isNotEmpty>
			<isNotEmpty property="liftSlChildByu1">,[LIFT_SL_CHILD_BYU_1]</isNotEmpty>
			,[LIFT_SL_CHILD_KIND_2]
			<isNotEmpty property="liftSlChildNomal2">,[LIFT_SL_CHILD_NOMAL_2]</isNotEmpty>
			<isNotEmpty property="liftSlChildDiscount2">,[LIFT_SL_CHILD_DISCOUNT_2]</isNotEmpty>
			<isNotEmpty property="liftSlChildByu2">,[LIFT_SL_CHILD_BYU_2]</isNotEmpty>
			,[RENT_REQUEST_WAY]
			,[RENT_SKI_DISCOUNT_FLG]
			,[RENT_SKI_STOCK_FLG]
			,[RENT_SKI_SP_KIND]
			<isNotEmpty property="rentSkiHalfAdult1">,[RENT_SKI_HALF_ADULT_1]</isNotEmpty>
			<isNotEmpty property="rentSkiHalfAdult2">,[RENT_SKI_HALF_ADULT_2]</isNotEmpty>
			<isNotEmpty property="rentSkiHalfChild1">,[RENT_SKI_HALF_CHILD_1]</isNotEmpty>
			<isNotEmpty property="rentSkiHalfChild2">,[RENT_SKI_HALF_CHILD_2]</isNotEmpty>
			<isNotEmpty property="rentSkiDayAdult1">,[RENT_SKI_DAY_ADULT_1]</isNotEmpty>
			<isNotEmpty property="rentSkiDayAdult2">,[RENT_SKI_DAY_ADULT_2]</isNotEmpty>
			<isNotEmpty property="rentSkiDayChild1">,[RENT_SKI_DAY_CHILD_1]</isNotEmpty>
			<isNotEmpty property="rentSkiDayChild2">,[RENT_SKI_DAY_CHILD_2]</isNotEmpty>
			<isNotEmpty property="rentSkiSpAdult1">,[RENT_SKI_SP_ADULT_1]</isNotEmpty>
			<isNotEmpty property="rentSkiSpAdult2">,[RENT_SKI_SP_ADULT_2]</isNotEmpty>
			<isNotEmpty property="rentSkiSpChild1">,[RENT_SKI_SP_CHILD_1]</isNotEmpty>
			<isNotEmpty property="rentSkiSpChild2">,[RENT_SKI_SP_CHILD_2]</isNotEmpty>
			,[RENT_CV_DISCOUNT_FLG]
			,[RENT_CV_STOCK_FLG]
			,[RENT_CV_SP_KIND]
			<isNotEmpty property="rentCvHalfAdult1">,[RENT_CV_HALF_ADULT_1]</isNotEmpty>
			<isNotEmpty property="rentCvHalfAdult2">,[RENT_CV_HALF_ADULT_2]</isNotEmpty>
			<isNotEmpty property="rentCvHalfChild1">,[RENT_CV_HALF_CHILD_1]</isNotEmpty>
			<isNotEmpty property="rentCvHalfChild2">,[RENT_CV_HALF_CHILD_2]</isNotEmpty>
			<isNotEmpty property="rentCvDayAdult1">,[RENT_CV_DAY_ADULT_1]</isNotEmpty>
			<isNotEmpty property="rentCvDayAdult2">,[RENT_CV_DAY_ADULT_2]</isNotEmpty>
			<isNotEmpty property="rentCvDayChild1">,[RENT_CV_DAY_CHILD_1]</isNotEmpty>
			<isNotEmpty property="rentCvDayChild2">,[RENT_CV_DAY_CHILD_2]</isNotEmpty>
			<isNotEmpty property="rentCvSpAdult1">,[RENT_CV_SP_ADULT_1]</isNotEmpty>
			<isNotEmpty property="rentCvSpAdult2">,[RENT_CV_SP_ADULT_2]</isNotEmpty>
			<isNotEmpty property="rentCvSpChild1">,[RENT_CV_SP_CHILD_1]</isNotEmpty>
			<isNotEmpty property="rentCvSpChild2">,[RENT_CV_SP_CHILD_2]</isNotEmpty>
			,[RENT_BD_DISCOUNT_FLG]
			,[RENT_BD_STOCK_FLG]
			,[RENT_BD_SP_KIND]
			<isNotEmpty property="rentBdHalfAdult1">,[RENT_BD_HALF_ADULT_1]</isNotEmpty>
			<isNotEmpty property="rentBdHalfAdult2">,[RENT_BD_HALF_ADULT_2]</isNotEmpty>
			<isNotEmpty property="rentBdHalfChild1">,[RENT_BD_HALF_CHILD_1]</isNotEmpty>
			<isNotEmpty property="rentBdHalfChild2">,[RENT_BD_HALF_CHILD_2]</isNotEmpty>
			<isNotEmpty property="rentBdDayAdult1">,[RENT_BD_DAY_ADULT_1]</isNotEmpty>
			<isNotEmpty property="rentBdDayAdult2">,[RENT_BD_DAY_ADULT_2]</isNotEmpty>
			<isNotEmpty property="rentBdDayChild1">,[RENT_BD_DAY_CHILD_1]</isNotEmpty>
			<isNotEmpty property="rentBdDayChild2">,[RENT_BD_DAY_CHILD_2]</isNotEmpty>
			<isNotEmpty property="rentBdSpAdult1">,[RENT_BD_SP_ADULT_1]</isNotEmpty>
			<isNotEmpty property="rentBdSpAdult2">,[RENT_BD_SP_ADULT_2]</isNotEmpty>
			<isNotEmpty property="rentBdSpChild1">,[RENT_BD_SP_CHILD_1]</isNotEmpty>
			<isNotEmpty property="rentBdSpChild2">,[RENT_BD_SP_CHILD_2]</isNotEmpty>
			,[RENT_SKIW_DISCOUNT_FLG]
			,[RENT_SKIW_STOCK_FLG]
			,[RENT_SKIW_SP_KIND]
			<isNotEmpty property="rentSkiwHalfAdult1">,[RENT_SKIW_HALF_ADULT_1]</isNotEmpty>
			<isNotEmpty property="rentSkiwHalfAdult2">,[RENT_SKIW_HALF_ADULT_2]</isNotEmpty>
			<isNotEmpty property="rentSkiwHalfChild1">,[RENT_SKIW_HALF_CHILD_1]</isNotEmpty>
			<isNotEmpty property="rentSkiwHalfChild2">,[RENT_SKIW_HALF_CHILD_2]</isNotEmpty>
			<isNotEmpty property="rentSkiwDayAdult1">,[RENT_SKIW_DAY_ADULT_1]</isNotEmpty>
			<isNotEmpty property="rentSkiwDayAdult2">,[RENT_SKIW_DAY_ADULT_2]</isNotEmpty>
			<isNotEmpty property="rentSkiwDayChild1">,[RENT_SKIW_DAY_CHILD_1]</isNotEmpty>
			<isNotEmpty property="rentSkiwDayChild2">,[RENT_SKIW_DAY_CHILD_2]</isNotEmpty>
			<isNotEmpty property="rentSkiwSpAdult1">,[RENT_SKIW_SP_ADULT_1]</isNotEmpty>
			<isNotEmpty property="rentSkiwSpAdult2">,[RENT_SKIW_SP_ADULT_2]</isNotEmpty>
			<isNotEmpty property="rentSkiwSpChild1">,[RENT_SKIW_SP_CHILD_1]</isNotEmpty>
			<isNotEmpty property="rentSkiwSpChild2">,[RENT_SKIW_SP_CHILD_2]</isNotEmpty>
			,[RENT_BDW_DISCOUNT_FLG]
			,[RENT_BDW_STOCK_FLG]
			,[RENT_BDW_SP_KIND]
			<isNotEmpty property="rentBdwHalfAdult1">,[RENT_BDW_HALF_ADULT_1]</isNotEmpty>
			<isNotEmpty property="rentBdwHalfAdult2">,[RENT_BDW_HALF_ADULT_2]</isNotEmpty>
			<isNotEmpty property="rentBdwHalfChild1">,[RENT_BDW_HALF_CHILD_1]</isNotEmpty>
			<isNotEmpty property="rentBdwHalfChild2">,[RENT_BDW_HALF_CHILD_2]</isNotEmpty>
			<isNotEmpty property="rentBdwDayAdult1">,[RENT_BDW_DAY_ADULT_1]</isNotEmpty>
			<isNotEmpty property="rentBdwDayAdult2">,[RENT_BDW_DAY_ADULT_2]</isNotEmpty>
			<isNotEmpty property="rentBdwDayChild1">,[RENT_BDW_DAY_CHILD_1]</isNotEmpty>
			<isNotEmpty property="rentBdwDayChild2">,[RENT_BDW_DAY_CHILD_2]</isNotEmpty>
			<isNotEmpty property="rentBdwSpAdult1">,[RENT_BDW_SP_ADULT_1]</isNotEmpty>
			<isNotEmpty property="rentBdwSpAdult2">,[RENT_BDW_SP_ADULT_2]</isNotEmpty>
			<isNotEmpty property="rentBdwSpChild1">,[RENT_BDW_SP_CHILD_1]</isNotEmpty>
			<isNotEmpty property="rentBdwSpChild2">,[RENT_BDW_SP_CHILD_2]</isNotEmpty>
			,[RENT_CHAGE_FLG]
			,[RENT_FS_FLG]
			,[RENT_FS_CHARGE_FLG]
			,[RENT_SKI_PRICE_MEMO]
			,[SCHOOL_REQUEST_WAY]
			,[SCHOOL_OTHER_CONTENT]
			,[SCHOOL_SKI_DISCOUNT_FLG]
			,[SCHOOL_SKI_TIME1_HH]
			,[SCHOOL_SKI_TIME1_MM]
			,[SCHOOL_SKI_TIME2_HH]
			,[SCHOOL_SKI_TIME2_MM]
			<isNotEmpty property="schoolSkiHalfAdult1">,[SCHOOL_SKI_HALF_ADULT_1]</isNotEmpty>
			<isNotEmpty property="schoolSkiHalfAdult2">,[SCHOOL_SKI_HALF_ADULT_2]</isNotEmpty>
			<isNotEmpty property="schoolSkiHalfChild1">,[SCHOOL_SKI_HALF_CHILD_1]</isNotEmpty>
			<isNotEmpty property="schoolSkiHalfChild2">,[SCHOOL_SKI_HALF_CHILD_2]</isNotEmpty>
			<isNotEmpty property="schoolSkiTime1Adult1">,[SCHOOL_SKI_TIME1_ADULT_1]</isNotEmpty>
			<isNotEmpty property="schoolSkiTime1Adult2">,[SCHOOL_SKI_TIME1_ADULT_2]</isNotEmpty>
			<isNotEmpty property="schoolSkiTime2Adult1">,[SCHOOL_SKI_TIME2_ADULT_1]</isNotEmpty>
			<isNotEmpty property="schoolSkiTime2Adult2">,[SCHOOL_SKI_TIME2_ADULT_2]</isNotEmpty>
			<isNotEmpty property="schoolSkiDayAdult1">,[SCHOOL_SKI_DAY_ADULT_1]</isNotEmpty>
			<isNotEmpty property="schoolSkiDayAdult2">,[SCHOOL_SKI_DAY_ADULT_2]</isNotEmpty>
			<isNotEmpty property="schoolSkiDayChild1">,[SCHOOL_SKI_DAY_CHILD_1]</isNotEmpty>
			<isNotEmpty property="schoolSkiDayChild2">,[SCHOOL_SKI_DAY_CHILD_2]</isNotEmpty>
			<isNotEmpty property="schoolSkiTime1Child1">,[SCHOOL_SKI_TIME1_CHILD_1]</isNotEmpty>
			<isNotEmpty property="schoolSkiTime1Child2">,[SCHOOL_SKI_TIME1_CHILD_2]</isNotEmpty>
			<isNotEmpty property="schoolSkiTime2Child1">,[SCHOOL_SKI_TIME2_CHILD_1]</isNotEmpty>
			<isNotEmpty property="schoolSkiTime2Child2">,[SCHOOL_SKI_TIME2_CHILD_2]</isNotEmpty>
			,[SCHOOL_BD_DISCOUNT_FLG]
			,[SCHOOL_BD_TIME1_HH]
			,[SCHOOL_BD_TIME1_MM]
			,[SCHOOL_BD_TIME2_HH]
			,[SCHOOL_BD_TIME2_MM]
			<isNotEmpty property="schoolBdHalfAdult1">,[SCHOOL_BD_HALF_ADULT_1]</isNotEmpty>
			<isNotEmpty property="schoolBdHalfAdult2">,[SCHOOL_BD_HALF_ADULT_2]</isNotEmpty>
			<isNotEmpty property="schoolBdHalfChild1">,[SCHOOL_BD_HALF_CHILD_1]</isNotEmpty>
			<isNotEmpty property="schoolBdHalfChild2">,[SCHOOL_BD_HALF_CHILD_2]</isNotEmpty>
			<isNotEmpty property="schoolBdTime1Adult1">,[SCHOOL_BD_TIME1_ADULT_1]</isNotEmpty>
			<isNotEmpty property="schoolBdTime1Adult2">,[SCHOOL_BD_TIME1_ADULT_2]</isNotEmpty>
			<isNotEmpty property="schoolBdTime2Adult1">,[SCHOOL_BD_TIME2_ADULT_1]</isNotEmpty>
			<isNotEmpty property="schoolBdTime2Adult2">,[SCHOOL_BD_TIME2_ADULT_2]</isNotEmpty>
			<isNotEmpty property="schoolBdDayAdult1">,[SCHOOL_BD_DAY_ADULT_1]</isNotEmpty>
			<isNotEmpty property="schoolBdDayAdult2">,[SCHOOL_BD_DAY_ADULT_2]</isNotEmpty>
			<isNotEmpty property="schoolBdDayChild1">,[SCHOOL_BD_DAY_CHILD_1]</isNotEmpty>
			<isNotEmpty property="schoolBdDayChild2">,[SCHOOL_BD_DAY_CHILD_2]</isNotEmpty>
			<isNotEmpty property="schoolBdTime1Child1">,[SCHOOL_BD_TIME1_CHILD_1]</isNotEmpty>
			<isNotEmpty property="schoolBdTime1Child2">,[SCHOOL_BD_TIME1_CHILD_2]</isNotEmpty>
			<isNotEmpty property="schoolBdTime2Child1">,[SCHOOL_BD_TIME2_CHILD_1]</isNotEmpty>
			<isNotEmpty property="schoolBdTime2Child2">,[SCHOOL_BD_TIME2_CHILD_2]</isNotEmpty>
			,[SCHOOL_PRICE_MEMO]
			,[SKI_CATCHCOPY]
		)
		VALUES
		(
			 #facilityCd#
			,#kindFlg#
			,#facilityPattern#
			,#careerNo#
			,#liftTkContainFlg#
			,#liftTkSkiNm#
			,#liftTkKind#
			,#liftTkOtherContent#
			,#liftYkStayNight#
			,#liftYkMorning#
			,#liftYkBackNight#
			,#liftYkGondola#
			,#liftYkCable#
			,#liftYkOther#
			,#liftYkOtherContent#
			,#liftChWayFlg#
			,#liftChWayOtherContent#
			,#liftAttentionContent#
			,#liftBsSkiNm#
			,#liftBsNomalStart#
			,#liftBsNomalEnd#
			,#liftBsNightFlg#
			,#liftBsNightDay#
			,#liftBsNightStart#
			,#liftBsNightEnd#
			,#liftBsMorningFlg#
			,#liftBsMorningDay#
			,#liftBsMorningStart#
			,#liftBsMorningEnd#
			,#liftSlSkiNm#
			,#liftSlAdultKind1#
			<isNotEmpty property="liftSlAdultNomal1">,#liftSlAdultNomal1:int#</isNotEmpty>
			<isNotEmpty property="liftSlAdultDiscount1">,#liftSlAdultDiscount1:int#</isNotEmpty>
			<isNotEmpty property="liftSlAdultByu1">,#liftSlAdultByu1:int#</isNotEmpty>
			,#liftSlAdultKind2#
			<isNotEmpty property="liftSlAdultNomal2">,#liftSlAdultNomal2:int#</isNotEmpty>
			<isNotEmpty property="liftSlAdultDiscount2">,#liftSlAdultDiscount2:int#</isNotEmpty>
			<isNotEmpty property="liftSlAdultByu2">,#liftSlAdultByu2:int#</isNotEmpty>
			,#liftSlChildKind1#
			<isNotEmpty property="liftSlChildNomal1">,#liftSlChildNomal1:int#</isNotEmpty>
			<isNotEmpty property="liftSlChildDiscount1">,#liftSlChildDiscount1:int#</isNotEmpty>
			<isNotEmpty property="liftSlChildByu1">,#liftSlChildByu1:int#</isNotEmpty>
			,#liftSlChildKind2#
			<isNotEmpty property="liftSlChildNomal2">,#liftSlChildNomal2:int#</isNotEmpty>
			<isNotEmpty property="liftSlChildDiscount2">,#liftSlChildDiscount2:int#</isNotEmpty>
			<isNotEmpty property="liftSlChildByu2">,#liftSlChildByu2:int#</isNotEmpty>
			,#rentRequestWay#
			,#rentSkiDiscountFlg#
			,'1'
			,#rentSkiSpKind#
			<isNotEmpty property="rentSkiHalfAdult1">,#rentSkiHalfAdult1:int#</isNotEmpty>
			<isNotEmpty property="rentSkiHalfAdult2">,#rentSkiHalfAdult2:int#</isNotEmpty>
			<isNotEmpty property="rentSkiHalfChild1">,#rentSkiHalfChild1:int#</isNotEmpty>
			<isNotEmpty property="rentSkiHalfChild2">,#rentSkiHalfChild2:int#</isNotEmpty>
			<isNotEmpty property="rentSkiDayAdult1">,#rentSkiDayAdult1:int#</isNotEmpty>
			<isNotEmpty property="rentSkiDayAdult2">,#rentSkiDayAdult2:int#</isNotEmpty>
			<isNotEmpty property="rentSkiDayChild1">,#rentSkiDayChild1:int#</isNotEmpty>
			<isNotEmpty property="rentSkiDayChild2">,#rentSkiDayChild2:int#</isNotEmpty>
			<isNotEmpty property="rentSkiSpAdult1">,#rentSkiSpAdult1:int#</isNotEmpty>
			<isNotEmpty property="rentSkiSpAdult2">,#rentSkiSpAdult2:int#</isNotEmpty>
			<isNotEmpty property="rentSkiSpChild1">,#rentSkiSpChild1:int#</isNotEmpty>
			<isNotEmpty property="rentSkiSpChild2">,#rentSkiSpChild2:int#</isNotEmpty>
			,#rentCvDiscountFlg#
			,'1'
			,#rentCvSpKind#
			<isNotEmpty property="rentCvHalfAdult1">,#rentCvHalfAdult1:int#</isNotEmpty>
			<isNotEmpty property="rentCvHalfAdult2">,#rentCvHalfAdult2:int#</isNotEmpty>
			<isNotEmpty property="rentCvHalfChild1">,#rentCvHalfChild1:int#</isNotEmpty>
			<isNotEmpty property="rentCvHalfChild2">,#rentCvHalfChild2:int#</isNotEmpty>
			<isNotEmpty property="rentCvDayAdult1">,#rentCvDayAdult1:int#</isNotEmpty>
			<isNotEmpty property="rentCvDayAdult2">,#rentCvDayAdult2:int#</isNotEmpty>
			<isNotEmpty property="rentCvDayChild1">,#rentCvDayChild1:int#</isNotEmpty>
			<isNotEmpty property="rentCvDayChild2">,#rentCvDayChild2:int#</isNotEmpty>
			<isNotEmpty property="rentCvSpAdult1">,#rentCvSpAdult1:int#</isNotEmpty>
			<isNotEmpty property="rentCvSpAdult2">,#rentCvSpAdult2:int#</isNotEmpty>
			<isNotEmpty property="rentCvSpChild1">,#rentCvSpChild1:int#</isNotEmpty>
			<isNotEmpty property="rentCvSpChild2">,#rentCvSpChild2:int#</isNotEmpty>
			,#rentBdDiscountFlg#
			,'1'
			,#rentBdSpKind#
			<isNotEmpty property="rentBdHalfAdult1">,#rentBdHalfAdult1:int#</isNotEmpty>
			<isNotEmpty property="rentBdHalfAdult2">,#rentBdHalfAdult2:int#</isNotEmpty>
			<isNotEmpty property="rentBdHalfChild1">,#rentBdHalfChild1:int#</isNotEmpty>
			<isNotEmpty property="rentBdHalfChild2">,#rentBdHalfChild2:int#</isNotEmpty>
			<isNotEmpty property="rentBdDayAdult1">,#rentBdDayAdult1:int#</isNotEmpty>
			<isNotEmpty property="rentBdDayAdult2">,#rentBdDayAdult2:int#</isNotEmpty>
			<isNotEmpty property="rentBdDayChild1">,#rentBdDayChild1:int#</isNotEmpty>
			<isNotEmpty property="rentBdDayChild2">,#rentBdDayChild2:int#</isNotEmpty>
			<isNotEmpty property="rentBdSpAdult1">,#rentBdSpAdult1:int#</isNotEmpty>
			<isNotEmpty property="rentBdSpAdult2">,#rentBdSpAdult2:int#</isNotEmpty>
			<isNotEmpty property="rentBdSpChild1">,#rentBdSpChild1:int#</isNotEmpty>
			<isNotEmpty property="rentBdSpChild2">,#rentBdSpChild2:int#</isNotEmpty>
			,#rentSkiwDiscountFlg#
			,'1'
			,#rentSkiwSpKind#
			<isNotEmpty property="rentSkiwHalfAdult1">,#rentSkiwHalfAdult1:int#</isNotEmpty>
			<isNotEmpty property="rentSkiwHalfAdult2">,#rentSkiwHalfAdult2:int#</isNotEmpty>
			<isNotEmpty property="rentSkiwHalfChild1">,#rentSkiwHalfChild1:int#</isNotEmpty>
			<isNotEmpty property="rentSkiwHalfChild2">,#rentSkiwHalfChild2:int#</isNotEmpty>
			<isNotEmpty property="rentSkiwDayAdult1">,#rentSkiwDayAdult1:int#</isNotEmpty>
			<isNotEmpty property="rentSkiwDayAdult2">,#rentSkiwDayAdult2:int#</isNotEmpty>
			<isNotEmpty property="rentSkiwDayChild1">,#rentSkiwDayChild1:int#</isNotEmpty>
			<isNotEmpty property="rentSkiwDayChild2">,#rentSkiwDayChild2:int#</isNotEmpty>
			<isNotEmpty property="rentSkiwSpAdult1">,#rentSkiwSpAdult1:int#</isNotEmpty>
			<isNotEmpty property="rentSkiwSpAdult2">,#rentSkiwSpAdult2:int#</isNotEmpty>
			<isNotEmpty property="rentSkiwSpChild1">,#rentSkiwSpChild1:int#</isNotEmpty>
			<isNotEmpty property="rentSkiwSpChild2">,#rentSkiwSpChild2:int#</isNotEmpty>
			,#rentBdwDiscountFlg#
			,'1'
			,#rentBdwSpKind#
			<isNotEmpty property="rentBdwHalfAdult1">,#rentBdwHalfAdult1:int#</isNotEmpty>
			<isNotEmpty property="rentBdwHalfAdult2">,#rentBdwHalfAdult2:int#</isNotEmpty>
			<isNotEmpty property="rentBdwHalfChild1">,#rentBdwHalfChild1:int#</isNotEmpty>
			<isNotEmpty property="rentBdwHalfChild2">,#rentBdwHalfChild2:int#</isNotEmpty>
			<isNotEmpty property="rentBdwDayAdult1">,#rentBdwDayAdult1:int#</isNotEmpty>
			<isNotEmpty property="rentBdwDayAdult2">,#rentBdwDayAdult2:int#</isNotEmpty>
			<isNotEmpty property="rentBdwDayChild1">,#rentBdwDayChild1:int#</isNotEmpty>
			<isNotEmpty property="rentBdwDayChild2">,#rentBdwDayChild2:int#</isNotEmpty>
			<isNotEmpty property="rentBdwSpAdult1">,#rentBdwSpAdult1:int#</isNotEmpty>
			<isNotEmpty property="rentBdwSpAdult2">,#rentBdwSpAdult2:int#</isNotEmpty>
			<isNotEmpty property="rentBdwSpChild1">,#rentBdwSpChild1:int#</isNotEmpty>
			<isNotEmpty property="rentBdwSpChild2">,#rentBdwSpChild2:int#</isNotEmpty>
			,#rentChageFlg#
			,#rentFsFlg#
			,#rentFsChargeFlg#
			,#rentSkiPriceMemo#
			,#schoolRequestWay#
			,#schoolOtherContent#
			,#schoolSkiDiscountFlg#
			,#schoolSkiTime1Hh#
			,#schoolSkiTime1Mm#
			,#schoolSkiTime2Hh#
			,#schoolSkiTime2Mm#
			<isNotEmpty property="schoolSkiHalfAdult1">,#schoolSkiHalfAdult1:int#</isNotEmpty>
			<isNotEmpty property="schoolSkiHalfAdult2">,#schoolSkiHalfAdult2:int#</isNotEmpty>
			<isNotEmpty property="schoolSkiHalfChild1">,#schoolSkiHalfChild1:int#</isNotEmpty>
			<isNotEmpty property="schoolSkiHalfChild2">,#schoolSkiHalfChild2:int#</isNotEmpty>
			<isNotEmpty property="schoolSkiTime1Adult1">,#schoolSkiTime1Adult1:int#</isNotEmpty>
			<isNotEmpty property="schoolSkiTime1Adult2">,#schoolSkiTime1Adult2:int#</isNotEmpty>
			<isNotEmpty property="schoolSkiTime2Adult1">,#schoolSkiTime2Adult1:int#</isNotEmpty>
			<isNotEmpty property="schoolSkiTime2Adult2">,#schoolSkiTime2Adult2:int#</isNotEmpty>
			<isNotEmpty property="schoolSkiDayAdult1">,#schoolSkiDayAdult1:int#</isNotEmpty>
			<isNotEmpty property="schoolSkiDayAdult2">,#schoolSkiDayAdult2:int#</isNotEmpty>
			<isNotEmpty property="schoolSkiDayChild1">,#schoolSkiDayChild1:int#</isNotEmpty>
			<isNotEmpty property="schoolSkiDayChild2">,#schoolSkiDayChild2:int#</isNotEmpty>
			<isNotEmpty property="schoolSkiTime1Child1">,#schoolSkiTime1Child1:int#</isNotEmpty>
			<isNotEmpty property="schoolSkiTime1Child2">,#schoolSkiTime1Child2:int#</isNotEmpty>
			<isNotEmpty property="schoolSkiTime2Child1">,#schoolSkiTime2Child1:int#</isNotEmpty>
			<isNotEmpty property="schoolSkiTime2Child2">,#schoolSkiTime2Child2:int#</isNotEmpty>
			,#schoolBdDiscountFlg#
			,#schoolBdTime1Hh#
			,#schoolBdTime1Mm#
			,#schoolBdTime2Hh#
			,#schoolBdTime2Mm#
			<isNotEmpty property="schoolBdHalfAdult1">,#schoolBdHalfAdult1:int#</isNotEmpty>
			<isNotEmpty property="schoolBdHalfAdult2">,#schoolBdHalfAdult2:int#</isNotEmpty>
			<isNotEmpty property="schoolBdHalfChild1">,#schoolBdHalfChild1:int#</isNotEmpty>
			<isNotEmpty property="schoolBdHalfChild2">,#schoolBdHalfChild2:int#</isNotEmpty>
			<isNotEmpty property="schoolBdTime1Adult1">,#schoolBdTime1Adult1:int#</isNotEmpty>
			<isNotEmpty property="schoolBdTime1Adult2">,#schoolBdTime1Adult2:int#</isNotEmpty>
			<isNotEmpty property="schoolBdTime2Adult1">,#schoolBdTime2Adult1:int#</isNotEmpty>
			<isNotEmpty property="schoolBdTime2Adult2">,#schoolBdTime2Adult2:int#</isNotEmpty>
			<isNotEmpty property="schoolBdDayAdult1">,#schoolBdDayAdult1:int#</isNotEmpty>
			<isNotEmpty property="schoolBdDayAdult2">,#schoolBdDayAdult2:int#</isNotEmpty>
			<isNotEmpty property="schoolBdDayChild1">,#schoolBdDayChild1:int#</isNotEmpty>
			<isNotEmpty property="schoolBdDayChild2">,#schoolBdDayChild2:int#</isNotEmpty>
			<isNotEmpty property="schoolBdTime1Child1">,#schoolBdTime1Child1:int#</isNotEmpty>
			<isNotEmpty property="schoolBdTime1Child2">,#schoolBdTime1Child2:int#</isNotEmpty>
			<isNotEmpty property="schoolBdTime2Child1">,#schoolBdTime2Child1:int#</isNotEmpty>
			<isNotEmpty property="schoolBdTime2Child2">,#schoolBdTime2Child2:int#</isNotEmpty>
			,#schoolPriceMemo#
			,#skiCatchcopy#
		)
	</insert>

	<insert id="DFM_insertDFacilityLiftSkiCopyFromHistory" parameterClass="DFacilityManageKey">
		INSERT INTO
			[D_FACILITY_LIFT_SKI]
		(
			<include refid="DFM_subQuery_DFacilityLiftSki_AllColumns"/>
		)
		SELECT
			<include refid="DFM_subQuery_DFacilityLiftSki_AllColumns"/>
		FROM (
				SELECT
					[D_FACILITY_LIFT_SKI_HISTORY].*
				FROM
					[D_FACILITY_LIFT_SKI_HISTORY]
				INNER JOIN
					[D_FACILITY_MANAGE] ON (
							[D_FACILITY_MANAGE].[FACILITY_CD]		= [D_FACILITY_LIFT_SKI_HISTORY].[FACILITY_CD]
						AND [D_FACILITY_MANAGE].[KIND_FLG]			= [D_FACILITY_LIFT_SKI_HISTORY].[KIND_FLG]
						AND [D_FACILITY_MANAGE].[FACILITY_SORTS]	= #facilitySorts#
						AND [D_FACILITY_MANAGE].[FACILITY_PATTERN]	= [D_FACILITY_LIFT_SKI_HISTORY].[FACILITY_PATTERN]
						AND [D_FACILITY_MANAGE].[BODY_CAREER_NO]	= [D_FACILITY_LIFT_SKI_HISTORY].[CAREER_NO]
				)
				WHERE
						[D_FACILITY_MANAGE].[FACILITY_CD]		= #facilityCd#
					AND [D_FACILITY_MANAGE].[KIND_FLG]			= #kindFlg#
					AND [D_FACILITY_MANAGE].[FACILITY_PATTERN]	= #facilityPattern#
					AND [D_FACILITY_MANAGE].[CAREER_NO]			= #careerNo#
		) TMP01
	</insert>

	<delete id="DFM_deleteDFacilityLiftSki" parameterClass="DFacilityManageKey">
		DELETE FROM
			[D_FACILITY_LIFT_SKI]
		WHERE
				[FACILITY_CD]		= #facilityCd#
			AND [KIND_FLG]			= #kindFlg#
			AND [FACILITY_PATTERN]	= #facilityPattern#
	</delete>



	<!-- ******************************************************************************************
	 *		[DP/RM]施設_設備_スキー
	******************************************************************************************* -->

	<typeAlias alias="DFacilityEquipmentSkiHistory" type="jp.co.jreast.common.data.ddata.DFacilityEquipmentSkiHistory" />

	<resultMap id="DFM_DFacilityEquipmentSkiHistory_RM" class="DFacilityEquipmentSkiHistory">
		<result property="facilityCd"				column="FACILITY_CD"				javaType="String"	jdbcType="char" />
		<result property="kindFlg"					column="KIND_FLG"					javaType="String"	jdbcType="char" />
		<result property="facilityPattern"			column="FACILITY_PATTERN"			javaType="String"	jdbcType="char" />

		<result property="commonbathFlg"			column="COMMONBATH_FLG"				javaType="String"	jdbcType="char" />
		<result property="commonbathMlNum"			column="COMMONBATH_ML_NUM"			javaType="String"	jdbcType="int" />
		<result property="commonbathManNum"			column="COMMONBATH_MAN_NUM"			javaType="String"	jdbcType="int" />
		<result property="commonbathLadyNum"		column="COMMONBATH_LADY_NUM"		javaType="String"	jdbcType="int" />
		<result property="commonbathChangeNum"		column="COMMONBATH_CHANGE_NUM"		javaType="String"	jdbcType="int" />
		<result property="commonbathChangeStart"	column="COMMONBATH_CHANGE_START"	javaType="String"	jdbcType="char" />
		<result property="commonbathChangeEnd"		column="COMMONBATH_CHANGE_END"		javaType="String"	jdbcType="char" />
		<result property="bigbathMemo"				column="BIGBATH_MEMO"				javaType="String"	jdbcType="varchar" />
		<result property="lockerroomFlg"			column="LOCKERROOM_FLG"				javaType="String"	jdbcType="char" />
		<result property="dressingRoomDiv"			column="DRESSING_ROOM_DIV"			javaType="String"	jdbcType="char" />
		<result property="dressingRoomOthers"		column="DRESSING_ROOM_OTHERS"		javaType="String"	jdbcType="varchar" />
		<result property="daycareFlg"				column="DAYCARE_FLG"				javaType="String"	jdbcType="char" />
		<result property="daycareAgeFrom"			column="DAYCARE_AGE_FROM"			javaType="String"	jdbcType="char" />
		<result property="daycareAgeTo"				column="DAYCARE_AGE_TO"				javaType="String"	jdbcType="char" />
		<result property="daycareTimeStart1"		column="DAYCARE_TIME_START_1"		javaType="String"	jdbcType="char" />
		<result property="daycareTimeEnd1"			column="DAYCARE_TIME_END_1"			javaType="String"	jdbcType="char" />
		<result property="daycareTimeStart2"		column="DAYCARE_TIME_START_2"		javaType="String"	jdbcType="char" />
		<result property="daycareTimeEnd2"			column="DAYCARE_TIME_END_2"			javaType="String"	jdbcType="char" />
		<result property="daycareTimeMemo"			column="DAYCARE_TIME_MEMO"			javaType="String"	jdbcType="varchar" />
		<result property="daycareChargeFlg"			column="DAYCARE_CHARGE_FLG"			javaType="String"	jdbcType="char" />
		<result property="daycareTime"				column="DAYCARE_TIME"				javaType="String"	jdbcType="int" />
		<result property="daycareCharge"			column="DAYCARE_CHARGE"				javaType="String"	jdbcType="int" />

		<result property="careerNo"					column="CAREER_NO"					javaType="Integer"	jdbcType="smallint"/>
	</resultMap>

	<sql id="DFM_subQuery_DFacilityEquipmentSki_AllColumns">
		 [FACILITY_CD]
		,[KIND_FLG]
		,[FACILITY_PATTERN]
		,[COMMONBATH_FLG]
		,[COMMONBATH_ML_NUM]
		,[COMMONBATH_MAN_NUM]
		,[COMMONBATH_LADY_NUM]
		,[COMMONBATH_CHANGE_NUM]
		,[COMMONBATH_CHANGE_START]
		,[COMMONBATH_CHANGE_END]
		,[BIGBATH_MEMO]
		,[LOCKERROOM_FLG]
		,[DRESSING_ROOM_DIV]
		,[DRESSING_ROOM_OTHERS]
		,[DAYCARE_FLG]
		,[DAYCARE_AGE_FROM]
		,[DAYCARE_AGE_TO]
		,[DAYCARE_TIME_START_1]
		,[DAYCARE_TIME_END_1]
		,[DAYCARE_TIME_START_2]
		,[DAYCARE_TIME_END_2]
		,[DAYCARE_TIME_MEMO]
		,[DAYCARE_CHARGE_FLG]
		,[DAYCARE_TIME]
		,[DAYCARE_CHARGE]
	</sql>

	<select id="DFM_fetchDFacilityEquipmentSkiHistory" resultMap="DFM_DFacilityEquipmentSkiHistory_RM" parameterClass="DFacilityManageKey">
		SELECT
			<include refid="DFM_subQuery_DFacilityEquipmentSki_AllColumns"/>
			,[CAREER_NO]
		FROM (
				SELECT
					[D_FACILITY_EQUIPMENT_SKI_HISTORY].*
				FROM
					[D_FACILITY_EQUIPMENT_SKI_HISTORY]
				INNER JOIN
					[D_FACILITY_MANAGE] ON (
							[D_FACILITY_MANAGE].[FACILITY_CD]		= [D_FACILITY_EQUIPMENT_SKI_HISTORY].[FACILITY_CD]
						AND [D_FACILITY_MANAGE].[KIND_FLG]			= [D_FACILITY_EQUIPMENT_SKI_HISTORY].[KIND_FLG]
						AND [D_FACILITY_MANAGE].[FACILITY_SORTS]	= #facilitySorts#
						AND [D_FACILITY_MANAGE].[FACILITY_PATTERN]	= [D_FACILITY_EQUIPMENT_SKI_HISTORY].[FACILITY_PATTERN]
						AND [D_FACILITY_MANAGE].[BODY_CAREER_NO]	= [D_FACILITY_EQUIPMENT_SKI_HISTORY].[CAREER_NO]
				)
				WHERE
						[D_FACILITY_MANAGE].[FACILITY_CD]		= #facilityCd#
					AND [D_FACILITY_MANAGE].[KIND_FLG]			= #kindFlg#
					AND [D_FACILITY_MANAGE].[FACILITY_PATTERN]	= #facilityPattern#
					AND [D_FACILITY_MANAGE].[CAREER_NO]			= #careerNo#
		) TMP01
	</select>

	<select id="DFM_fetchDFacilityEquipmentSkiByPlanAnsNo" resultMap="DFM_DFacilityEquipmentSkiHistory_RM" parameterClass="DFacilityManageSearchData">
		SELECT
			<include refid="DFM_subQuery_DFacilityEquipmentSki_AllColumns"/>
			,NULL AS [CAREER_NO]
		FROM (
			SELECT
				[D_FACILITY_EQUIPMENT_SKI].*
			FROM
				[D_FACILITY_EQUIPMENT_SKI]
			INNER JOIN
				[D_PLAN_ANS_FACILITY] ON (
					[D_FACILITY_EQUIPMENT_SKI].[FACILITY_CD]		= [D_PLAN_ANS_FACILITY].[FACILITY_CD]
				AND [D_FACILITY_EQUIPMENT_SKI].[KIND_FLG]			= [D_PLAN_ANS_FACILITY].[KIND_FLG]
				AND [D_FACILITY_EQUIPMENT_SKI].[FACILITY_PATTERN]	= [D_PLAN_ANS_FACILITY].[FACILITY_PATTERN_NO5]
			)
			WHERE
				[D_PLAN_ANS_FACILITY].[PLAN_ANS_NO]	= #planAnsNo#
		) TMP01
	</select>

	<select id="DFM_fetchDFacilityEquipmentSkiByPk" resultMap="DFM_DFacilityEquipmentSkiHistory_RM" parameterClass="DFacilityManageSearchData">
		SELECT
			<include refid="DFM_subQuery_DFacilityEquipmentSki_AllColumns"/>
			,NULL AS [CAREER_NO]
		FROM (
			SELECT
				[D_FACILITY_EQUIPMENT_SKI].*
			FROM
				[D_FACILITY_EQUIPMENT_SKI]
			WHERE
					[D_FACILITY_EQUIPMENT_SKI].[FACILITY_CD]		= #facilityCd#
				AND [D_FACILITY_EQUIPMENT_SKI].[KIND_FLG]			= #kindFlg#
				AND [D_FACILITY_EQUIPMENT_SKI].[FACILITY_PATTERN]	= #facilityPattern#
		) TMP01
	</select>

	<select id="DFM_fetchAFacilityEquipmentSkiByPk" resultMap="DFM_DFacilityEquipmentSkiHistory_RM" parameterClass="DFacilityManageSearchData">
		SELECT
			<include refid="DFM_subQuery_DFacilityEquipmentSki_AllColumns"/>
			,NULL AS [CAREER_NO]
		FROM (
			SELECT
				 [A_FACILITY_EQUIPMENT_SKI].*
				,NULL			AS [BIGBATH_MEMO]
				,NULL			AS [DRESSING_ROOM_DIV]
				,NULL			AS [DRESSING_ROOM_OTHERS]
				,NULL			AS [DAYCARE_TIME_MEMO]
			FROM
				[A_FACILITY_EQUIPMENT_SKI]
			WHERE
					[A_FACILITY_EQUIPMENT_SKI].[FACILITY_CD]		= #facilityCd#
				AND [A_FACILITY_EQUIPMENT_SKI].[KIND_FLG]			= #kindFlg#
				AND [A_FACILITY_EQUIPMENT_SKI].[FACILITY_PATTERN]	= #facilityPattern#
		) TMP01
	</select>

	<insert id="DFM_insertDFacilityEquipmentSkiHistory" parameterClass="DFacilityEquipmentSkiHistory">
		INSERT INTO
			[D_FACILITY_EQUIPMENT_SKI_HISTORY]
		(
			 [FACILITY_CD]
			,[KIND_FLG]
			,[FACILITY_PATTERN]
			,[CAREER_NO]
			,[COMMONBATH_FLG]
			<isNotEmpty property="commonbathMlNum">,[COMMONBATH_ML_NUM]</isNotEmpty>
			<isNotEmpty property="commonbathManNum">,[COMMONBATH_MAN_NUM]</isNotEmpty>
			<isNotEmpty property="commonbathLadyNum">,[COMMONBATH_LADY_NUM]</isNotEmpty>
			<isNotEmpty property="commonbathChangeNum">,[COMMONBATH_CHANGE_NUM]</isNotEmpty>
			,[COMMONBATH_CHANGE_START]
			,[COMMONBATH_CHANGE_END]
			,[BIGBATH_MEMO]
			,[LOCKERROOM_FLG]
			,[DRESSING_ROOM_DIV]
			,[DRESSING_ROOM_OTHERS]
			,[DAYCARE_FLG]
			,[DAYCARE_AGE_FROM]
			,[DAYCARE_AGE_TO]
			,[DAYCARE_TIME_START_1]
			,[DAYCARE_TIME_END_1]
			,[DAYCARE_TIME_START_2]
			,[DAYCARE_TIME_END_2]
			,[DAYCARE_TIME_MEMO]
			,[DAYCARE_CHARGE_FLG]
			<isNotEmpty property="daycareTime">,[DAYCARE_TIME]</isNotEmpty>
			<isNotEmpty property="daycareCharge">,[DAYCARE_CHARGE]</isNotEmpty>
		)
		VALUES
		(
			 #facilityCd#
			,#kindFlg#
			,#facilityPattern#
			,#careerNo#
			,#commonbathFlg#
			<isNotEmpty property="commonbathMlNum">,#commonbathMlNum:int#</isNotEmpty>
			<isNotEmpty property="commonbathManNum">,#commonbathManNum:int#</isNotEmpty>
			<isNotEmpty property="commonbathLadyNum">,#commonbathLadyNum:int#</isNotEmpty>
			<isNotEmpty property="commonbathChangeNum">,#commonbathChangeNum:int#</isNotEmpty>
			,#commonbathChangeStart#
			,#commonbathChangeEnd#
			,#bigbathMemo#
			,#lockerroomFlg#
			,#dressingRoomDiv#
			,#dressingRoomOthers#
			,#daycareFlg#
			,#daycareAgeFrom#
			,#daycareAgeTo#
			,#daycareTimeStart1#
			,#daycareTimeEnd1#
			,#daycareTimeStart2#
			,#daycareTimeEnd2#
			,#daycareTimeMemo#
			,#daycareChargeFlg#
			<isNotEmpty property="daycareTime">,#daycareTime:int#</isNotEmpty>
			<isNotEmpty property="daycareCharge">,#daycareCharge:int#</isNotEmpty>
		)
	</insert>

	<insert id="DFM_insertDFacilityEquipmentSkiCopyFromHistory" parameterClass="DFacilityManageKey">
		INSERT INTO
			[D_FACILITY_EQUIPMENT_SKI]
		(
			<include refid="DFM_subQuery_DFacilityEquipmentSki_AllColumns"/>
		)
		SELECT
			<include refid="DFM_subQuery_DFacilityEquipmentSki_AllColumns"/>
		FROM (
				SELECT
					[D_FACILITY_EQUIPMENT_SKI_HISTORY].*
				FROM
					[D_FACILITY_EQUIPMENT_SKI_HISTORY]
				INNER JOIN
					[D_FACILITY_MANAGE] ON (
							[D_FACILITY_MANAGE].[FACILITY_CD]		= [D_FACILITY_EQUIPMENT_SKI_HISTORY].[FACILITY_CD]
						AND [D_FACILITY_MANAGE].[KIND_FLG]			= [D_FACILITY_EQUIPMENT_SKI_HISTORY].[KIND_FLG]
						AND [D_FACILITY_MANAGE].[FACILITY_SORTS]	= #facilitySorts#
						AND [D_FACILITY_MANAGE].[FACILITY_PATTERN]	= [D_FACILITY_EQUIPMENT_SKI_HISTORY].[FACILITY_PATTERN]
						AND [D_FACILITY_MANAGE].[BODY_CAREER_NO]	= [D_FACILITY_EQUIPMENT_SKI_HISTORY].[CAREER_NO]
				)
				WHERE
						[D_FACILITY_MANAGE].[FACILITY_CD]		= #facilityCd#
					AND [D_FACILITY_MANAGE].[KIND_FLG]			= #kindFlg#
					AND [D_FACILITY_MANAGE].[FACILITY_PATTERN]	= #facilityPattern#
					AND [D_FACILITY_MANAGE].[CAREER_NO]			= #careerNo#
		) TMP01
	</insert>

	<delete id="DFM_deleteDFacilityEquipmentSki" parameterClass="DFacilityManageKey">
		DELETE FROM
			[D_FACILITY_EQUIPMENT_SKI]
		WHERE
				[FACILITY_CD]		= #facilityCd#
			AND [KIND_FLG]			= #kindFlg#
			AND [FACILITY_PATTERN]	= #facilityPattern#
	</delete>



	<!-- ******************************************************************************************
	 *		[DP/RM]施設_ファミリー施設_スキー
	******************************************************************************************* -->

	<typeAlias alias="DFacilityFamilySkiHistory" type="jp.co.jreast.common.data.ddata.DFacilityFamilySkiHistory" />

	<resultMap id="DFM_DFacilityFamilySkiHistory_RM" class="DFacilityFamilySkiHistory">
		<result property="facilityCd"				column="FACILITY_CD"				javaType="String"	jdbcType="char" />
		<result property="kindFlg"					column="KIND_FLG"					javaType="String"	jdbcType="char" />
		<result property="facilityPattern"			column="FACILITY_PATTERN"			javaType="String"	jdbcType="char" />

		<result property="areaForKidsFlg"			column="AREA_FOR_KIDS_FLG"			javaType="String"	jdbcType="char" />
		<result property="entranceFeeFlg"			column="ENTRANCE_FEE_FLG"			javaType="String"	jdbcType="char" />
		<result property="entranceFeeFree"			column="ENTRANCE_FEE_FREE"			javaType="String"	jdbcType="char" />
		<result property="entranceFeePay"			column="ENTRANCE_FEE_PAY"			javaType="String"	jdbcType="char" />
		<result property="entranceFeeHhPay"			column="ENTRANCE_FEE_HH_PAY"		javaType="String"	jdbcType="varchar" />
		<result property="entranceFeeMmPay"			column="ENTRANCE_FEE_MM_PAY"		javaType="String"	jdbcType="varchar" />
		<result property="entranceFeeAdultPay"		column="ENTRANCE_FEE_ADULT_PAY"		javaType="String"	jdbcType="char" />
		<result property="entranceFeeAdultAge"		column="ENTRANCE_FEE_ADULT_AGE"		javaType="String"	jdbcType="int" />
		<result property="entranceFeeAdultCharge"	column="ENTRANCE_FEE_ADULT_CHARGE"	javaType="String"	jdbcType="int" />
		<result property="entranceFeeChildPay"		column="ENTRANCE_FEE_CHILD_PAY"		javaType="String"	jdbcType="char" />
		<result property="entranceFeeChildFrom"		column="ENTRANCE_FEE_CHILD_FROM"	javaType="String"	jdbcType="char" />
		<result property="entranceFeeChildTo"		column="ENTRANCE_FEE_CHILD_TO"		javaType="String"	jdbcType="char" />
		<result property="entranceFeeChildCharge"	column="ENTRANCE_FEE_CHILD_CHARGE"	javaType="String"	jdbcType="int" />
		<result property="gelandeFlg1"				column="GELANDE_FLG_1"				javaType="String"	jdbcType="char" />
		<result property="gelandeChargeFlg1"		column="GELANDE_CHARGE_FLG_1"		javaType="String"	jdbcType="char" />
		<result property="gelandeChargeAdult1"		column="GELANDE_CHARGE_ADULT_1"		javaType="String"	jdbcType="int" />
		<result property="gelandeChargeChild1"		column="GELANDE_CHARGE_CHILD_1"		javaType="String"	jdbcType="int" />
		<result property="gelandeFlg2"				column="GELANDE_FLG_2"				javaType="String"	jdbcType="char" />
		<result property="gelandeChargeFlg2"		column="GELANDE_CHARGE_FLG_2"		javaType="String"	jdbcType="char" />
		<result property="gelandeChargeAdult2"		column="GELANDE_CHARGE_ADULT_2"		javaType="String"	jdbcType="int" />
		<result property="gelandeChargeChild2"		column="GELANDE_CHARGE_CHILD_2"		javaType="String"	jdbcType="int" />
		<result property="gelandeFlg3"				column="GELANDE_FLG_3"				javaType="String"	jdbcType="char" />
		<result property="gelandeChargeFlg3"		column="GELANDE_CHARGE_FLG_3"		javaType="String"	jdbcType="char" />
		<result property="gelandeChargeAdult3"		column="GELANDE_CHARGE_ADULT_3"		javaType="String"	jdbcType="int" />
		<result property="gelandeChargeChild3"		column="GELANDE_CHARGE_CHILD_3"		javaType="String"	jdbcType="int" />
		<result property="gelandeFlg4"				column="GELANDE_FLG_4"				javaType="String"	jdbcType="char" />
		<result property="gelandeChargeFlg4"		column="GELANDE_CHARGE_FLG_4"		javaType="String"	jdbcType="char" />
		<result property="gelandeChargeAdult4"		column="GELANDE_CHARGE_ADULT_4"		javaType="String"	jdbcType="int" />
		<result property="gelandeChargeChild4"		column="GELANDE_CHARGE_CHILD_4"		javaType="String"	jdbcType="int" />
		<result property="gelandeFlg5"				column="GELANDE_FLG_5"				javaType="String"	jdbcType="char" />
		<result property="gelandeChargeFlg5"		column="GELANDE_CHARGE_FLG_5"		javaType="String"	jdbcType="char" />
		<result property="gelandeChargeAdult5"		column="GELANDE_CHARGE_ADULT_5"		javaType="String"	jdbcType="int" />
		<result property="gelandeChargeChild5"		column="GELANDE_CHARGE_CHILD_5"		javaType="String"	jdbcType="int" />
		<result property="gelandeFlg6"				column="GELANDE_FLG_6"				javaType="String"	jdbcType="char" />
		<result property="gelandeChargeFlg6"		column="GELANDE_CHARGE_FLG_6"		javaType="String"	jdbcType="char" />
		<result property="gelandeChargeAdult6"		column="GELANDE_CHARGE_ADULT_6"		javaType="String"	jdbcType="int" />
		<result property="gelandeChargeChild6"		column="GELANDE_CHARGE_CHILD_6"		javaType="String"	jdbcType="int" />
		<result property="gelandeFlg7"				column="GELANDE_FLG_7"				javaType="String"	jdbcType="char" />
		<result property="gelandeChargeFlg7"		column="GELANDE_CHARGE_FLG_7"		javaType="String"	jdbcType="char" />
		<result property="gelandeChargeAdult7"		column="GELANDE_CHARGE_ADULT_7"		javaType="String"	jdbcType="int" />
		<result property="gelandeChargeChild7"		column="GELANDE_CHARGE_CHILD_7"		javaType="String"	jdbcType="int" />
		<result property="otherFacility1"			column="OTHER_FACILITY_1"			javaType="String"	jdbcType="varchar" />
		<result property="otherFacility2"			column="OTHER_FACILITY_2"			javaType="String"	jdbcType="varchar" />
		<result property="otherFacility3"			column="OTHER_FACILITY_3"			javaType="String"	jdbcType="varchar" />
		<result property="otherFacility4"			column="OTHER_FACILITY_4"			javaType="String"	jdbcType="varchar" />
		<result property="otherSpCmt"				column="OTHER_SP_CMT"				javaType="String"	jdbcType="varchar" />

		<result property="careerNo"					column="CAREER_NO"					javaType="Integer"	jdbcType="smallint"/>
	</resultMap>

	<sql id="DFM_subQuery_DFacilityFamilySki_AllColumns">
		 [FACILITY_CD]
		,[KIND_FLG]
		,[FACILITY_PATTERN]
		,[AREA_FOR_KIDS_FLG]
		,[ENTRANCE_FEE_FLG]
		,[ENTRANCE_FEE_FREE]
		,[ENTRANCE_FEE_PAY]
		,[ENTRANCE_FEE_HH_PAY]
		,[ENTRANCE_FEE_MM_PAY]
		,[ENTRANCE_FEE_ADULT_PAY]
		,[ENTRANCE_FEE_ADULT_AGE]
		,[ENTRANCE_FEE_ADULT_CHARGE]
		,[ENTRANCE_FEE_CHILD_PAY]
		,[ENTRANCE_FEE_CHILD_FROM]
		,[ENTRANCE_FEE_CHILD_TO]
		,[ENTRANCE_FEE_CHILD_CHARGE]
		,[GELANDE_FLG_1]
		,[GELANDE_CHARGE_FLG_1]
		,[GELANDE_CHARGE_ADULT_1]
		,[GELANDE_CHARGE_CHILD_1]
		,[GELANDE_FLG_2]
		,[GELANDE_CHARGE_FLG_2]
		,[GELANDE_CHARGE_ADULT_2]
		,[GELANDE_CHARGE_CHILD_2]
		,[GELANDE_FLG_3]
		,[GELANDE_CHARGE_FLG_3]
		,[GELANDE_CHARGE_ADULT_3]
		,[GELANDE_CHARGE_CHILD_3]
		,[GELANDE_FLG_4]
		,[GELANDE_CHARGE_FLG_4]
		,[GELANDE_CHARGE_ADULT_4]
		,[GELANDE_CHARGE_CHILD_4]
		,[GELANDE_FLG_5]
		,[GELANDE_CHARGE_FLG_5]
		,[GELANDE_CHARGE_ADULT_5]
		,[GELANDE_CHARGE_CHILD_5]
		,[GELANDE_FLG_6]
		,[GELANDE_CHARGE_FLG_6]
		,[GELANDE_CHARGE_ADULT_6]
		,[GELANDE_CHARGE_CHILD_6]
		,[GELANDE_FLG_7]
		,[GELANDE_CHARGE_FLG_7]
		,[GELANDE_CHARGE_ADULT_7]
		,[GELANDE_CHARGE_CHILD_7]
		,[OTHER_FACILITY_1]
		,[OTHER_FACILITY_2]
		,[OTHER_FACILITY_3]
		,[OTHER_FACILITY_4]
		,[OTHER_SP_CMT]
	</sql>

	<select id="DFM_fetchDFacilityFamilySkiHistory" resultMap="DFM_DFacilityFamilySkiHistory_RM" parameterClass="DFacilityManageKey">
		SELECT
			<include refid="DFM_subQuery_DFacilityFamilySki_AllColumns"/>
			,[CAREER_NO]
		FROM (
				SELECT
					[D_FACILITY_FAMILY_SKI_HISTORY].*
				FROM
					[D_FACILITY_FAMILY_SKI_HISTORY]
				INNER JOIN
					[D_FACILITY_MANAGE] ON (
							[D_FACILITY_MANAGE].[FACILITY_CD]		= [D_FACILITY_FAMILY_SKI_HISTORY].[FACILITY_CD]
						AND [D_FACILITY_MANAGE].[KIND_FLG]			= [D_FACILITY_FAMILY_SKI_HISTORY].[KIND_FLG]
						AND [D_FACILITY_MANAGE].[FACILITY_SORTS]	= #facilitySorts#
						AND [D_FACILITY_MANAGE].[FACILITY_PATTERN]	= [D_FACILITY_FAMILY_SKI_HISTORY].[FACILITY_PATTERN]
						AND [D_FACILITY_MANAGE].[BODY_CAREER_NO]	= [D_FACILITY_FAMILY_SKI_HISTORY].[CAREER_NO]
				)
				WHERE
						[D_FACILITY_MANAGE].[FACILITY_CD]		= #facilityCd#
					AND [D_FACILITY_MANAGE].[KIND_FLG]			= #kindFlg#
					AND [D_FACILITY_MANAGE].[FACILITY_PATTERN]	= #facilityPattern#
					AND [D_FACILITY_MANAGE].[CAREER_NO]			= #careerNo#
		) TMP01
	</select>

	<select id="DFM_fetchDFacilityFamilySkiByPlanAnsNo" resultMap="DFM_DFacilityFamilySkiHistory_RM" parameterClass="DFacilityManageSearchData">
		SELECT
			<include refid="DFM_subQuery_DFacilityFamilySki_AllColumns"/>
			,NULL AS [CAREER_NO]
		FROM (
			SELECT
				[D_FACILITY_FAMILY_SKI].*
			FROM
				[D_FACILITY_FAMILY_SKI]
			INNER JOIN
				[D_PLAN_ANS_FACILITY] ON (
					[D_FACILITY_FAMILY_SKI].[FACILITY_CD]		= [D_PLAN_ANS_FACILITY].[FACILITY_CD]
				AND [D_FACILITY_FAMILY_SKI].[KIND_FLG]			= [D_PLAN_ANS_FACILITY].[KIND_FLG]
				AND [D_FACILITY_FAMILY_SKI].[FACILITY_PATTERN]	= [D_PLAN_ANS_FACILITY].[FACILITY_PATTERN_NO5]
			)
			WHERE
				[D_PLAN_ANS_FACILITY].[PLAN_ANS_NO]	= #planAnsNo#
		) TMP01
	</select>

	<select id="DFM_fetchDFacilityFamilySkiByPk" resultMap="DFM_DFacilityFamilySkiHistory_RM" parameterClass="DFacilityManageSearchData">
		SELECT
			<include refid="DFM_subQuery_DFacilityFamilySki_AllColumns"/>
			,NULL AS [CAREER_NO]
		FROM (
			SELECT
				[D_FACILITY_FAMILY_SKI].*
			FROM
				[D_FACILITY_FAMILY_SKI]
			WHERE
					[D_FACILITY_FAMILY_SKI].[FACILITY_CD]		= #facilityCd#
				AND [D_FACILITY_FAMILY_SKI].[KIND_FLG]			= #kindFlg#
				AND [D_FACILITY_FAMILY_SKI].[FACILITY_PATTERN]	= #facilityPattern#
		) TMP01
	</select>

	<select id="DFM_fetchAFacilityFamilySkiByPk" resultMap="DFM_DFacilityFamilySkiHistory_RM" parameterClass="DFacilityManageSearchData">
		SELECT
			<include refid="DFM_subQuery_DFacilityFamilySki_AllColumns"/>
			,NULL AS [CAREER_NO]
		FROM (
			SELECT
				 [A_FACILITY_FAMILY_SKI].*
				,NULL			AS [ENTRANCE_FEE_PAY]
				,NULL			AS [ENTRANCE_FEE_HH_PAY]
				,NULL			AS [ENTRANCE_FEE_MM_PAY]
			FROM
				[A_FACILITY_FAMILY_SKI]
			WHERE
					[A_FACILITY_FAMILY_SKI].[FACILITY_CD]		= #facilityCd#
				AND [A_FACILITY_FAMILY_SKI].[KIND_FLG]			= #kindFlg#
				AND [A_FACILITY_FAMILY_SKI].[FACILITY_PATTERN]	= #facilityPattern#
		) TMP01
	</select>

	<insert id="DFM_insertDFacilityFamilySkiHistory" parameterClass="DFacilityFamilySkiHistory">
		INSERT INTO
			[D_FACILITY_FAMILY_SKI_HISTORY]
		(
			 [FACILITY_CD]
			,[KIND_FLG]
			,[FACILITY_PATTERN]
			,[CAREER_NO]
			,[AREA_FOR_KIDS_FLG]
			,[ENTRANCE_FEE_FLG]
			,[ENTRANCE_FEE_FREE]
			,[ENTRANCE_FEE_PAY]
			,[ENTRANCE_FEE_HH_PAY]
			,[ENTRANCE_FEE_MM_PAY]
			,[ENTRANCE_FEE_ADULT_PAY]
			<isNotEmpty property="entranceFeeAdultAge">,[ENTRANCE_FEE_ADULT_AGE]</isNotEmpty>
			<isNotEmpty property="entranceFeeAdultCharge">,[ENTRANCE_FEE_ADULT_CHARGE]</isNotEmpty>
			,[ENTRANCE_FEE_CHILD_PAY]
			,[ENTRANCE_FEE_CHILD_FROM]
			,[ENTRANCE_FEE_CHILD_TO]
			<isNotEmpty property="entranceFeeChildCharge">,[ENTRANCE_FEE_CHILD_CHARGE]</isNotEmpty>
			,[GELANDE_FLG_1]
			,[GELANDE_CHARGE_FLG_1]
			<isNotEmpty property="gelandeChargeAdult1">,[GELANDE_CHARGE_ADULT_1]</isNotEmpty>
			<isNotEmpty property="gelandeChargeChild1">,[GELANDE_CHARGE_CHILD_1]</isNotEmpty>
			,[GELANDE_FLG_2]
			,[GELANDE_CHARGE_FLG_2]
			<isNotEmpty property="gelandeChargeAdult2">,[GELANDE_CHARGE_ADULT_2]</isNotEmpty>
			<isNotEmpty property="gelandeChargeChild2">,[GELANDE_CHARGE_CHILD_2]</isNotEmpty>
			,[GELANDE_FLG_3]
			,[GELANDE_CHARGE_FLG_3]
			<isNotEmpty property="gelandeChargeAdult3">,[GELANDE_CHARGE_ADULT_3]</isNotEmpty>
			<isNotEmpty property="gelandeChargeChild3">,[GELANDE_CHARGE_CHILD_3]</isNotEmpty>
			,[GELANDE_FLG_4]
			,[GELANDE_CHARGE_FLG_4]
			<isNotEmpty property="gelandeChargeAdult4">,[GELANDE_CHARGE_ADULT_4]</isNotEmpty>
			<isNotEmpty property="gelandeChargeChild4">,[GELANDE_CHARGE_CHILD_4]</isNotEmpty>
			,[GELANDE_FLG_5]
			,[GELANDE_CHARGE_FLG_5]
			<isNotEmpty property="gelandeChargeAdult5">,[GELANDE_CHARGE_ADULT_5]</isNotEmpty>
			<isNotEmpty property="gelandeChargeChild5">,[GELANDE_CHARGE_CHILD_5]</isNotEmpty>
			,[GELANDE_FLG_6]
			,[GELANDE_CHARGE_FLG_6]
			<isNotEmpty property="gelandeChargeAdult6">,[GELANDE_CHARGE_ADULT_6]</isNotEmpty>
			<isNotEmpty property="gelandeChargeChild6">,[GELANDE_CHARGE_CHILD_6]</isNotEmpty>
			,[GELANDE_FLG_7]
			,[GELANDE_CHARGE_FLG_7]
			<isNotEmpty property="gelandeChargeAdult7">,[GELANDE_CHARGE_ADULT_7]</isNotEmpty>
			<isNotEmpty property="gelandeChargeChild7">,[GELANDE_CHARGE_CHILD_7]</isNotEmpty>
			,[OTHER_FACILITY_1]
			,[OTHER_FACILITY_2]
			,[OTHER_FACILITY_3]
			,[OTHER_FACILITY_4]
			,[OTHER_SP_CMT]
		)
		VALUES
		(
			 #facilityCd#
			,#kindFlg#
			,#facilityPattern#
			,#careerNo#
			,#areaForKidsFlg#
			,#entranceFeeFlg#
			,#entranceFeeFree#
			,#entranceFeePay#
			,#entranceFeeHhPay#
			,#entranceFeeMmPay#
			,#entranceFeeAdultPay#
			<isNotEmpty property="entranceFeeAdultAge">,#entranceFeeAdultAge:int#</isNotEmpty>
			<isNotEmpty property="entranceFeeAdultCharge">,#entranceFeeAdultCharge:int#</isNotEmpty>
			,#entranceFeeChildPay#
			,#entranceFeeChildFrom#
			,#entranceFeeChildTo#
			<isNotEmpty property="entranceFeeChildCharge">,#entranceFeeChildCharge:int#</isNotEmpty>
			,#gelandeFlg1#
			,#gelandeChargeFlg1#
			<isNotEmpty property="gelandeChargeAdult1">,#gelandeChargeAdult1:int#</isNotEmpty>
			<isNotEmpty property="gelandeChargeChild1">,#gelandeChargeChild1:int#</isNotEmpty>
			,#gelandeFlg2#
			,#gelandeChargeFlg2#
			<isNotEmpty property="gelandeChargeAdult2">,#gelandeChargeAdult2:int#</isNotEmpty>
			<isNotEmpty property="gelandeChargeChild2">,#gelandeChargeChild2:int#</isNotEmpty>
			,#gelandeFlg3#
			,#gelandeChargeFlg3#
			<isNotEmpty property="gelandeChargeAdult3">,#gelandeChargeAdult3:int#</isNotEmpty>
			<isNotEmpty property="gelandeChargeChild3">,#gelandeChargeChild3:int#</isNotEmpty>
			,#gelandeFlg4#
			,#gelandeChargeFlg4#
			<isNotEmpty property="gelandeChargeAdult4">,#gelandeChargeAdult4:int#</isNotEmpty>
			<isNotEmpty property="gelandeChargeChild4">,#gelandeChargeChild4:int#</isNotEmpty>
			,#gelandeFlg5#
			,#gelandeChargeFlg5#
			<isNotEmpty property="gelandeChargeAdult5">,#gelandeChargeAdult5:int#</isNotEmpty>
			<isNotEmpty property="gelandeChargeChild5">,#gelandeChargeChild5:int#</isNotEmpty>
			,#gelandeFlg6#
			,#gelandeChargeFlg6#
			<isNotEmpty property="gelandeChargeAdult6">,#gelandeChargeAdult6:int#</isNotEmpty>
			<isNotEmpty property="gelandeChargeChild6">,#gelandeChargeChild6:int#</isNotEmpty>
			,#gelandeFlg7#
			,#gelandeChargeFlg7#
			<isNotEmpty property="gelandeChargeAdult7">,#gelandeChargeAdult7:int#</isNotEmpty>
			<isNotEmpty property="gelandeChargeChild7">,#gelandeChargeChild7:int#</isNotEmpty>
			,#otherFacility1#
			,#otherFacility2#
			,#otherFacility3#
			,#otherFacility4#
			,#otherSpCmt#
		)
	</insert>

	<insert id="DFM_insertDFacilityFamilySkiCopyFromHistory" parameterClass="DFacilityManageKey">
		INSERT INTO
			[D_FACILITY_FAMILY_SKI]
		(
			<include refid="DFM_subQuery_DFacilityFamilySki_AllColumns"/>
		)
		SELECT
			<include refid="DFM_subQuery_DFacilityFamilySki_AllColumns"/>
		FROM (
				SELECT
					[D_FACILITY_FAMILY_SKI_HISTORY].*
				FROM
					[D_FACILITY_FAMILY_SKI_HISTORY]
				INNER JOIN
					[D_FACILITY_MANAGE] ON (
							[D_FACILITY_MANAGE].[FACILITY_CD]		= [D_FACILITY_FAMILY_SKI_HISTORY].[FACILITY_CD]
						AND [D_FACILITY_MANAGE].[KIND_FLG]			= [D_FACILITY_FAMILY_SKI_HISTORY].[KIND_FLG]
						AND [D_FACILITY_MANAGE].[FACILITY_SORTS]	= #facilitySorts#
						AND [D_FACILITY_MANAGE].[FACILITY_PATTERN]	= [D_FACILITY_FAMILY_SKI_HISTORY].[FACILITY_PATTERN]
						AND [D_FACILITY_MANAGE].[BODY_CAREER_NO]	= [D_FACILITY_FAMILY_SKI_HISTORY].[CAREER_NO]
				)
				WHERE
						[D_FACILITY_MANAGE].[FACILITY_CD]		= #facilityCd#
					AND [D_FACILITY_MANAGE].[KIND_FLG]			= #kindFlg#
					AND [D_FACILITY_MANAGE].[FACILITY_PATTERN]	= #facilityPattern#
					AND [D_FACILITY_MANAGE].[CAREER_NO]			= #careerNo#
		) TMP01
	</insert>

	<delete id="DFM_deleteDFacilityFamilySki" parameterClass="DFacilityManageKey">
		DELETE FROM
			[D_FACILITY_FAMILY_SKI]
		WHERE
				[FACILITY_CD]		= #facilityCd#
			AND [KIND_FLG]			= #kindFlg#
			AND [FACILITY_PATTERN]	= #facilityPattern#
	</delete>



	<!-- ******************************************************************************************
	 *		[DP/RM]施設_交通手段_スキー
	******************************************************************************************* -->

	<typeAlias alias="DFacilityTrafficSkiHistory" type="jp.co.jreast.common.data.ddata.DFacilityTrafficSkiHistory" />

	<resultMap id="DFM_DFacilityTrafficSkiHistory_RM" class="DFacilityTrafficSkiHistory">
		<result property="facilityCd"			column="FACILITY_CD"			javaType="String"	jdbcType="char" />
		<result property="kindFlg"				column="KIND_FLG"				javaType="String"	jdbcType="char" />
		<result property="facilityPattern"		column="FACILITY_PATTERN"		javaType="String"	jdbcType="char" />

		<result property="acSkiNm1"				column="AC_SKI_NM_1"			javaType="String"	jdbcType="varchar" />
		<result property="acMsReserve1"			column="AC_MS_RESERVE_1"		javaType="String"	jdbcType="char" />
		<result property="acMsReserveCmt1"		column="AC_MS_RESERVE_CMT_1"	javaType="String"	jdbcType="varchar" />
		<result property="acWalkTime1"			column="AC_WALK_TIME_1"			javaType="String"	jdbcType="smallint" />
		<result property="acCarTime1"			column="AC_CAR_TIME_1"			javaType="String"	jdbcType="smallint" />
		<result property="acOtherTimeCmt1"		column="AC_OTHER_TIME_CMT_1"	javaType="String"	jdbcType="varchar" />
		<result property="acMsDiv1"				column="AC_MS_DIV_1"			javaType="String"	jdbcType="char" />
		<result property="acMeetTimeFlg1"		column="AC_MEET_TIME_FLG_1"		javaType="String"	jdbcType="char" />
		<result property="acMeetTimeStart1"		column="AC_MEET_TIME_START_1"	javaType="String"	jdbcType="char" />
		<result property="acMeetTimeEnd1"		column="AC_MEET_TIME_END_1"		javaType="String"	jdbcType="char" />
		<result property="acSendTimeFlg1"		column="AC_SEND_TIME_FLG_1"		javaType="String"	jdbcType="char" />
		<result property="acSendTimeStart1"		column="AC_SEND_TIME_START_1"	javaType="String"	jdbcType="char" />
		<result property="acSendTimeEnd1"		column="AC_SEND_TIME_END_1"		javaType="String"	jdbcType="char" />
		<result property="acShuttleBusFlg1"		column="AC_SHUTTLE_BUS_FLG_1"	javaType="String"	jdbcType="char" />
		<result property="acOthersFlg1"			column="AC_OTHERS_FLG_1"		javaType="String"	jdbcType="char" />
		<result property="acOthersCmt1"			column="AC_OTHERS_CMT_1"		javaType="String"	jdbcType="varchar" />
		<result property="acSkiNm2"				column="AC_SKI_NM_2"			javaType="String"	jdbcType="varchar" />
		<result property="acMsReserve2"			column="AC_MS_RESERVE_2"		javaType="String"	jdbcType="char" />
		<result property="acMsReserveCmt2"		column="AC_MS_RESERVE_CMT_2"	javaType="String"	jdbcType="varchar" />
		<result property="acWalkTime2"			column="AC_WALK_TIME_2"			javaType="String"	jdbcType="smallint" />
		<result property="acCarTime2"			column="AC_CAR_TIME_2"			javaType="String"	jdbcType="smallint" />
		<result property="acOtherTimeCmt2"		column="AC_OTHER_TIME_CMT_2"	javaType="String"	jdbcType="varchar" />
		<result property="acMsDiv2"				column="AC_MS_DIV_2"			javaType="String"	jdbcType="char" />
		<result property="acMeetTimeFlg2"		column="AC_MEET_TIME_FLG_2"		javaType="String"	jdbcType="char" />
		<result property="acMeetTimeStart2"		column="AC_MEET_TIME_START_2"	javaType="String"	jdbcType="char" />
		<result property="acMeetTimeEnd2"		column="AC_MEET_TIME_END_2"		javaType="String"	jdbcType="char" />
		<result property="acSendTimeFlg2"		column="AC_SEND_TIME_FLG_2"		javaType="String"	jdbcType="char" />
		<result property="acSendTimeStart2"		column="AC_SEND_TIME_START_2"	javaType="String"	jdbcType="char" />
		<result property="acSendTimeEnd2"		column="AC_SEND_TIME_END_2"		javaType="String"	jdbcType="char" />
		<result property="acShuttleBusFlg2"		column="AC_SHUTTLE_BUS_FLG_2"	javaType="String"	jdbcType="char" />
		<result property="acOthersFlg2"			column="AC_OTHERS_FLG_2"		javaType="String"	jdbcType="char" />
		<result property="acOthersCmt2"			column="AC_OTHERS_CMT_2"		javaType="String"	jdbcType="varchar" />
		<result property="acSkiNm3"				column="AC_SKI_NM_3"			javaType="String"	jdbcType="varchar" />
		<result property="acMsReserve3"			column="AC_MS_RESERVE_3"		javaType="String"	jdbcType="char" />
		<result property="acMsReserveCmt3"		column="AC_MS_RESERVE_CMT_3"	javaType="String"	jdbcType="varchar" />
		<result property="acWalkTime3"			column="AC_WALK_TIME_3"			javaType="String"	jdbcType="smallint" />
		<result property="acCarTime3"			column="AC_CAR_TIME_3"			javaType="String"	jdbcType="smallint" />
		<result property="acOtherTimeCmt3"		column="AC_OTHER_TIME_CMT_3"	javaType="String"	jdbcType="varchar" />
		<result property="acMsDiv3"				column="AC_MS_DIV_3"			javaType="String"	jdbcType="char" />
		<result property="acMeetTimeFlg3"		column="AC_MEET_TIME_FLG_3"		javaType="String"	jdbcType="char" />
		<result property="acMeetTimeStart3"		column="AC_MEET_TIME_START_3"	javaType="String"	jdbcType="char" />
		<result property="acMeetTimeEnd3"		column="AC_MEET_TIME_END_3"		javaType="String"	jdbcType="char" />
		<result property="acSendTimeFlg3"		column="AC_SEND_TIME_FLG_3"		javaType="String"	jdbcType="char" />
		<result property="acSendTimeStart3"		column="AC_SEND_TIME_START_3"	javaType="String"	jdbcType="char" />
		<result property="acSendTimeEnd3"		column="AC_SEND_TIME_END_3"		javaType="String"	jdbcType="char" />
		<result property="acShuttleBusFlg3"		column="AC_SHUTTLE_BUS_FLG_3"	javaType="String"	jdbcType="char" />
		<result property="acOthersFlg3"			column="AC_OTHERS_FLG_3"		javaType="String"	jdbcType="char" />
		<result property="acOthersCmt3"			column="AC_OTHERS_CMT_3"		javaType="String"	jdbcType="varchar" />

		<result property="careerNo"				column="CAREER_NO"				javaType="Integer"	jdbcType="smallint"/>
	</resultMap>

	<sql id="DFM_subQuery_DFacilityTrafficSki_AllColumns">
		 [FACILITY_CD]
		,[KIND_FLG]
		,[FACILITY_PATTERN]
		,[AC_SKI_NM_1]
		,[AC_MS_RESERVE_1]
		,[AC_MS_RESERVE_CMT_1]
		,[AC_WALK_TIME_1]
		,[AC_CAR_TIME_1]
		,[AC_OTHER_TIME_CMT_1]
		,[AC_MS_DIV_1]
		,[AC_MEET_TIME_FLG_1]
		,[AC_MEET_TIME_START_1]
		,[AC_MEET_TIME_END_1]
		,[AC_SEND_TIME_FLG_1]
		,[AC_SEND_TIME_START_1]
		,[AC_SEND_TIME_END_1]
		,[AC_SHUTTLE_BUS_FLG_1]
		,[AC_OTHERS_FLG_1]
		,[AC_OTHERS_CMT_1]
		,[AC_SKI_NM_2]
		,[AC_MS_RESERVE_2]
		,[AC_MS_RESERVE_CMT_2]
		,[AC_WALK_TIME_2]
		,[AC_CAR_TIME_2]
		,[AC_OTHER_TIME_CMT_2]
		,[AC_MS_DIV_2]
		,[AC_MEET_TIME_FLG_2]
		,[AC_MEET_TIME_START_2]
		,[AC_MEET_TIME_END_2]
		,[AC_SEND_TIME_FLG_2]
		,[AC_SEND_TIME_START_2]
		,[AC_SEND_TIME_END_2]
		,[AC_SHUTTLE_BUS_FLG_2]
		,[AC_OTHERS_FLG_2]
		,[AC_OTHERS_CMT_2]
		,[AC_SKI_NM_3]
		,[AC_MS_RESERVE_3]
		,[AC_MS_RESERVE_CMT_3]
		,[AC_WALK_TIME_3]
		,[AC_CAR_TIME_3]
		,[AC_OTHER_TIME_CMT_3]
		,[AC_MS_DIV_3]
		,[AC_MEET_TIME_FLG_3]
		,[AC_MEET_TIME_START_3]
		,[AC_MEET_TIME_END_3]
		,[AC_SEND_TIME_FLG_3]
		,[AC_SEND_TIME_START_3]
		,[AC_SEND_TIME_END_3]
		,[AC_SHUTTLE_BUS_FLG_3]
		,[AC_OTHERS_FLG_3]
		,[AC_OTHERS_CMT_3]
	</sql>

	<select id="DFM_fetchDFacilityTrafficSkiHistory" resultMap="DFM_DFacilityTrafficSkiHistory_RM" parameterClass="DFacilityManageKey">
		SELECT
			<include refid="DFM_subQuery_DFacilityTrafficSki_AllColumns"/>
			,[CAREER_NO]
		FROM (
				SELECT
					[D_FACILITY_TRAFFIC_SKI_HISTORY].*
				FROM
					[D_FACILITY_TRAFFIC_SKI_HISTORY]
				INNER JOIN
					[D_FACILITY_MANAGE] ON (
							[D_FACILITY_MANAGE].[FACILITY_CD]		= [D_FACILITY_TRAFFIC_SKI_HISTORY].[FACILITY_CD]
						AND [D_FACILITY_MANAGE].[KIND_FLG]			= [D_FACILITY_TRAFFIC_SKI_HISTORY].[KIND_FLG]
						AND [D_FACILITY_MANAGE].[FACILITY_SORTS]	= #facilitySorts#
						AND [D_FACILITY_MANAGE].[FACILITY_PATTERN]	= [D_FACILITY_TRAFFIC_SKI_HISTORY].[FACILITY_PATTERN]
						AND [D_FACILITY_MANAGE].[BODY_CAREER_NO]	= [D_FACILITY_TRAFFIC_SKI_HISTORY].[CAREER_NO]
				)
				WHERE
						[D_FACILITY_MANAGE].[FACILITY_CD]		= #facilityCd#
					AND [D_FACILITY_MANAGE].[KIND_FLG]			= #kindFlg#
					AND [D_FACILITY_MANAGE].[FACILITY_PATTERN]	= #facilityPattern#
					AND [D_FACILITY_MANAGE].[CAREER_NO]			= #careerNo#
		) TMP01
	</select>

	<select id="DFM_fetchDFacilityTrafficSkiByPlanAnsNo" resultMap="DFM_DFacilityTrafficSkiHistory_RM" parameterClass="DFacilityManageSearchData">
		SELECT
			<include refid="DFM_subQuery_DFacilityTrafficSki_AllColumns"/>
			,NULL AS [CAREER_NO]
		FROM (
			SELECT
				[D_FACILITY_TRAFFIC_SKI].*
			FROM
				[D_FACILITY_TRAFFIC_SKI]
			INNER JOIN
				[D_PLAN_ANS_FACILITY] ON (
					[D_FACILITY_TRAFFIC_SKI].[FACILITY_CD]		= [D_PLAN_ANS_FACILITY].[FACILITY_CD]
				AND [D_FACILITY_TRAFFIC_SKI].[KIND_FLG]			= [D_PLAN_ANS_FACILITY].[KIND_FLG]
				AND [D_FACILITY_TRAFFIC_SKI].[FACILITY_PATTERN]	= [D_PLAN_ANS_FACILITY].[FACILITY_PATTERN_NO5]
			)
			WHERE
				[D_PLAN_ANS_FACILITY].[PLAN_ANS_NO]	= #planAnsNo#
		) TMP01
	</select>

	<select id="DFM_fetchDFacilityTrafficSkiByPk" resultMap="DFM_DFacilityTrafficSkiHistory_RM" parameterClass="DFacilityManageSearchData">
		SELECT
			<include refid="DFM_subQuery_DFacilityTrafficSki_AllColumns"/>
			,NULL AS [CAREER_NO]
		FROM (
			SELECT
				[D_FACILITY_TRAFFIC_SKI].*
			FROM
				[D_FACILITY_TRAFFIC_SKI]
			WHERE
					[D_FACILITY_TRAFFIC_SKI].[FACILITY_CD]		= #facilityCd#
				AND [D_FACILITY_TRAFFIC_SKI].[KIND_FLG]			= #kindFlg#
				AND [D_FACILITY_TRAFFIC_SKI].[FACILITY_PATTERN]	= #facilityPattern#
		) TMP01
	</select>

	<select id="DFM_fetchAFacilityTrafficSkiByPk" resultMap="DFM_DFacilityTrafficSkiHistory_RM" parameterClass="DFacilityManageSearchData">
		SELECT
			<include refid="DFM_subQuery_DFacilityTrafficSki_AllColumns"/>
			,NULL AS [CAREER_NO]
		FROM (
			SELECT
				[A_FACILITY_TRAFFIC_SKI].*
<!--
				,NULL			AS [STATION_DIV2]
-->
			FROM
				[A_FACILITY_TRAFFIC_SKI]
			WHERE
					[A_FACILITY_TRAFFIC_SKI].[FACILITY_CD]		= #facilityCd#
				AND [A_FACILITY_TRAFFIC_SKI].[KIND_FLG]			= #kindFlg#
				AND [A_FACILITY_TRAFFIC_SKI].[FACILITY_PATTERN]	= #facilityPattern#
		) TMP01
	</select>

	<insert id="DFM_insertDFacilityTrafficSkiHistory" parameterClass="DFacilityTrafficSkiHistory">
		INSERT INTO
			[D_FACILITY_TRAFFIC_SKI_HISTORY]
		(
			 [FACILITY_CD]
			,[KIND_FLG]
			,[FACILITY_PATTERN]
			,[CAREER_NO]
			,[AC_SKI_NM_1]
			,[AC_MS_RESERVE_1]
			,[AC_MS_RESERVE_CMT_1]
			<isNotEmpty property="acWalkTime1">,[AC_WALK_TIME_1]</isNotEmpty>
			<isNotEmpty property="acCarTime1">,[AC_CAR_TIME_1]</isNotEmpty>
			,[AC_OTHER_TIME_CMT_1]
			,[AC_MS_DIV_1]
			,[AC_MEET_TIME_FLG_1]
			,[AC_MEET_TIME_START_1]
			,[AC_MEET_TIME_END_1]
			,[AC_SEND_TIME_FLG_1]
			,[AC_SEND_TIME_START_1]
			,[AC_SEND_TIME_END_1]
			,[AC_SHUTTLE_BUS_FLG_1]
			,[AC_OTHERS_FLG_1]
			,[AC_OTHERS_CMT_1]
			,[AC_SKI_NM_2]
			,[AC_MS_RESERVE_2]
			,[AC_MS_RESERVE_CMT_2]
			<isNotEmpty property="acWalkTime2">,[AC_WALK_TIME_2]</isNotEmpty>
			<isNotEmpty property="acCarTime2">,[AC_CAR_TIME_2]</isNotEmpty>
			,[AC_OTHER_TIME_CMT_2]
			,[AC_MS_DIV_2]
			,[AC_MEET_TIME_FLG_2]
			,[AC_MEET_TIME_START_2]
			,[AC_MEET_TIME_END_2]
			,[AC_SEND_TIME_FLG_2]
			,[AC_SEND_TIME_START_2]
			,[AC_SEND_TIME_END_2]
			,[AC_SHUTTLE_BUS_FLG_2]
			,[AC_OTHERS_FLG_2]
			,[AC_OTHERS_CMT_2]
			,[AC_SKI_NM_3]
			,[AC_MS_RESERVE_3]
			,[AC_MS_RESERVE_CMT_3]
			<isNotEmpty property="acWalkTime3">,[AC_WALK_TIME_3]</isNotEmpty>
			<isNotEmpty property="acCarTime3">,[AC_CAR_TIME_3]</isNotEmpty>
			,[AC_OTHER_TIME_CMT_3]
			,[AC_MS_DIV_3]
			,[AC_MEET_TIME_FLG_3]
			,[AC_MEET_TIME_START_3]
			,[AC_MEET_TIME_END_3]
			,[AC_SEND_TIME_FLG_3]
			,[AC_SEND_TIME_START_3]
			,[AC_SEND_TIME_END_3]
			,[AC_SHUTTLE_BUS_FLG_3]
			,[AC_OTHERS_FLG_3]
			,[AC_OTHERS_CMT_3]
		)
		VALUES
		(
			 #facilityCd#
			,#kindFlg#
			,#facilityPattern#
			,#careerNo#
			,#acSkiNm1#
			,#acMsReserve1#
			,#acMsReserveCmt1#
			<isNotEmpty property="acWalkTime1">,#acWalkTime1:smallint#</isNotEmpty>
			<isNotEmpty property="acCarTime1">,#acCarTime1:smallint#</isNotEmpty>
			,#acOtherTimeCmt1#
			,#acMsDiv1#
			,#acMeetTimeFlg1#
			,#acMeetTimeStart1#
			,#acMeetTimeEnd1#
			,#acSendTimeFlg1#
			,#acSendTimeStart1#
			,#acSendTimeEnd1#
			,#acShuttleBusFlg1#
			,#acOthersFlg1#
			,#acOthersCmt1#
			,#acSkiNm2#
			,#acMsReserve2#
			,#acMsReserveCmt2#
			<isNotEmpty property="acWalkTime2">,#acWalkTime2:smallint#</isNotEmpty>
			<isNotEmpty property="acCarTime2">,#acCarTime2:smallint#</isNotEmpty>
			,#acOtherTimeCmt2#
			,#acMsDiv2#
			,#acMeetTimeFlg2#
			,#acMeetTimeStart2#
			,#acMeetTimeEnd2#
			,#acSendTimeFlg2#
			,#acSendTimeStart2#
			,#acSendTimeEnd2#
			,#acShuttleBusFlg2#
			,#acOthersFlg2#
			,#acOthersCmt2#
			,#acSkiNm3#
			,#acMsReserve3#
			,#acMsReserveCmt3#
			<isNotEmpty property="acWalkTime3">,#acWalkTime3:smallint#</isNotEmpty>
			<isNotEmpty property="acCarTime3">,#acCarTime3:smallint#</isNotEmpty>
			,#acOtherTimeCmt3#
			,#acMsDiv3#
			,#acMeetTimeFlg3#
			,#acMeetTimeStart3#
			,#acMeetTimeEnd3#
			,#acSendTimeFlg3#
			,#acSendTimeStart3#
			,#acSendTimeEnd3#
			,#acShuttleBusFlg3#
			,#acOthersFlg3#
			,#acOthersCmt3#
		)
	</insert>

	<insert id="DFM_insertDFacilityTrafficSkiCopyFromHistory" parameterClass="DFacilityManageKey">
		INSERT INTO
			[D_FACILITY_TRAFFIC_SKI]
		(
			<include refid="DFM_subQuery_DFacilityTrafficSki_AllColumns"/>
		)
		SELECT
			<include refid="DFM_subQuery_DFacilityTrafficSki_AllColumns"/>
		FROM (
				SELECT
					[D_FACILITY_TRAFFIC_SKI_HISTORY].*
				FROM
					[D_FACILITY_TRAFFIC_SKI_HISTORY]
				INNER JOIN
					[D_FACILITY_MANAGE] ON (
							[D_FACILITY_MANAGE].[FACILITY_CD]		= [D_FACILITY_TRAFFIC_SKI_HISTORY].[FACILITY_CD]
						AND [D_FACILITY_MANAGE].[KIND_FLG]			= [D_FACILITY_TRAFFIC_SKI_HISTORY].[KIND_FLG]
						AND [D_FACILITY_MANAGE].[FACILITY_SORTS]	= #facilitySorts#
						AND [D_FACILITY_MANAGE].[FACILITY_PATTERN]	= [D_FACILITY_TRAFFIC_SKI_HISTORY].[FACILITY_PATTERN]
						AND [D_FACILITY_MANAGE].[BODY_CAREER_NO]	= [D_FACILITY_TRAFFIC_SKI_HISTORY].[CAREER_NO]
				)
				WHERE
						[D_FACILITY_MANAGE].[FACILITY_CD]		= #facilityCd#
					AND [D_FACILITY_MANAGE].[KIND_FLG]			= #kindFlg#
					AND [D_FACILITY_MANAGE].[FACILITY_PATTERN]	= #facilityPattern#
					AND [D_FACILITY_MANAGE].[CAREER_NO]			= #careerNo#
		) TMP01
	</insert>

	<delete id="DFM_deleteDFacilityTrafficSki" parameterClass="DFacilityManageKey">
		DELETE FROM
			[D_FACILITY_TRAFFIC_SKI]
		WHERE
				[FACILITY_CD]		= #facilityCd#
			AND [KIND_FLG]			= #kindFlg#
			AND [FACILITY_PATTERN]	= #facilityPattern#
	</delete>

</sqlMap>